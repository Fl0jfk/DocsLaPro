{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slide.tsx"],"sourcesContent":["import Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\ntype SliderProps = {\r\n  name: string;\r\n  img: string;\r\n  link: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport default function Slide({ name, img, link, external }: SliderProps) {\r\n  if (external) {\r\n    return (\r\n      <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" className='bg-white select-none flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n        {name && \r\n          <>\r\n            <div className='flex flex-col gap-1'>\r\n              <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n            </div>      \r\n            {img && \r\n              <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n            }\r\n          </>    \r\n        }  \r\n      </a>\r\n    );\r\n  }\r\n  return (\r\n    <Link href={link} className='select-none bg-white flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n      {name && \r\n        <>\r\n          <div className='flex flex-col gap-1'>\r\n            <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n          </div>      \r\n          {img && \r\n            <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n          }\r\n        </>    \r\n      }  \r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AASe,SAAS,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAe;IACtE,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAE,MAAM;YAAM,QAAO;YAAS,KAAI;YAAsB,WAAU;sBAChE,sBACC;;kCACE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAwC;;;;;;;;;;;oBAEtD,qBACC,8OAAC,wIAAK;wBAAC,KAAK;wBAAK,IAAI;wBAAC,KAAK;wBAAM,OAAO;4BAAC,WAAU;wBAAS;wBAAG,QAAQ;wBAAC,WAAU;wBAA8C,OAAM;;;;;;;;;;;;;IAMlJ;IACA,qBACE,8OAAC,uKAAI;QAAC,MAAM;QAAM,WAAU;kBACzB,sBACC;;8BACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;gBAEtD,qBACC,8OAAC,wIAAK;oBAAC,KAAK;oBAAK,IAAI;oBAAC,KAAK;oBAAM,OAAO;wBAAC,WAAU;oBAAS;oBAAG,QAAQ;oBAAC,WAAU;oBAA8C,OAAM;;;;;;;;;;;;;AAMlJ","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport Slide from \"./Slide\";\r\n\r\nexport type Category = {\r\n  id: number;\r\n  name: string;\r\n  link: string;\r\n  img: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport type SliderProps = { items: Category[]};\r\n\r\nexport default function Slider({ items }: SliderProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startX, setStartX] = useState(0);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (containerRef.current) {\r\n      setIsDragging(true);\r\n      setStartX(e.pageX);\r\n      setScrollLeft(containerRef.current.scrollLeft);\r\n    }\r\n  };\r\n  const handleMouseUp = () => { setIsDragging(false); };\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !containerRef.current) return;\r\n    const x = e.pageX;\r\n    const diffX = x - startX;\r\n    const newScrollLeft = scrollLeft - diffX;\r\n    containerRef.current.scrollLeft = newScrollLeft;\r\n  };\r\n  return (\r\n    <div ref={containerRef} className=\"xl:grid-cols-4 lg:grid-cols-3 grid md:grid-cols-3 sm:flex sm:items-center sm:overflow-x-scroll sm:snap-x sm:snap-mandatory sm:cursor-grab select-none sm:h-[550px]\" onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove}>\r\n      {items.map((category) => (\r\n        <Slide name={category.name} key={category.id} link={category.link} img={category.img} external={category.external}/>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAee,SAAS,OAAO,EAAE,KAAK,EAAe;IACnD,MAAM,eAAe,IAAA,+MAAM,EAAwB;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,kBAAkB,CAAC;QACvB,IAAI,aAAa,OAAO,EAAE;YACxB,cAAc;YACd,UAAU,EAAE,KAAK;YACjB,cAAc,aAAa,OAAO,CAAC,UAAU;QAC/C;IACF;IACA,MAAM,gBAAgB;QAAQ,cAAc;IAAQ;IACpD,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,cAAc,CAAC,aAAa,OAAO,EAAE;QAC1C,MAAM,IAAI,EAAE,KAAK;QACjB,MAAM,QAAQ,IAAI;QAClB,MAAM,gBAAgB,aAAa;QACnC,aAAa,OAAO,CAAC,UAAU,GAAG;IACpC;IACA,qBACE,8OAAC;QAAI,KAAK;QAAc,WAAU;QAAqK,aAAa;QAAiB,WAAW;QAAe,cAAc;QAAe,aAAa;kBACtS,MAAM,GAAG,CAAC,CAAC,yBACV,8OAAC,gJAAK;gBAAC,MAAM,SAAS,IAAI;gBAAoB,MAAM,SAAS,IAAI;gBAAE,KAAK,SAAS,GAAG;gBAAE,UAAU,SAAS,QAAQ;eAAhF,SAAS,EAAE;;;;;;;;;;AAIpD","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/RollingSlider.tsx"],"sourcesContent":["import Slider, { Category } from \"./Slider\";\r\n\r\ntype RollingSliderProps = { categories: Category[]};\r\n\r\nexport default function RollingSlider({ categories }: RollingSliderProps) {\r\n  if (!categories || categories.length === 0) {\r\n    return <div className=\"text-center py-4\">Aucune catégorie disponible pour votre rôle</div>;\r\n  }\r\n  return (\r\n    <section id=\"slideshow\" className=\"w-full self-center mx-auto max-w-[1500px]\">\r\n      <Slider items={categories} />\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAIe,SAAS,cAAc,EAAE,UAAU,EAAsB;IACtE,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QAC1C,qBAAO,8OAAC;YAAI,WAAU;sBAAmB;;;;;;IAC3C;IACA,qBACE,8OAAC;QAAQ,IAAG;QAAY,WAAU;kBAChC,cAAA,8OAAC,iJAAM;YAAC,OAAO;;;;;;;;;;;AAGrB","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/reducers/userSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nexport interface UserState {\n  userUid: string\n  displayName: string\n  email: string\n  photoUrl: string\n  timezone: string\n  defaultThemeColor: string\n  friendsUidList: string[]\n}\n\nconst initialState: UserState = {\n  userUid: '',\n  displayName: '',\n  email: '',\n  photoUrl: '',\n  timezone: '',\n  defaultThemeColor: '',\n  friendsUidList: [],\n}\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    logout: () => initialState,\n    setCurrentUser: (state, action: PayloadAction<UserState>) => {\n      return action.payload\n    },\n  },\n})\n\nexport const { logout, setCurrentUser } = userSlice.actions\n\nexport default userSlice.reducer\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAYA,MAAM,eAA0B;IAC9B,SAAS;IACT,aAAa;IACb,OAAO;IACP,UAAU;IACV,UAAU;IACV,mBAAmB;IACnB,gBAAgB,EAAE;AACpB;AAEO,MAAM,YAAY,IAAA,0MAAW,EAAC;IACnC,MAAM;IACN;IACA,UAAU;QACR,QAAQ,IAAM;QACd,gBAAgB,CAAC,OAAO;YACtB,OAAO,OAAO,OAAO;QACvB;IACF;AACF;AAEO,MAAM,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,UAAU,OAAO;uCAE5C,UAAU,OAAO","debugId":null}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/reducers/dbSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nexport interface EventRecord {\n  eventUid: string\n  eventGroupUid?: string | null\n  [key: string]: any\n}\n\nexport interface EventGroupRecord {\n  groupUid: string\n  [key: string]: any\n}\n\nexport interface DBStateShape {\n  userDB: Record<string, any>\n  userEventDB: Record<string, string[]>\n  eventDB: Record<string, EventRecord>\n  invitedDB: Record<string, any>\n  eventGroupDB: Record<string, EventGroupRecord>\n  eventInviteDB: Record<string, any>\n}\n\nexport interface DBState {\n  isDBLoaded: boolean\n  db: DBStateShape\n}\n\nconst initialState: DBState = {\n  isDBLoaded: false,\n  db: {\n    userDB: {},\n    userEventDB: {},\n    eventDB: {},\n    invitedDB: {},\n    eventGroupDB: {},\n    eventInviteDB: {},\n  },\n}\n\ninterface SetDBPayload extends DBStateShape {}\n\ninterface AddNewEventToDBPayload {\n  userUid: string\n  event: EventRecord\n  eventGroup: EventGroupRecord | null\n}\n\nexport const dbSlice = createSlice({\n  name: 'db',\n  initialState,\n  reducers: {\n    setDB: (state, action: PayloadAction<SetDBPayload>) => {\n      state.db = action.payload\n      state.isDBLoaded = true\n    },\n    addNewEventToDB: (\n      state,\n      action: PayloadAction<AddNewEventToDBPayload>,\n    ) => {\n      const { userUid, event, eventGroup } = action.payload\n\n      console.log('Adding Event to DB...')\n      console.log(userUid, event, eventGroup)\n\n      // Ajout de l’event\n      state.db.eventDB[event.eventUid] = event\n\n      // Initialiser le tableau si besoin\n      if (!state.db.userEventDB[userUid]) {\n        state.db.userEventDB[userUid] = []\n      }\n      state.db.userEventDB[userUid].push(event.eventUid)\n\n      // Ajout du groupe si présent\n      if (eventGroup !== null && event.eventGroupUid) {\n        state.db.eventGroupDB[event.eventGroupUid] = eventGroup\n      }\n    },\n  },\n})\n\nexport const { setDB, addNewEventToDB } = dbSlice.actions\n\nexport default dbSlice.reducer\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AA2BA,MAAM,eAAwB;IAC5B,YAAY;IACZ,IAAI;QACF,QAAQ,CAAC;QACT,aAAa,CAAC;QACd,SAAS,CAAC;QACV,WAAW,CAAC;QACZ,cAAc,CAAC;QACf,eAAe,CAAC;IAClB;AACF;AAUO,MAAM,UAAU,IAAA,0MAAW,EAAC;IACjC,MAAM;IACN;IACA,UAAU;QACR,OAAO,CAAC,OAAO;YACb,MAAM,EAAE,GAAG,OAAO,OAAO;YACzB,MAAM,UAAU,GAAG;QACrB;QACA,iBAAiB,CACf,OACA;YAEA,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,GAAG,OAAO,OAAO;YAErD,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,SAAS,OAAO;YAE5B,mBAAmB;YACnB,MAAM,EAAE,CAAC,OAAO,CAAC,MAAM,QAAQ,CAAC,GAAG;YAEnC,mCAAmC;YACnC,IAAI,CAAC,MAAM,EAAE,CAAC,WAAW,CAAC,QAAQ,EAAE;gBAClC,MAAM,EAAE,CAAC,WAAW,CAAC,QAAQ,GAAG,EAAE;YACpC;YACA,MAAM,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,QAAQ;YAEjD,6BAA6B;YAC7B,IAAI,eAAe,QAAQ,MAAM,aAAa,EAAE;gBAC9C,MAAM,EAAE,CAAC,YAAY,CAAC,MAAM,aAAa,CAAC,GAAG;YAC/C;QACF;IACF;AACF;AAEO,MAAM,EAAE,KAAK,EAAE,eAAe,EAAE,GAAG,QAAQ,OAAO;uCAE1C,QAAQ,OAAO","debugId":null}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/types.ts"],"sourcesContent":["export const ThemeColorTypes = {\n  RED: 0,\n  GREEN: 1,\n  GOLD: 2,\n  BLUE: 3,\n  CYAN: 4,\n  PURPLE: 5,\n  BROWN: 6,\n} as const\n\nexport type ThemeColorType =\n  (typeof ThemeColorTypes)[keyof typeof ThemeColorTypes]\n\nexport const EventRepeatTypes = {\n  DAILY: 0,\n  WEEKLY: 1,\n  BI_WEEKLY: 2,\n  MONTHLY: 3,\n  WEEK_DAYS: 4,\n} as const\n\nexport type EventRepeatType =\n  (typeof EventRepeatTypes)[keyof typeof EventRepeatTypes]\n\nexport const EventInviteStatusTypes = {\n  PENDING: 0,\n  ACCEPTED: 1,\n  DECLINED: 2,\n} as const\n\nexport type EventInviteStatusType =\n  (typeof EventInviteStatusTypes)[keyof typeof EventInviteStatusTypes]\n\nexport const CalendarViewTypes = {\n  WEEK_VIEW: 1,\n} as const\n\nexport type CalendarViewType =\n  (typeof CalendarViewTypes)[keyof typeof CalendarViewTypes]\n\nexport const RepeatChangesTypes = {\n  CHANGE: 'change',\n  DELETE: 'delete',\n} as const\n\nexport type RepeatChangesType =\n  (typeof RepeatChangesTypes)[keyof typeof RepeatChangesTypes]\n\nexport const MINUTE_SEGMENT_INDEX = {\n  0: 0,\n  15: 1,\n  30: 2,\n  45: 3,\n} as const\n\n// \"0\" | \"15\" | \"30\" | \"45\"\nexport type MinuteSegmentKey = keyof typeof MINUTE_SEGMENT_INDEX\n\n// 0 | 1 | 2 | 3\nexport type MinuteIndex = (typeof MINUTE_SEGMENT_INDEX)[MinuteSegmentKey]\n\n// On cast d'abord vers unknown, puis vers MinuteSegmentKey[]\nexport const MINUTE_SEGMENT_KEYS =\n  Object.keys(MINUTE_SEGMENT_INDEX) as unknown as MinuteSegmentKey[]\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAO,MAAM,kBAAkB;IAC7B,KAAK;IACL,OAAO;IACP,MAAM;IACN,MAAM;IACN,MAAM;IACN,QAAQ;IACR,OAAO;AACT;AAKO,MAAM,mBAAmB;IAC9B,OAAO;IACP,QAAQ;IACR,WAAW;IACX,SAAS;IACT,WAAW;AACb;AAKO,MAAM,yBAAyB;IACpC,SAAS;IACT,UAAU;IACV,UAAU;AACZ;AAKO,MAAM,oBAAoB;IAC/B,WAAW;AACb;AAKO,MAAM,qBAAqB;IAChC,QAAQ;IACR,QAAQ;AACV;AAKO,MAAM,uBAAuB;IAClC,GAAG;IACH,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AASO,MAAM,sBACX,OAAO,IAAI,CAAC","debugId":null}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/reducers/calendar/calendarSettingSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { CalendarViewTypes, CalendarViewType } from '../../utils/types'\n\nexport interface SelectedEventPosition {\n  eventUid: string\n  top: number\n  left: number\n  height: number\n  width: number\n}\n\nexport interface CreateEventBasis {\n  startDate: string\n  endDate: string\n}\n\nexport interface CalendarSettingState {\n  targetDate: string\n  calendarViewType: CalendarViewType\n  isCreateEventModalOpen: boolean\n  selectedEvent: SelectedEventPosition\n  createEventBasis: CreateEventBasis\n}\n\nconst initialState: CalendarSettingState = {\n  targetDate: new Date().toString(),\n  calendarViewType: CalendarViewTypes.DAY_VIEW,\n  isCreateEventModalOpen: false,\n  selectedEvent: {\n    eventUid: '',\n    top: 0,\n    left: 0,\n    height: 0,\n    width: 0,\n  },\n  createEventBasis: {\n    startDate: new Date().toString(),\n    endDate: new Date().toString(),\n  },\n}\n\nexport const calendarSettingSlice = createSlice({\n  name: 'calendarSetting',\n  initialState,\n  reducers: {\n    setTargetDate: (state, action: PayloadAction<string>) => {\n      state.targetDate = action.payload\n    },\n    setViewType: (state, action: PayloadAction<CalendarViewType>) => {\n      state.calendarViewType = action.payload\n    },\n    setCreateEventBasis: (\n      state,\n      action: PayloadAction<CreateEventBasis>,\n    ) => {\n      state.createEventBasis = action.payload\n    },\n    setIsCreateEventModalOpen: (state, action: PayloadAction<boolean>) => {\n      state.isCreateEventModalOpen = action.payload\n    },\n    setSelectedEvent: (\n      state,\n      action: PayloadAction<SelectedEventPosition>,\n    ) => {\n      state.selectedEvent = action.payload\n    },\n    resetCalendarSettings: state => {\n      state.targetDate = new Date().toString()\n      state.calendarViewType = CalendarViewTypes.DAY_VIEW\n      state.isCreateEventModalOpen = false\n      state.selectedEvent = {\n        eventUid: '',\n        top: 0,\n        left: 0,\n        height: 0,\n        width: 0,\n      }\n      state.createEventBasis = {\n        startDate: new Date().toString(),\n        endDate: new Date().toString(),\n      }\n    },\n  },\n})\n\nexport const {\n  setTargetDate,\n  setViewType,\n  setCreateEventBasis,\n  setIsCreateEventModalOpen,\n  setSelectedEvent,\n  resetCalendarSettings,\n} = calendarSettingSlice.actions\n\nexport default calendarSettingSlice.reducer\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAuBA,MAAM,eAAqC;IACzC,YAAY,IAAI,OAAO,QAAQ;IAC/B,kBAAkB,0IAAiB,CAAC,QAAQ;IAC5C,wBAAwB;IACxB,eAAe;QACb,UAAU;QACV,KAAK;QACL,MAAM;QACN,QAAQ;QACR,OAAO;IACT;IACA,kBAAkB;QAChB,WAAW,IAAI,OAAO,QAAQ;QAC9B,SAAS,IAAI,OAAO,QAAQ;IAC9B;AACF;AAEO,MAAM,uBAAuB,IAAA,0MAAW,EAAC;IAC9C,MAAM;IACN;IACA,UAAU;QACR,eAAe,CAAC,OAAO;YACrB,MAAM,UAAU,GAAG,OAAO,OAAO;QACnC;QACA,aAAa,CAAC,OAAO;YACnB,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;QACA,qBAAqB,CACnB,OACA;YAEA,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;QACA,2BAA2B,CAAC,OAAO;YACjC,MAAM,sBAAsB,GAAG,OAAO,OAAO;QAC/C;QACA,kBAAkB,CAChB,OACA;YAEA,MAAM,aAAa,GAAG,OAAO,OAAO;QACtC;QACA,uBAAuB,CAAA;YACrB,MAAM,UAAU,GAAG,IAAI,OAAO,QAAQ;YACtC,MAAM,gBAAgB,GAAG,0IAAiB,CAAC,QAAQ;YACnD,MAAM,sBAAsB,GAAG;YAC/B,MAAM,aAAa,GAAG;gBACpB,UAAU;gBACV,KAAK;gBACL,MAAM;gBACN,QAAQ;gBACR,OAAO;YACT;YACA,MAAM,gBAAgB,GAAG;gBACvB,WAAW,IAAI,OAAO,QAAQ;gBAC9B,SAAS,IAAI,OAAO,QAAQ;YAC9B;QACF;IACF;AACF;AAEO,MAAM,EACX,aAAa,EACb,WAAW,EACX,mBAAmB,EACnB,yBAAyB,EACzB,gBAAgB,EAChB,qBAAqB,EACtB,GAAG,qBAAqB,OAAO;uCAEjB,qBAAqB,OAAO","debugId":null}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/helpers.ts"],"sourcesContent":["import {\n  addDays,\n  closestTo,\n  eachDayOfInterval,\n  eachHourOfInterval,\n  endOfDay,\n  endOfMonth,\n  endOfWeek,\n  endOfYear,\n  getDate,\n  getDaysInMonth,\n  getHours,\n  getMinutes,\n  getMonth,\n  set as setDate,\n  startOfDay,\n  startOfMonth,\n  startOfWeek,\n  startOfYear,\n  subDays,\n} from 'date-fns'\nimport { v4 as uuid } from 'uuid'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n  EventRepeatTypes,\n  EventRepeatType,\n  MINUTE_SEGMENT_INDEX,\n  MINUTE_SEGMENT_KEYS,\n  MinuteSegmentKey,\n  MinuteIndex,\n  ThemeColorTypes,\n  ThemeColorType,\n} from './types'\n\nexport const colorLookup: Record<ThemeColorType, string> = {\n  [ThemeColorTypes.RED]: 'bg-red-500',\n  [ThemeColorTypes.GREEN]: 'bg-green-500',\n  [ThemeColorTypes.GOLD]: 'bg-gold-500',\n  [ThemeColorTypes.BLUE]: 'bg-blue-500',\n  [ThemeColorTypes.CYAN]: 'bg-cyan-500',\n  [ThemeColorTypes.PURPLE]: 'bg-purple-500',\n  [ThemeColorTypes.BROWN]: 'bg-brown-500',\n}\n\nexport const repeatTypeStringLookup: Record<EventRepeatType | -1, string> = {\n  [-1]: 'Does not repeat',\n  [EventRepeatTypes.DAILY]: 'Daily',\n  [EventRepeatTypes.WEEKLY]: 'Weekly',\n  [EventRepeatTypes.BI_WEEKLY]: 'Bi-weekly',\n  [EventRepeatTypes.MONTHLY]: 'Monthly',\n  [EventRepeatTypes.WEEK_DAYS]: 'Week days',\n}\n\n/* -------------------------------------------------------------------------- */\n/*  Time utils                                                                */\n/* -------------------------------------------------------------------------- */\n\nexport const isValidTime = (strValue: string): [boolean, number, number] => {\n  const trimmed = strValue.trim()\n  const split = trimmed.split(':')\n\n  if (split.length !== 2) return [false, 0, 0]\n\n  const hour = Number(split[0])\n  const minutes = Number(split[1])\n\n  if (isNaN(hour) || isNaN(minutes)) return [false, 0, 0]\n  if (hour < 0 || hour > 23) return [false, 0, 0]\n  if (minutes < 0 || minutes > 59) return [false, 0, 0]\n\n  return [true, hour, minutes]\n}\n\n/* -------------------------------------------------------------------------- */\n/*  Generic sort                                                              */\n/* -------------------------------------------------------------------------- */\n\nexport const sortEventBlocks = <T extends Record<string, any>>(\n  events: T[],\n  key: keyof T,\n  isAscending = true,\n): T[] => {\n  const compFunc = (a: number | Date, b: number | Date, asc: boolean) =>\n    asc ? (a < b ? -1 : a > b ? 1 : 0) : (a < b ? 1 : a > b ? -1 : 0)\n\n  return events\n    .slice()\n    .sort((a, b) => {\n      if (key === 'startDate' || key === 'endDate' || key === 'createdAt') {\n        return compFunc(\n          new Date(a[key] as any),\n          new Date(b[key] as any),\n          isAscending,\n        )\n      }\n\n      if (a[key] === b[key]) {\n        return compFunc(\n          new Date(a['startDate'] as any),\n          new Date(b['startDate'] as any),\n          isAscending,\n        )\n      }\n\n      return compFunc(a[key] as any, b[key] as any, isAscending)\n    })\n}\n\nexport interface DayViewHourSegment {\n  events: any[]\n  startColIndex: number\n  colCount: number\n  baseZIndex: number\n}\n\nexport type DayViewHours = Record<\n  number,\n  Record<MinuteSegmentKey, DayViewHourSegment>\n>\n\nexport const getBaseDayViewEvents = () => {\n  const hours: DayViewHours = Array(24)\n    .fill(null)\n    .map((_, i) => i)\n    .reduce<DayViewHours>((acc, cur) => {\n      const segment: Record<MinuteSegmentKey, DayViewHourSegment> = {\n        0: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        15: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        30: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        45: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n      }\n      acc[cur] = segment\n      return acc\n    }, {} as DayViewHours)\n\n  return {\n    wholeDayEvents: [] as any[],\n    hours,\n  }\n}\n\nexport interface WeekDayEvents {\n  hours: DayViewHours\n}\n\nexport const getBaseWeekViewEvents = () => {\n  const weekArray = Array(7)\n    .fill(null)\n    .map((_, i) => i)\n\n  const days = weekArray.reduce<Record<number, DayViewHours>>((acc, cur) => {\n    const { hours } = getBaseDayViewEvents()\n    acc[cur] = { ...hours }\n    return acc\n  }, {})\n\n  const wholeDayEvents = weekArray.reduce<\n    Record<\n      number,\n      {\n        incomingRowsMatrix: Record<number, number>\n        events: any[]\n      }\n    >\n  >((acc, cur) => {\n    acc[cur] = {\n      incomingRowsMatrix: {},\n      events: [],\n    }\n    return acc\n  }, {})\n\n  return {\n    wholeDayEvents,\n    days,\n  }\n}\n\nexport const getUpdatedEventBlocksWithPlacement = (\n  events: any[],\n  incomingRowsMatrix: Record<number, number>,\n) => {\n  const list: any[] = []\n  let eventIndex = 0\n  let matrixIndex = 0\n\n  while (eventIndex < events.length) {\n    if (matrixIndex in incomingRowsMatrix) {\n      list.push({ isEmpty: true })\n    } else {\n      list.push({\n        ...events[eventIndex],\n        isEmpty: false,\n      })\n      eventIndex++\n    }\n    matrixIndex++\n  }\n\n  return list\n}\n\nexport const calculateIncomingRowMatrix = (\n  eventsByDay: Record<\n    number,\n    {\n      events: any[]\n      incomingRowsMatrix: Record<number, number>\n    }\n  >,\n  isWeek = false,\n) => {\n  const container: typeof eventsByDay = { ...eventsByDay }\n\n  let baseIncomingRowsMatrix: Record<number, number> = {}\n  let count = 0\n  let rowIndex = 0\n\n  let keys = Object.keys(container).map(Number)\n\n  if (isWeek) {\n    const updated = keys.slice()\n    const temp = updated.shift()\n    if (temp !== undefined) updated.push(temp)\n    keys = updated\n  }\n\n  keys.forEach(day => {\n    if (count === 7) {\n      count = 0\n      baseIncomingRowsMatrix = {}\n    }\n\n    container[day] = {\n      ...container[day],\n      events: sortEventBlocks(container[day].events, 'duration', false),\n    }\n\n    const deletedKeys: number[] = []\n\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      if (baseIncomingRowsMatrix[keyNum] === 0) {\n        deletedKeys.push(keyNum)\n        delete baseIncomingRowsMatrix[keyNum]\n      }\n    })\n\n    if (deletedKeys.length > 0) {\n      rowIndex = Math.min(...deletedKeys)\n    }\n\n    container[day] = {\n      ...container[day],\n      incomingRowsMatrix: { ...baseIncomingRowsMatrix },\n    }\n\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      baseIncomingRowsMatrix[keyNum] = baseIncomingRowsMatrix[keyNum] - 1\n    })\n\n    container[day].events.forEach(e => {\n      if (e.duration > 0) {\n        baseIncomingRowsMatrix[rowIndex] = e.duration\n        rowIndex += 1\n        while (rowIndex in baseIncomingRowsMatrix) {\n          rowIndex += 1\n        }\n      }\n    })\n\n    count += 1\n  })\n\n  return container\n}\n\nconst getMonthOuterRangeContainer = (start: Date, end: Date) => {\n  const container: Record<\n    number,\n    { incomingRowsMatrix: Record<number, number>; events: any[] }\n  > = {}\n  for (let i = getDate(start); i < getDate(end) + 1; i++) {\n    container[i] = {\n      incomingRowsMatrix: {},\n      events: [],\n    }\n  }\n  return container\n}\n\nconst getMonthOuterRangeDates = (targetStartDate: Date, targetEndDate: Date) => {\n  const leftOuterStart = startOfWeek(targetStartDate, { weekStartsOn: 1 })\n  const leftOuterEnd = subDays(targetStartDate, 1)\n  const rightOuterStart = addDays(targetEndDate, 1)\n  const rightOuterEnd = endOfWeek(targetEndDate, { weekStartsOn: 1 })\n\n  const leftOuterContainer = getMonthOuterRangeContainer(\n    leftOuterStart,\n    leftOuterEnd,\n  )\n  const rightOuterContainer = getMonthOuterRangeContainer(\n    rightOuterStart,\n    rightOuterEnd,\n  )\n\n  return {\n    left: { leftOuterStart, leftOuterEnd, leftOuterContainer },\n    right: { rightOuterStart, rightOuterEnd, rightOuterContainer },\n  }\n}\n\nexport const getBaseMonthViewEvents = (targetDate: string | Date) => {\n  const target = new Date(targetDate)\n  const numberOfDays = getDaysInMonth(target)\n\n  const monthStart = startOfMonth(target)\n  const monthEnd = endOfMonth(target)\n\n  const { left, right } = getMonthOuterRangeDates(monthStart, monthEnd)\n\n  const dateArray = Array(numberOfDays)\n    .fill(null)\n    .map((_, i) => i + 1)\n\n  const inner = dateArray.reduce<\n    Record<\n      number,\n      { incomingRowsMatrix: Record<number, number>; events: any[] }\n    >\n  >((acc, cur) => {\n    acc[cur] = {\n      incomingRowsMatrix: {},\n      events: [],\n    }\n    return acc\n  }, {})\n\n  return {\n    [getMonth(left.leftOuterStart)]: left.leftOuterContainer,\n    [getMonth(target)]: inner,\n    [getMonth(right.rightOuterEnd)]: right.rightOuterContainer,\n  }\n}\n\nexport const getDateRange = (\n  calendarViewType: CalendarViewType,\n  targetDate: string | Date,\n): [Date, Date] => {\n  const target = new Date(targetDate)\n\n  switch (calendarViewType) {\n    case CalendarViewTypes.WEEK_VIEW: {\n      const weekStart = startOfWeek(target, { weekStartsOn: 1 })\n      const weekEnd = endOfWeek(target, { weekStartsOn: 1 })\n      return [weekStart, endOfDay(weekEnd)]\n    }\n    default:\n      return [startOfDay(target), endOfDay(target)]\n  }\n}\n\nexport const getClosestIndexForDayViewEvents = (\n  date: Date,\n): [number, MinuteSegmentKey] => {\n  const ZERO = setDate(date, { minutes: 0 })\n  const FIFTEEN = setDate(date, { minutes: 15 })\n  const THIRTY = setDate(date, { minutes: 30 })\n  const FOURTYFIVE = setDate(date, { minutes: 45 })\n\n  const closest = closestTo(date, [ZERO, FIFTEEN, THIRTY, FOURTYFIVE])\n  if (!closest) {\n    return [getHours(date), 0]\n  }\n  const m = getMinutes(closest) as 0 | 15 | 30 | 45\n  const minuteKey = ((): MinuteSegmentKey => {\n    switch (m) {\n      case 0:\n        return 0\n      case 15:\n        return 15\n      case 30:\n        return 30\n      case 45:\n        return 45\n      default:\n        return 0\n    }\n  })()\n\n  return [getHours(date), minuteKey]\n}\n\nexport const findEventCoverage = (event: {\n  startDate: string\n  endDate: string\n}) => {\n  const coveredHours = eachHourOfInterval({\n    start: new Date(event.startDate),\n    end: new Date(event.endDate),\n  })\n\n  const startDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.startDate),\n  )[1]\n  const endDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.endDate),\n  )[1]\n\n  if (coveredHours.length === 1) {\n    const startSeg = MINUTE_SEGMENT_INDEX[startDateMinuteKey]\n    const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n    const endSeg =\n      startSeg === endSegRaw ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n    return {\n      [coveredHours[0].toString()]: MINUTE_SEGMENT_KEYS.slice(\n        startSeg,\n        endSeg,\n      ) as MinuteSegmentKey[],\n    } as Record<string, MinuteSegmentKey[]>\n  }\n\n  // > 1h\n  const result = coveredHours\n    .map((hour, index) => {\n      if (index === 0) {\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            MINUTE_SEGMENT_INDEX[startDateMinuteKey],\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      if (index === coveredHours.length - 1) {\n        const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n        const endSeg =\n          endSegRaw === 0 ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            0,\n            endSeg,\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      return {\n        hour: hour.toString(),\n        minuteSegments: [...MINUTE_SEGMENT_KEYS] as MinuteSegmentKey[],\n      }\n    })\n    .reduce<Record<string, MinuteSegmentKey[]>>((acc, cur) => {\n      acc[cur.hour] = cur.minuteSegments\n      return acc\n    }, {})\n\n  return result\n}\n\nexport const reduceCoverages = (\n  coveragesArray: Record<string, MinuteSegmentKey[]>[],\n) => {\n  const reducedCoverage: Record<number, Record<MinuteSegmentKey, number>> = {}\n\n  coveragesArray.forEach(coverage => {\n    const hourKeys = Object.keys(coverage)\n\n    for (let i = 0; i < hourKeys.length; i++) {\n      const hourNum = getHours(new Date(hourKeys[i]))\n\n      if (!(hourNum in reducedCoverage)) {\n        reducedCoverage[hourNum] = {\n          0: 0,\n          15: 0,\n          30: 0,\n          45: 0,\n        }\n      }\n\n      const minuteSegments = coverage[hourKeys[i]] as MinuteSegmentKey[]\n\n      minuteSegments.forEach(segmentKey => {\n        reducedCoverage[hourNum][segmentKey] =\n          reducedCoverage[hourNum][segmentKey] + 1\n      })\n    }\n  })\n\n  return reducedCoverage\n}\n\nexport const calculateOverlap = (\n  reduceCoverage: Record<number, Record<MinuteSegmentKey, number>>,\n  hoursObject: DayViewHours,\n) => {\n  const coverageHours = Object.keys(reduceCoverage).map(Number)\n\n  coverageHours.forEach(hour => {\n    const coverageMinuteSegments =\n  Object.keys(reduceCoverage[hour]) as unknown as MinuteSegmentKey[]\n\n\n    coverageMinuteSegments.forEach(minute => {\n      const coverageCount = reduceCoverage[hour][minute]\n      const { events } = hoursObject[hour][minute]\n\n      if (events.length < coverageCount) {\n        const diff = coverageCount - events.length\n        hoursObject[hour][minute].colCount = diff + 1\n        hoursObject[hour][minute].startColIndex = diff\n        hoursObject[hour][minute].baseZIndex = diff\n      }\n    })\n  })\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 885, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/reducers/calendar/calendarSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport {\n  isBefore,\n  isWithinInterval,\n  eachDayOfInterval,\n  areIntervalsOverlapping,\n  getHours,\n  set,\n  format,\n  eachWeekOfInterval,\n  getMinutes,\n  getMonth,\n  getDate,\n  isWeekend,\n  differenceInWeeks,\n  isSameDay,\n  differenceInMonths,\n  getDay,\n  isAfter,\n  endOfWeek,\n  endOfDay,\n  getYear,\n  getSeconds,\n} from 'date-fns'\nimport {\n  calculateIncomingRowMatrix,\n  calculateOverlap,\n  findEventCoverage,\n  getBaseDayViewEvents,\n  getBaseMonthViewEvents,\n  getBaseWeekViewEvents,\n  getClosestIndexForDayViewEvents,\n  getDateRange,\n  reduceCoverages,\n} from '../../utils/helpers'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n  EventRepeatTypes,\n  EventRepeatType,\n  RepeatChangesTypes,\n  RepeatChangesType,\n} from '../../utils/types'\nimport { DBStateShape, EventRecord, EventGroupRecord } from '../dbSlice'\n\n/* -------------------------------------------------------------------------- */\n/*  Types                                                                     */\n/* -------------------------------------------------------------------------- */\n\nexport interface CalendarState {\n  dayViewEvents: any\n  weekViewEvents: any\n  monthViewEvents: any\n}\n\nconst initialState: CalendarState = {\n  dayViewEvents: {},\n  weekViewEvents: {},\n  monthViewEvents: {},\n}\n\nexport interface BaseEventBlock {\n  eventUid: string\n  eventCreatorUid: string\n  eventGroupUid?: string | null\n  startDate: string\n  endDate: string\n  title: string\n  themeColor: number\n  createdAt: string\n  isAllDay?: boolean\n  duration?: number\n  [key: string]: any\n}\n\ninterface FilteredEvents {\n  single: BaseEventBlock[]\n  multiday: BaseEventBlock[]\n  repeated: BaseEventBlock[]\n}\n\ninterface FetchEventsPayload {\n  userUid: string\n  calendarViewType: CalendarViewType\n  targetDate: string | Date\n  db: DBStateShape\n}\n\n/* -------------------------------------------------------------------------- */\n/*  Helpers                                                                   */\n/* -------------------------------------------------------------------------- */\n\nconst getBaseEventContainer = (\n  calendarViewType: CalendarViewType,\n  targetDate: string | Date,\n) => {\n  switch (calendarViewType) {\n    case CalendarViewTypes.DAY_VIEW:\n      return getBaseDayViewEvents()\n    case CalendarViewTypes.WEEK_VIEW:\n      return getBaseWeekViewEvents()\n    case CalendarViewTypes.MONTH_VIEW:\n      return getBaseMonthViewEvents(targetDate)\n    default:\n      return {}\n  }\n}\n\nconst getBaseEventBlock = (\n  event: BaseEventBlock,\n  changes: Partial<BaseEventBlock> = {},\n  start: string | null = null,\n  end: string | null = null,\n  duration = -1,\n): BaseEventBlock => {\n  const {\n    eventUid,\n    eventCreatorUid,\n    eventGroupUid,\n    title,\n    themeColor,\n    createdAt,\n    startDate,\n    endDate,\n  } = event\n\n  return {\n    eventUid,\n    eventCreatorUid,\n    eventGroupUid,\n    startDate: start !== null ? start : startDate,\n    endDate: end !== null ? end : endDate,\n    title,\n    themeColor,\n    duration,\n    createdAt,\n    ...changes,\n  }\n}\n\nconst getDuration = (startDate: Date | string, endDate: Date | string) => {\n  const start = new Date(startDate)\n  const end = new Date(endDate)\n  return eachDayOfInterval({ start, end }).length - 1\n}\n\nconst getMultidayEventBlocksForMonth = (\n  events: BaseEventBlock[],\n  rangeStart: Date,\n  rangeEnd: Date,\n): BaseEventBlock[] => {\n  const processedEvents: BaseEventBlock[] = []\n\n  events.forEach(event => {\n    const originalStartDate = new Date(event.startDate)\n    const originalEndDate = new Date(event.endDate)\n\n    const startDate = isBefore(originalStartDate, rangeStart)\n      ? rangeStart\n      : originalStartDate\n\n    const endDate = isAfter(originalEndDate, rangeEnd)\n      ? rangeEnd\n      : originalEndDate\n\n    const eachWeekIntervals = eachWeekOfInterval(\n      {\n        start: startDate,\n        end: endDate,\n      },\n      { weekStartsOn: 1 },\n    )\n\n    if (eachWeekIntervals.length === 1) {\n      processedEvents.push(\n        getBaseEventBlock(\n          event,\n          {},\n          startDate.toString(),\n          endDate.toString(),\n          getDuration(startDate, endDate),\n        ),\n      )\n    } else {\n      const MAX_DURATION = 6\n      eachWeekIntervals.forEach((interval, index) => {\n        if (index === eachWeekIntervals.length - 1) {\n          processedEvents.push(\n            getBaseEventBlock(\n              event,\n              {},\n              interval.toString(),\n              endDate.toString(),\n              getDuration(interval, endDate),\n            ),\n          )\n        } else if (index === 0) {\n          const endOfTargetWeek = endOfDay(\n            endOfWeek(startDate, { weekStartsOn: 1 }),\n          )\n\n          processedEvents.push(\n            getBaseEventBlock(\n              event,\n              {},\n              startDate.toString(),\n              endOfTargetWeek.toString(),\n              getDuration(startDate, endOfTargetWeek),\n            ),\n          )\n        } else {\n          const endOfTargetWeek = endOfDay(\n            endOfWeek(interval, { weekStartsOn: 1 }),\n          )\n\n          processedEvents.push(\n            getBaseEventBlock(\n              event,\n              {},\n              interval.toString(),\n              endOfTargetWeek.toString(),\n              MAX_DURATION,\n            ),\n          )\n        }\n      })\n    }\n  })\n\n  return processedEvents\n}\n\nconst getRepeatedEventBlocks = (\n  sourceEvent: BaseEventBlock,\n  eventGroupDetail: EventGroupRecord & {\n    repeatType: EventRepeatType\n    repeatChanges: Record<\n      string,\n      { type: RepeatChangesType; payload?: Partial<BaseEventBlock> }\n    >\n  },\n  rangeStart: Date,\n  rangeEnd: Date,\n): BaseEventBlock[] => {\n  const intervalStart = isBefore(new Date(sourceEvent.startDate), rangeStart)\n    ? rangeStart\n    : new Date(sourceEvent.startDate)\n\n  const rangeInterval = eachDayOfInterval({\n    start: intervalStart,\n    end: rangeEnd,\n  })\n  const { repeatChanges, repeatType } = eventGroupDetail\n  const eventBlockList: BaseEventBlock[] = []\n\n  for (let i = 0; i < rangeInterval.length; i++) {\n    const changeDateKey = format(rangeInterval[i], 'yyyy-M-d')\n    let changePayload: Partial<BaseEventBlock> = {}\n\n    if (changeDateKey in repeatChanges) {\n      if (repeatChanges[changeDateKey].type === RepeatChangesTypes.DELETE) {\n        continue\n      } else {\n        changePayload = { ...(repeatChanges[changeDateKey].payload || {}) }\n      }\n    }\n\n    const curYear = getYear(rangeInterval[i])\n    const curMonth = getMonth(rangeInterval[i])\n    const curDate = getDate(rangeInterval[i])\n\n    const blockStart = set(new Date(sourceEvent.startDate), {\n      year: curYear,\n      month: curMonth,\n      date: curDate,\n    })\n    const blockEnd = set(new Date(sourceEvent.endDate), {\n      year: curYear,\n      month: curMonth,\n      date: curDate,\n    })\n\n    switch (repeatType) {\n      case EventRepeatTypes.DAILY: {\n        eventBlockList.push(\n          getBaseEventBlock(\n            sourceEvent,\n            changePayload,\n            blockStart.toString(),\n            blockEnd.toString(),\n          ),\n        )\n        break\n      }\n      case EventRepeatTypes.WEEKLY: {\n        const checkIsSameDay = isSameDay(\n          rangeInterval[i],\n          new Date(sourceEvent.startDate),\n        )\n        const checkIsSameWeekDay =\n          getDay(rangeInterval[i]) === getDay(new Date(sourceEvent.startDate))\n\n        const sourceHour = getHours(new Date(sourceEvent.startDate))\n        const sourceMinute = getMinutes(new Date(sourceEvent.startDate))\n        const sourceSeconds = getSeconds(new Date(sourceEvent.startDate))\n\n        const checkDifferenceInWeeks = differenceInWeeks(\n          set(rangeInterval[i], {\n            hours: sourceHour,\n            minutes: sourceMinute,\n            seconds: sourceSeconds + 1,\n          }),\n          new Date(sourceEvent.startDate),\n        )\n\n        if (\n          checkIsSameDay ||\n          (checkIsSameWeekDay && checkDifferenceInWeeks > 0)\n        ) {\n          eventBlockList.push(\n            getBaseEventBlock(\n              sourceEvent,\n              changePayload,\n              blockStart.toString(),\n              blockEnd.toString(),\n            ),\n          )\n        }\n        break\n      }\n      case EventRepeatTypes.BI_WEEKLY: {\n        const checkIsSameDay = isSameDay(\n          rangeInterval[i],\n          new Date(sourceEvent.startDate),\n        )\n        const checkIsSameWeekDay =\n          getDay(rangeInterval[i]) === getDay(new Date(sourceEvent.startDate))\n\n        const sourceHour = getHours(new Date(sourceEvent.startDate))\n        const sourceMinute = getMinutes(new Date(sourceEvent.startDate))\n        const sourceSeconds = getSeconds(new Date(sourceEvent.startDate))\n\n        const checkDifferenceInWeeks = differenceInWeeks(\n          set(rangeInterval[i], {\n            hours: sourceHour,\n            minutes: sourceMinute,\n            seconds: sourceSeconds + 1,\n          }),\n          new Date(sourceEvent.startDate),\n        )\n\n        if (\n          checkIsSameDay ||\n          (checkIsSameWeekDay && checkDifferenceInWeeks % 2 === 0)\n        ) {\n          eventBlockList.push(\n            getBaseEventBlock(\n              sourceEvent,\n              changePayload,\n              blockStart.toString(),\n              blockEnd.toString(),\n            ),\n          )\n        }\n        break\n      }\n      case EventRepeatTypes.MONTHLY: {\n        const checkIsSameDay = isSameDay(\n          rangeInterval[i],\n          new Date(sourceEvent.startDate),\n        )\n        const checkIsSameWeekDay =\n          getDay(rangeInterval[i]) === getDay(new Date(sourceEvent.startDate))\n\n        const sourceHour = getHours(new Date(sourceEvent.startDate))\n        const sourceMinute = getMinutes(new Date(sourceEvent.startDate))\n        const sourceSeconds = getSeconds(new Date(sourceEvent.startDate))\n\n        const checkDifferenceInMonths = differenceInMonths(\n          set(rangeInterval[i], {\n            hours: sourceHour,\n            minutes: sourceMinute,\n            seconds: sourceSeconds + 1,\n          }),\n          new Date(sourceEvent.startDate),\n        )\n\n        if (\n          checkIsSameDay ||\n          (checkIsSameWeekDay && checkDifferenceInMonths > 0)\n        ) {\n          eventBlockList.push(\n            getBaseEventBlock(\n              sourceEvent,\n              changePayload,\n              blockStart.toString(),\n              blockEnd.toString(),\n            ),\n          )\n        }\n        break\n      }\n      case EventRepeatTypes.WEEK_DAYS: {\n        if (!isWeekend(rangeInterval[i])) {\n          eventBlockList.push(\n            getBaseEventBlock(\n              sourceEvent,\n              changePayload,\n              blockStart.toString(),\n              blockEnd.toString(),\n            ),\n          )\n        }\n        break\n      }\n    }\n  }\n\n  return eventBlockList\n}\n\nconst filterEvents = (\n  events: BaseEventBlock[],\n  calendarViewType: CalendarViewType,\n  targetDate: string | Date,\n): FilteredEvents => {\n  const [rangeStart, rangeEnd] = getDateRange(calendarViewType, targetDate)\n\n  const filteredEvents: FilteredEvents = {\n    single: [],\n    multiday: [],\n    repeated: [],\n  }\n\n  events.forEach(e => {\n    const eventStartDate = new Date(e.startDate)\n    const eventEndDate = new Date(e.endDate)\n\n    const isWithin = isWithinInterval(eventStartDate, {\n      start: rangeStart,\n      end: rangeEnd,\n    })\n\n    if (e.eventGroupUid && isBefore(eventStartDate, rangeEnd)) {\n      filteredEvents.repeated.push(e)\n    } else if (\n      (e.isAllDay && isWithin) ||\n      (eachDayOfInterval({ start: eventStartDate, end: eventEndDate })\n        .length > 1 &&\n        areIntervalsOverlapping(\n          { start: eventStartDate, end: eventEndDate },\n          { start: rangeStart, end: rangeEnd },\n        ))\n    ) {\n      filteredEvents.multiday.push(e)\n    } else if (isWithin) {\n      filteredEvents.single.push(e)\n    }\n  })\n\n  return filteredEvents\n}\n\n/* -------------------------------------------------------------------------- */\n/*  Insert helpers                                                            */\n/* -------------------------------------------------------------------------- */\n\nconst insertEventToDayViewContainer = (\n  container: any,\n  filteredEvents: FilteredEvents,\n  targetDate: string | Date,\n  eventGroupDB: Record<string, any>,\n) => {\n  const { single, repeated, multiday } = filteredEvents\n  const [rangeStart, rangeEnd] = getDateRange(\n    CalendarViewTypes.DAY_VIEW,\n    targetDate,\n  )\n\n  const coverageArr: any[] = []\n\n  single.forEach(e => {\n    const [hour, minute] = getClosestIndexForDayViewEvents(\n      new Date(e.startDate),\n    )\n    const eventBlock = getBaseEventBlock(e)\n    container.hours[hour][minute].events.push(eventBlock)\n\n    coverageArr.push(findEventCoverage(e))\n  })\n\n  multiday.forEach(e => {\n    const eventBlock = getBaseEventBlock(e)\n    container.wholeDayEvents.push(eventBlock)\n  })\n\n  repeated.forEach(e => {\n    const eventGroupDetail = eventGroupDB[e.eventGroupUid!]\n    const repeatedBlocks = getRepeatedEventBlocks(\n      e,\n      eventGroupDetail,\n      rangeStart,\n      rangeEnd,\n    )\n\n    repeatedBlocks.forEach(block => {\n      const [hour, minute] = getClosestIndexForDayViewEvents(\n        new Date(block.startDate),\n      )\n      container.hours[hour][minute].events.push(block)\n      coverageArr.push(findEventCoverage(e))\n    })\n  })\n\n  if (coverageArr.length > 0) {\n    const coverages = reduceCoverages(coverageArr)\n    calculateOverlap(coverages, container.hours)\n  }\n}\n\nconst insertEventToWeekViewContainer = (\n  container: any,\n  filteredEvents: FilteredEvents,\n  targetDate: string | Date,\n  eventGroupDB: Record<string, any>,\n) => {\n  const { single, repeated, multiday } = filteredEvents\n  const [rangeStart, rangeEnd] = getDateRange(\n    CalendarViewTypes.WEEK_VIEW,\n    targetDate,\n  )\n\n  const coverageArrs: Record<number, any[]> = {\n    0: [],\n    1: [],\n    2: [],\n    3: [],\n    4: [],\n    5: [],\n    6: [],\n  }\n\n  single.forEach(e => {\n    const dayIndex = getDay(new Date(e.startDate))\n    const [hour, minute] = getClosestIndexForDayViewEvents(\n      new Date(e.startDate),\n    )\n    const eventBlock = getBaseEventBlock(e)\n    container.days[dayIndex][hour][minute].events.push(eventBlock)\n\n    coverageArrs[dayIndex].push(findEventCoverage(e))\n  })\n\n  multiday.forEach(e => {\n    const originalStartDate = new Date(e.startDate)\n    const originalEndDate = new Date(e.endDate)\n\n    const startDate = isBefore(originalStartDate, rangeStart)\n      ? rangeStart\n      : originalStartDate\n\n    const endDate = isAfter(originalEndDate, rangeEnd)\n      ? rangeEnd\n      : originalEndDate\n\n    const dayIndex = getDay(new Date(startDate))\n    const duration = getDuration(startDate, endDate)\n\n    const eventBlock = getBaseEventBlock(e, {}, null, null, duration)\n    container.wholeDayEvents[dayIndex].events.push(eventBlock)\n  })\n\n  repeated.forEach(e => {\n    const eventGroupDetail = eventGroupDB[e.eventGroupUid!]\n    const repeatedBlocks = getRepeatedEventBlocks(\n      e,\n      eventGroupDetail,\n      rangeStart,\n      rangeEnd,\n    )\n\n    repeatedBlocks.forEach(block => {\n      const dayIndex = getDay(new Date(block.startDate))\n      const [hour, minute] = getClosestIndexForDayViewEvents(\n        new Date(block.startDate),\n      )\n      container.days[dayIndex][hour][minute].events.push(block)\n\n      coverageArrs[dayIndex].push(findEventCoverage(e))\n    })\n  })\n\n  Object.keys(coverageArrs).forEach(keyStr => {\n    const key = Number(keyStr)\n    if (coverageArrs[key].length > 0) {\n      const coverages = reduceCoverages(coverageArrs[key])\n      calculateOverlap(coverages, container.days[key])\n    }\n  })\n}\n\nconst insertEventToMonthViewContainer = (\n  container: any,\n  filteredEvents: FilteredEvents,\n  targetDate: string | Date,\n  eventGroupDB: Record<string, any>,\n) => {\n  const { single, repeated, multiday } = filteredEvents\n  const [rangeStart, rangeEnd] = getDateRange(\n    CalendarViewTypes.MONTH_VIEW,\n    targetDate,\n  )\n\n  single.forEach(e => {\n    const startDate = new Date(e.startDate)\n    const monthIndex = getMonth(startDate)\n    const dateIndex = getDate(startDate)\n\n    const eventBlock = getBaseEventBlock(e)\n    container[monthIndex][dateIndex].events.push(eventBlock)\n  })\n\n  const multidayEventBlocks = getMultidayEventBlocksForMonth(\n    multiday,\n    rangeStart,\n    rangeEnd,\n  )\n\n  multidayEventBlocks.forEach(eb => {\n    const startDate = new Date(eb.startDate)\n    const monthIndex = getMonth(startDate)\n    const dateIndex = getDate(startDate)\n\n    container[monthIndex][dateIndex].events.push(eb)\n  })\n\n  repeated.forEach(e => {\n    const eventGroupDetail = eventGroupDB[e.eventGroupUid!]\n    const repeatedBlocks = getRepeatedEventBlocks(\n      e,\n      eventGroupDetail,\n      rangeStart,\n      rangeEnd,\n    )\n\n    repeatedBlocks.forEach(block => {\n      const startDate = new Date(block.startDate)\n      const monthIndex = getMonth(startDate)\n      const dateIndex = getDate(startDate)\n\n      container[monthIndex][dateIndex].events.push(block)\n    })\n  })\n}\n\n/* -------------------------------------------------------------------------- */\n/*  Slice                                                                     */\n/* -------------------------------------------------------------------------- */\n\nexport const calendarSlice = createSlice({\n  name: 'event',\n  initialState,\n  reducers: {\n    fetchEventsForCalendarType: (\n      state,\n      { payload }: PayloadAction<FetchEventsPayload>,\n    ) => {\n      const { userUid, calendarViewType, targetDate, db } = payload\n      const { userEventDB, eventDB, invitedDB, eventGroupDB } = db\n\n      const allEvents: BaseEventBlock[] = [\n        ...(userEventDB[userUid] || []).map(\n          eUid => eventDB[eUid] as BaseEventBlock,\n        ),\n        ...(invitedDB[userUid] || []),\n      ]\n\n      const filteredEvents = filterEvents(\n        allEvents,\n        calendarViewType,\n        targetDate,\n      )\n      const baseEventContainer = getBaseEventContainer(\n        calendarViewType,\n        targetDate,\n      )\n\n      switch (calendarViewType) {\n        case CalendarViewTypes.DAY_VIEW: {\n          insertEventToDayViewContainer(\n            baseEventContainer,\n            filteredEvents,\n            targetDate,\n            eventGroupDB,\n          )\n          state.dayViewEvents = baseEventContainer\n          break\n        }\n\n        case CalendarViewTypes.WEEK_VIEW: {\n  insertEventToWeekViewContainer(\n    baseEventContainer,\n    filteredEvents,\n    targetDate,\n    eventGroupDB,\n  )\n\n  // On dit explicitement à TS que c’est le container \"semaine\"\n  const weekContainer = baseEventContainer as {\n    wholeDayEvents: Record<\n      number,\n      {\n        incomingRowsMatrix: Record<number, number>\n        events: any[]\n      }\n    >\n    days: any\n  }\n\n  weekContainer.wholeDayEvents = calculateIncomingRowMatrix(\n    weekContainer.wholeDayEvents,\n    true,\n  )\n\n  state.weekViewEvents = weekContainer\n  break\n}\n\n\n        case CalendarViewTypes.MONTH_VIEW: {\n          insertEventToMonthViewContainer(\n            baseEventContainer,\n            filteredEvents,\n            targetDate,\n            eventGroupDB,\n          )\n          state.monthViewEvents = baseEventContainer\n          break\n        }\n      }\n    },\n    resetCalendarEvents: state => {\n      state.dayViewEvents = {}\n      state.weekViewEvents = {}\n      state.monthViewEvents = {}\n    },\n  },\n})\n\nexport const { fetchEventsForCalendarType, resetCalendarEvents } =\n  calendarSlice.actions\n\nexport default calendarSlice.reducer\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1286, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/reducers/index.ts"],"sourcesContent":["import { AnyAction, Reducer, combineReducers } from 'redux'\nimport userSlice from './userSlice'\nimport dbSlice from './dbSlice'\nimport calendarSettingSlice from './calendar/calendarSettingSlice'\nimport calendarSlice from './calendar/calendarSlice'\n\nconst appReducer = combineReducers({\n  user: userSlice,\n  db: dbSlice,\n  calendarSetting: calendarSettingSlice,\n  calendar: calendarSlice,\n})\n\nexport type RootState = ReturnType<typeof appReducer>\n\nconst rootReducer: Reducer<RootState, AnyAction> = (state, action) => {\n  return appReducer(state, action)\n}\n\nexport default rootReducer\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,aAAa,IAAA,0JAAe,EAAC;IACjC,MAAM,uIAAS;IACf,IAAI,qIAAO;IACX,iBAAiB,8JAAoB;IACrC,UAAU,uJAAa;AACzB;AAIA,MAAM,cAA6C,CAAC,OAAO;IACzD,OAAO,WAAW,OAAO;AAC3B;uCAEe","debugId":null}},
    {"offset": {"line": 1314, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/config/store.ts"],"sourcesContent":["import { configureStore } from '@reduxjs/toolkit'\nimport reducers from '../reducers'\n\nexport const store = configureStore({\n  reducer: reducers,\n  devTools: process.env.NODE_ENV !== 'production',\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,QAAQ,IAAA,6MAAc,EAAC;IAClC,SAAS,mIAAQ;IACjB,UAAU,oDAAyB;AACrC","debugId":null}},
    {"offset": {"line": 1330, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Button/IconButton.tsx"],"sourcesContent":["import { ReactNode, MouseEventHandler } from 'react'\n\ntype IconButtonSize = 'xs' | 'small' | 'medium'\ntype IconButtonInk = 'default' | 'black'\ntype TooltipLocation = 'left' | 'bottom' | 'top' | 'none'\n\nconst wrapperSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-9', width: 'w-9' },\n  medium: { height: 'h-10', width: 'w-10' },\n}\n\nconst inkSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-10', width: 'w-10' },\n  medium: { height: 'h-11', width: 'w-11' },\n}\n\nconst inkHoverColorLookup: Record<IconButtonInk, string> = {\n  default: 'hover:bg-gray-400 group-hover:bg-opacity-10',\n  black: 'hover:bg-black group-hover:bg-opacity-10',\n}\n\ninterface IconButtonProps {\n  size: IconButtonSize\n  ink?: IconButtonInk\n  label: string\n  tooltipLocation: TooltipLocation\n  imgComponent: ReactNode\n  onClickHandler: MouseEventHandler<HTMLDivElement>\n}\n\nexport default function IconButton({\n  size,\n  ink = 'default',\n  label,\n  tooltipLocation,\n  imgComponent,\n  onClickHandler,\n}: IconButtonProps) {\n  return (\n    <div\n      className={`\n        relative\n        cursor-pointer\n        flex\n        justify-center\n        items-center\n        bg-transparent\n        group\n        ${wrapperSizeLookup[size].height}\n        ${wrapperSizeLookup[size].width}\n      `}\n      onClick={onClickHandler}\n    >\n      {imgComponent}\n      <div\n        className={`\n          absolute\n          rounded-full\n          top-1/2\n          left-1/2\n          transform\n          -translate-x-1/2\n          -translate-y-1/2\n          transition-all\n          ease-in-out\n          duration-300\n          ${inkHoverColorLookup[ink]}\n          z-10\n          ${inkSizeLookup[size].height}\n          ${inkSizeLookup[size].width}\n        `}\n      >\n        {tooltipLocation === 'left' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              top-1/2\n              right-14\n              transform\n              -translate-y-1/2\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'bottom' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              -bottom-8\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'top' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              bottom-full\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAMA,MAAM,oBAA+E;IACnF,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAO,OAAO;IAAM;IACrC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,gBAA2E;IAC/E,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAQ,OAAO;IAAO;IACvC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,sBAAqD;IACzD,SAAS;IACT,OAAO;AACT;AAWe,SAAS,WAAW,EACjC,IAAI,EACJ,MAAM,SAAS,EACf,KAAK,EACL,eAAe,EACf,YAAY,EACZ,cAAc,EACE;IAChB,qBACE,8OAAC;QACC,WAAW,CAAC;;;;;;;;QAQV,EAAE,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC;QACjC,EAAE,iBAAiB,CAAC,KAAK,CAAC,KAAK,CAAC;MAClC,CAAC;QACD,SAAS;;YAER;0BACD,8OAAC;gBACC,WAAW,CAAC;;;;;;;;;;;UAWV,EAAE,mBAAmB,CAAC,IAAI,CAAC;;UAE3B,EAAE,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC;UAC7B,EAAE,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC;QAC9B,CAAC;;oBAEA,oBAAoB,wBACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,0BACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,uBACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOf","debugId":null}},
    {"offset": {"line": 1503, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Calendar/Calendar.tsx"],"sourcesContent":["import {\n  addMonths,\n  addWeeks,\n  eachDayOfInterval,\n  endOfMonth,\n  endOfWeek,\n  format,\n  getDate,\n  getMonth,\n  isSameDay,\n  setMonth,\n  startOfMonth,\n  startOfWeek,\n  subMonths,\n} from 'date-fns'\nimport { useEffect, useRef, useState } from 'react'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\nimport IconButton from '../Button/IconButton'\n\ninterface CalendarProps {\n  targetDate: string | Date\n  onClickDate: (date: Date) => void\n  isModal?: boolean\n  onClose?: () => void\n}\n\nexport default function Calendar({\n  targetDate,\n  onClickDate,\n  isModal = false,\n  onClose = () => {},\n}: CalendarProps) {\n  const today = new Date()\n  const calendarRef = useRef<HTMLDivElement | null>(null)\n  const [calendarDate, setCalendarDate] = useState<string | Date>(Date())\n\n  useEffect(() => {\n    const diff =\n      getMonth(new Date(targetDate)) - getMonth(new Date(calendarDate))\n\n    if (diff > 0) {\n      setCalendarDate(addMonths(new Date(calendarDate), diff))\n    } else if (diff < 0) {\n      setCalendarDate(subMonths(new Date(calendarDate), Math.abs(diff)))\n    }\n  }, [targetDate, calendarDate])\n\n  useEffect(() => {\n    if (!isModal) return\n\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (calendarRef.current) {\n        const outsideClick = !calendarRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onClose()\n        }\n      }\n    }\n\n    document.addEventListener('click', checkOutsideClick)\n\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [isModal, onClose])\n\n  const onClickMoveMonth = (dir: 'prev' | 'next') => {\n    const newDate = new Date(calendarDate)\n    if (dir === 'prev') {\n      setCalendarDate(subMonths(newDate, 1))\n    } else {\n      setCalendarDate(addMonths(newDate, 1))\n    }\n  }\n\n  const isEqualDate = (a: Date | string, b: Date | string): boolean => {\n    const dateA = new Date(a)\n    const dateB = new Date(b)\n    return isSameDay(dateA, dateB)\n  }\n\n  const gridHeader = ['L', 'M', 'W', 'T', 'F', 'S', 'S'].map((d, i) => (\n    <div\n      key={i}\n      className=\"flex items-center justify-center h-6 text-gray-500 bg-white text-xxs\"\n    >\n      {d}\n    </div>\n  ))\n\n  const gridDates = (startDate: Date | string = Date()) => {\n    const baseDate = new Date()\n    const target = new Date(startDate)\n    const targetMonth = getMonth(target)\n\n    const month = setMonth(baseDate, targetMonth)\n    const monthRangeStart = startOfWeek(startOfMonth(month), {\n      weekStartsOn: 1,\n    })\n    const monthRangeEnd = addWeeks(\n      endOfWeek(endOfMonth(month), { weekStartsOn: 1 }),\n      1,\n    )\n\n    const dynamicDateColor = (\n      today: Date,\n      date: Date,\n      targetDate: Date | string,\n      curDateMonth: number,\n      targetMonth: number,\n    ): string | undefined => {\n      if (\n        (isEqualDate(today, date) && isEqualDate(targetDate, date)) ||\n        isEqualDate(today, date)\n      ) {\n        return 'bg-blue-500 text-white hover:bg-blue-700'\n      }\n\n      if (isEqualDate(targetDate, date)) {\n        return 'bg-blue-300 text-blue-700 hover:bg-blue-400'\n      }\n\n      if (curDateMonth !== targetMonth && !isEqualDate(today, date)) {\n        return 'text-gray-400'\n      }\n\n      return undefined\n    }\n\n    const days = eachDayOfInterval({\n      start: monthRangeStart,\n      end: monthRangeEnd,\n    }).map((date, i) => {\n      const curDateMonth = getMonth(date)\n      return (\n        <div\n          key={i}\n          className=\"flex items-center justify-center bg-white cursor-pointer text-xxs\"\n          onClick={() => onClickDate(date)}\n        >\n          <p\n            className={`\n              flex items-center justify-center w-6 h-6 transition rounded-full hover:bg-gray-200\n              ${dynamicDateColor(\n                today,\n                date,\n                targetDate,\n                curDateMonth,\n                targetMonth,\n              ) ?? ''}\n            `}\n          >\n            {getDate(date)}\n          </p>\n        </div>\n      )\n    })\n\n    return days\n  }\n\n  return (\n    <div\n      ref={calendarRef}\n      className=\"px-4 pt-2 pb-6 bg-white\"\n    >\n      <div className=\"flex items-center justify-between pl-2.5 pr-1\">\n        <p className=\"text-sm\">\n          {format(new Date(calendarDate), 'MMMM yyyy')}\n        </p>\n        <div className=\"flex\">\n          <IconButton\n            size=\"xs\"\n            label=\"Previous Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowLeft\n                size=\"20px\"\n                color=\"rgba(95, 105, 119)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('prev')}\n          />\n          <IconButton\n            size=\"xs\"\n            label=\"Next Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowRight\n                size=\"20px\"\n                color=\"rgba(95, 105, 119)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('next')}\n          />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-7 mt-2 grid-rows-7 gap-y-1\">\n        {gridHeader}\n        {gridDates(calendarDate)}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1729, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeftCalendar.tsx"],"sourcesContent":["import { useDispatch, useSelector } from 'react-redux'\nimport { setTargetDate } from '../../../reducers/calendar/calendarSettingSlice'\nimport Calendar from '../../Common/Calendar/Calendar'\n\ninterface CalendarSettingState {\n  targetDate: string\n}\n\ninterface RootState {\n  calendarSetting: CalendarSettingState\n}\n\nexport default function PanelLeftCalendar() {\n  const dispatch = useDispatch()\n  const { targetDate } = useSelector((state: RootState) => state.calendarSetting)\n\n  const onClickDate = (date: Date) => {\n    dispatch(setTargetDate(date.toString()))\n  }\n\n  return (\n    <Calendar\n      targetDate={targetDate}\n      onClickDate={onClickDate}\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAUe,SAAS;IACtB,MAAM,WAAW,IAAA,wKAAW;IAC5B,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,wKAAW,EAAC,CAAC,QAAqB,MAAM,eAAe;IAE9E,MAAM,cAAc,CAAC;QACnB,SAAS,IAAA,oKAAa,EAAC,KAAK,QAAQ;IACtC;IAEA,qBACE,8OAAC,+JAAQ;QACP,YAAY;QACZ,aAAa;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 1760, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeft.tsx"],"sourcesContent":["import { getHours, getMinutes, set } from 'date-fns'\nimport Image from 'next/image'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n  setCreateEventBasis,\n  setIsCreateEventModalOpen,\n} from '../../../reducers/calendar/calendarSettingSlice'\nimport PanelLeftCalendar from './PanelLeftCalendar'\n\ninterface CalendarSettingState {\n  targetDate: string\n}\n\ninterface RootState {\n  calendarSetting: CalendarSettingState\n}\n\nexport default function PanelLeft() {\n  const dispatch = useDispatch()\n\n  const { targetDate } = useSelector(\n    (state: RootState) => state.calendarSetting,\n  )\n\n  const onClickCreate = () => {\n    const now = new Date()\n    const newEventBaseDate = set(new Date(targetDate), {\n      hours: getHours(now),\n      minutes: getMinutes(now),\n    }).toString()\n\n    dispatch(\n      setCreateEventBasis({\n        startDate: newEventBaseDate,\n        endDate: newEventBaseDate,\n      }),\n    )\n    dispatch(setIsCreateEventModalOpen(true))\n  }\n\n  return (\n    <div className=\"min-w-248\">\n      <div className=\"pl-2 my-4\">\n        <button\n          className=\"flex items-center justify-center h-12 p-3.5 text-sm transition bg-white border rounded-full shadow-md border-opacity-30 min-w-56 hover:shadow-xl hover:bg-blue-50\"\n          onClick={onClickCreate}\n        >\n          <Image\n            src=\"/createIcon.png\"\n            height={32}\n            width={32}\n            alt=\"create-icon\"\n          />\n          <span className=\"pr-3 ml-3 font-normal tracking-wide text-gray-500\">\n            Create\n          </span>\n        </button>\n      </div>\n      <PanelLeftCalendar />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAIA;;;;;;;AAUe,SAAS;IACtB,MAAM,WAAW,IAAA,wKAAW;IAE5B,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,wKAAW,EAChC,CAAC,QAAqB,MAAM,eAAe;IAG7C,MAAM,gBAAgB;QACpB,MAAM,MAAM,IAAI;QAChB,MAAM,mBAAmB,IAAA,yIAAG,EAAC,IAAI,KAAK,aAAa;YACjD,OAAO,IAAA,mJAAQ,EAAC;YAChB,SAAS,IAAA,uJAAU,EAAC;QACtB,GAAG,QAAQ;QAEX,SACE,IAAA,0KAAmB,EAAC;YAClB,WAAW;YACX,SAAS;QACX;QAEF,SAAS,IAAA,gLAAyB,EAAC;IACrC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS;;sCAET,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,QAAQ;4BACR,OAAO;4BACP,KAAI;;;;;;sCAEN,8OAAC;4BAAK,WAAU;sCAAoD;;;;;;;;;;;;;;;;;0BAKxE,8OAAC,2KAAiB;;;;;;;;;;;AAGxB","debugId":null}},
    {"offset": {"line": 1853, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Dropdown/Dropdown.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\n\ninterface DropdownItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\ninterface DropdownProps {\n  data?: DropdownItem[]\n  onCloseDropdown: () => void\n}\n\nexport default function Dropdown({\n  data = [],\n  onCloseDropdown,\n}: DropdownProps) {\n  const dropdownRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (dropdownRef.current) {\n        const outsideClick = !dropdownRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onCloseDropdown()\n        }\n      }\n    }\n\n    document.addEventListener('click', checkOutsideClick)\n\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [onCloseDropdown])\n\n  const handleOnClick = (handler: () => void) => {\n    handler()\n    onCloseDropdown()\n  }\n\n  return (\n    <div\n      ref={dropdownRef}\n      className=\"absolute left-0 z-50 py-2 bg-white rounded-md dropdownBoxShadow min-w-168 top-full\"\n    >\n      {data.map((d, i) => (\n        <div\n          key={i}\n          onClick={() => handleOnClick(d.onClickHandler)}\n          className=\"flex items-center justify-between px-4 py-2 transition cursor-pointer hover:bg-gray-100\"\n        >\n          <div className=\"text-sm\">\n            {d.leftLabel}\n          </div>\n          <div className=\"text-sm text-gray-400\">\n            {d.rightLabel}\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAae,SAAS,SAAS,EAC/B,OAAO,EAAE,EACT,eAAe,EACD;IACd,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAElD,IAAA,kNAAS,EAAC;QACR,MAAM,oBAAoB,CAAC;YACzB,IAAI,YAAY,OAAO,EAAE;gBACvB,MAAM,eAAe,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM;gBAC3D,IAAI,cAAc;oBAChB;gBACF;YACF;QACF;QAEA,SAAS,gBAAgB,CAAC,SAAS;QAEnC,OAAO;YACL,SAAS,mBAAmB,CAAC,SAAS;QACxC;IACF,GAAG;QAAC;KAAgB;IAEpB,MAAM,gBAAgB,CAAC;QACrB;QACA;IACF;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAU;kBAET,KAAK,GAAG,CAAC,CAAC,GAAG,kBACZ,8OAAC;gBAEC,SAAS,IAAM,cAAc,EAAE,cAAc;gBAC7C,WAAU;;kCAEV,8OAAC;wBAAI,WAAU;kCACZ,EAAE,SAAS;;;;;;kCAEd,8OAAC;wBAAI,WAAU;kCACZ,EAAE,UAAU;;;;;;;eARV;;;;;;;;;;AAcf","debugId":null}},
    {"offset": {"line": 1922, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/CreateEventModal.tsx"],"sourcesContent":["import {\n  endOfDay,\n  format,\n  getDate,\n  getHours,\n  getMinutes,\n  getMonth,\n  getYear,\n  isAfter,\n  isBefore,\n  set as setDate,\n  startOfDay,\n} from 'date-fns'\nimport { useEffect, useRef, useState } from 'react'\nimport {\n  MdAccessTime,\n  MdArrowDropDown,\n  MdCheckBox,\n  MdCheckBoxOutlineBlank,\n  MdClose,\n  MdColorLens,\n  MdDragHandle,\n  MdLocationOn,\n  MdSubject,\n} from 'react-icons/md'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { v4 as uuid } from 'uuid'\nimport {\n  setTargetDate,\n  setCreateEventBasis,\n  setIsCreateEventModalOpen,\n} from '../../reducers/calendar/calendarSettingSlice'\nimport { addNewEventToDB } from '../../reducers/dbSlice'\nimport {\n  colorLookup,\n  isValidTime,\n  repeatTypeStringLookup,\n} from '../../utils/helpers'\nimport {\n  EventRepeatTypes,\n  EventRepeatType,\n  ThemeColorTypes,\n  ThemeColorType,\n} from '../../utils/types'\nimport IconButton from '../Common/Button/IconButton'\nimport Calendar from '../Common/Calendar/Calendar'\nimport Dropdown from '../Common/Dropdown/Dropdown'\n\ninterface User {\n  userUid: string\n  defaultThemeColor: number // vient de la DB; on cast vers ThemeColorType\n}\n\ninterface CreateEventBasis {\n  startDate: string\n  endDate: string\n}\n\ninterface CalendarSettingState {\n  createEventBasis: CreateEventBasis\n}\n\ninterface RootState {\n  user: User\n  calendarSetting: CalendarSettingState\n}\n\ninterface RepeatTypeItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\ninterface CreateEventModalProps {\n  isEdit?: boolean\n}\n\nexport default function CreateEventModal({ isEdit = false }: CreateEventModalProps) {\n  const createEventModalRef = useRef<HTMLDivElement | null>(null)\n  const startDateInputRef = useRef<HTMLInputElement | null>(null)\n  const endDateInputRef = useRef<HTMLInputElement | null>(null)\n\n  const [isMouseDown, setIsMouseDown] = useState(false)\n\n  const dispatch = useDispatch()\n\n  const currentUser = useSelector((state: RootState) => state.user)\n  const { createEventBasis } = useSelector(\n    (state: RootState) => state.calendarSetting,\n  )\n\n  const [title, setTitle] = useState('')\n  const [location, setLocation] = useState('')\n  const [description, setDescription] = useState('')\n\n  const [startDate, setStartDate] = useState<string>(new Date().toString())\n  const [startDateInputValue, setStartDateInputValue] = useState('')\n  const [showStartDateInput, setShowStartDateInput] = useState(false)\n\n  const [endDate, setEndDate] = useState<string>(new Date().toString())\n  const [endDateInputValue, setEndDateInputValue] = useState('')\n  const [showEndDateInput, setShowEndDateInput] = useState(false)\n\n  const [isAllDay, setIsAllDay] = useState(false)\n\n  // -1 = ne se répète pas, sinon EventRepeatType\n  const [repeatType, setRepeatType] = useState<-1 | EventRepeatType>(-1)\n\n  const [themeColor, setThemeColor] = useState<ThemeColorType>(\n    ThemeColorTypes.RED,\n  )\n\n  const [isRepeatTypeDropdownOpen, setIsRepeatTypeDropdownOpen] =\n    useState(false)\n  const [isStartDateCalendarOpen, setIsStartDateCalendarOpen] =\n    useState(false)\n  const [isEndDateCalendarOpen, setIsEndDateCalendarOpen] = useState(false)\n\n  const repeatTypeDropdownData: RepeatTypeItem[] = [\n    {\n      leftLabel: 'Does not repeat',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(-1)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Daily',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.DAILY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Weekly',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.WEEKLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Bi-weekly',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.BI_WEEKLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Monthly',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.MONTHLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Week-days',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.WEEK_DAYS)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n  ]\n\n  const onToggleAllDay = (newVal: boolean) => {\n    if (newVal) {\n      const updatedStartDate = startOfDay(new Date(startDate))\n      const updatedEndDate = endOfDay(new Date(endDate))\n\n      setStartDate(updatedStartDate.toString())\n      setEndDate(updatedEndDate.toString())\n    } else {\n      const now = new Date()\n      const curHour = getHours(now)\n      const curMin = getMinutes(now)\n\n      setStartDate(\n        setDate(new Date(startDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toString(),\n      )\n      setEndDate(\n        setDate(new Date(endDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toString(),\n      )\n    }\n\n    setIsAllDay(newVal)\n  }\n\n  const onChangeDate = (target: 'start' | 'end', newDateVal: Date) => {\n    const base = new Date(newDateVal)\n\n    const year = getYear(base)\n    const month = getMonth(base)\n    const date = getDate(base)\n\n    if (target === 'start') {\n      const updated = setDate(new Date(startDate), { year, month, date })\n\n      setStartDate(updated.toString())\n      dispatch(setTargetDate(updated.toString()))\n\n      if (isBefore(new Date(endDate), updated)) {\n        setEndDate(updated.toString())\n      }\n\n      setIsStartDateCalendarOpen(false)\n    } else {\n      const updated = setDate(new Date(endDate), { year, month, date })\n\n      setEndDate(updated.toString())\n\n      if (isBefore(updated, new Date(startDate))) {\n        dispatch(setTargetDate(updated.toString()))\n        setStartDate(updated.toString())\n      }\n\n      setIsEndDateCalendarOpen(false)\n    }\n  }\n\n  const onBlurInput = (target: 'start' | 'end', value: string) => {\n    const [valid, hours, minutes] = isValidTime(value)\n\n    if (target === 'start') {\n      if (valid) {\n        const newStartDate = setDate(new Date(startDate), {\n          hours,\n          minutes,\n        })\n\n        if (isAfter(newStartDate, new Date(endDate))) {\n          const newEndDate = setDate(new Date(endDate), {\n            hours,\n            minutes,\n          })\n          setEndDate(newEndDate.toString())\n        }\n\n        setStartDate(newStartDate.toString())\n      }\n\n      setShowStartDateInput(false)\n    } else {\n      if (valid) {\n        const newEndDate = setDate(new Date(endDate), { hours, minutes })\n\n        if (isBefore(newEndDate, new Date(startDate))) {\n          const newStartDate = setDate(new Date(startDate), {\n            hours,\n            minutes,\n          })\n          setStartDate(newStartDate.toString())\n        }\n\n        setEndDate(newEndDate.toString())\n      }\n\n      setShowEndDateInput(false)\n    }\n  }\n\n  const onSaveEvent = () => {\n    let eventGroupUid: string | null = null\n    let eventGroupDetail:\n      | {\n          groupUid: string\n          repeatType: EventRepeatType\n          repeatChanges: Record<string, unknown>\n        }\n      | null = null\n\n    if (repeatType > -1) {\n      eventGroupUid = uuid()\n      eventGroupDetail = {\n        groupUid: eventGroupUid,\n        repeatType: repeatType as EventRepeatType,\n        repeatChanges: {},\n      }\n    }\n\n    const newEvent = {\n      title: title.length > 0 ? title : '(No Title)',\n      description,\n      eventCreatorUid: currentUser.userUid,\n      eventGroupUid,\n      startDate,\n      endDate,\n      themeColor,\n      location,\n      invites: [] as string[],\n      isAllDay,\n      eventUid: uuid(),\n      createdAt: new Date().toString(),\n    }\n\n    dispatch(setIsCreateEventModalOpen(false))\n\n    dispatch(\n      addNewEventToDB({\n        userUid: currentUser.userUid,\n        event: newEvent,\n        eventGroup: eventGroupDetail,\n      }),\n    )\n  }\n\n  useEffect(() => {\n    setStartDate(createEventBasis.startDate.toString())\n    setEndDate(createEventBasis.endDate.toString())\n  }, [createEventBasis])\n\n  useEffect(() => {\n    const onMouseMove = (e: MouseEvent) => {\n      if (isMouseDown && createEventModalRef.current) {\n        e.preventDefault()\n\n        const deltaX = e.movementX\n        const deltaY = e.movementY\n\n        const rect = createEventModalRef.current.getBoundingClientRect()\n        createEventModalRef.current.style.left = rect.x + deltaX + 'px'\n        createEventModalRef.current.style.top = rect.y + deltaY + 'px'\n      }\n    }\n\n    document.addEventListener('mousemove', onMouseMove)\n\n    return () => {\n      document.removeEventListener('mousemove', onMouseMove)\n    }\n  }, [isMouseDown])\n\n  useEffect(() => {\n    if (currentUser) {\n      setThemeColor(currentUser.defaultThemeColor as ThemeColorType)\n    }\n  }, [currentUser])\n\n  useEffect(() => {\n    setStartDateInputValue(format(new Date(startDate), 'H:mm'))\n  }, [startDate])\n\n  useEffect(() => {\n    setEndDateInputValue(format(new Date(endDate), 'H:mm'))\n  }, [endDate])\n\n  useEffect(() => {\n    if (showStartDateInput && startDateInputRef.current) {\n      startDateInputRef.current.focus()\n    }\n\n    if (showEndDateInput && endDateInputRef.current) {\n      endDateInputRef.current.focus()\n    }\n  }, [showStartDateInput, showEndDateInput])\n\n  return (\n    <div\n      ref={createEventModalRef}\n      className=\"fixed z-40 flex flex-col bg-white rounded-md h-580px min-w-448 bottom-10 left-10 createEventModalBoxShadow\"\n    >\n      {/* Header */}\n      <div\n        className={`\n          flex items-center justify-between px-3 py-1 rounded-t-md bg-opacity-20 transition cursor-move\n          ${colorLookup[themeColor]}\n        `}\n        onMouseDown={() => setIsMouseDown(true)}\n        onMouseUp={() => setIsMouseDown(false)}\n      >\n        <IconButton\n          label=\"Dock to sidebar\"\n          size=\"small\"\n          tooltipLocation=\"bottom\"\n          imgComponent={\n            <MdDragHandle size=\"24px\" color=\"rgba(75, 85, 99)\" />\n          }\n          onClickHandler={() => {}}\n        />\n        <IconButton\n          label=\"Close\"\n          size=\"small\"\n          tooltipLocation=\"bottom\"\n          imgComponent={\n            <MdClose size=\"24px\" color=\"rgba(75, 85, 99)\" />\n          }\n          onClickHandler={() => dispatch(setIsCreateEventModalOpen(false))}\n        />\n      </div>\n\n      {/* Modal Content */}\n      <div className=\"pt-2\">\n        {/* Title Input */}\n        <div className=\"flex py-4 pl-16 pr-5\">\n          <input\n            type=\"text\"\n            value={title}\n            placeholder=\"Add title\"\n            onChange={e => setTitle(e.target.value)}\n            className=\"w-full text-2xl antialiased font-normal border-b outline-none\"\n          />\n        </div>\n\n        {/* Event Types */}\n        <div className=\"flex pl-16 pr-5 space-x-2\">\n          <div\n            className={`px-2 py-2 text-sm text-white ${colorLookup[themeColor]} bg-opacity-80 transition rounded-md cursor-default`}\n          >\n            Event\n          </div>\n          <div className=\"px-2 py-2 text-sm text-gray-600 cursor-not-allowed\">\n            Task\n          </div>\n          <div className=\"px-2 py-2 text-sm text-gray-600 cursor-not-allowed\">\n            Reminder\n          </div>\n        </div>\n\n        {/* Time Select */}\n        <div className=\"flex px-5 py-4\">\n          <div className=\"flex items-start justify-center\">\n            <MdAccessTime size=\"20px\" color=\"rgba(75, 85, 99)\" />\n          </div>\n          <div className=\"flex flex-col flex-auto pl-6 text-sm text-gray-500\">\n            {/* Date Selector */}\n            <div className=\"flex items-center justify-start\">\n              {/* Start Date */}\n              <div className=\"relative\">\n                <div\n                  className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                  onClick={() => setIsStartDateCalendarOpen(true)}\n                >\n                  {format(new Date(startDate), 'eeee, MMMM d')}\n                </div>\n                {isStartDateCalendarOpen && (\n                  <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                    <Calendar\n                      targetDate={startDate}\n                      onClickDate={newDate =>\n                        onChangeDate('start', newDate)\n                      }\n                      isModal\n                      onClose={() => setIsStartDateCalendarOpen(false)}\n                    />\n                  </div>\n                )}\n              </div>\n\n              {!isAllDay && (\n                <div>\n                  {showStartDateInput ? (\n                    <input\n                      ref={startDateInputRef}\n                      type=\"text\"\n                      value={startDateInputValue}\n                      className=\"w-20 text-center border rounded-md outline-none\"\n                      onChange={e =>\n                        setStartDateInputValue(e.target.value)\n                      }\n                      onBlur={e =>\n                        onBlurInput('start', e.target.value)\n                      }\n                    />\n                  ) : (\n                    <div\n                      className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                      onClick={() => setShowStartDateInput(true)}\n                    >\n                      {format(new Date(startDate), 'H:mm a')}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              <span className=\"px-1\">-</span>\n\n              {!isAllDay && (\n                <div>\n                  {showEndDateInput ? (\n                    <input\n                      ref={endDateInputRef}\n                      type=\"text\"\n                      value={endDateInputValue}\n                      className=\"w-20 text-center border rounded-md outline-none\"\n                      onChange={e =>\n                        setEndDateInputValue(e.target.value)\n                      }\n                      onBlur={e => onBlurInput('end', e.target.value)}\n                    />\n                  ) : (\n                    <div\n                      className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                      onClick={() => setShowEndDateInput(true)}\n                    >\n                      {format(new Date(endDate), 'H:mm a')}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* End Date */}\n              <div className=\"relative\">\n                <div\n                  className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                  onClick={() => setIsEndDateCalendarOpen(true)}\n                >\n                  {format(new Date(endDate), 'eeee, MMMM d')}\n                </div>\n                {isEndDateCalendarOpen && (\n                  <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                    <Calendar\n                      targetDate={endDate}\n                      onClickDate={newDate =>\n                        onChangeDate('end', newDate)\n                      }\n                      isModal\n                      onClose={() => setIsEndDateCalendarOpen(false)}\n                    />\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* All Day Selector */}\n            <div className=\"flex items-center mt-2 -ml-1\">\n              <div className=\"mr-1.5\">\n                <IconButton\n                  label=\"All day\"\n                  size=\"small\"\n                  tooltipLocation=\"bottom\"\n                  imgComponent={\n                    isAllDay ? (\n                      <MdCheckBox size=\"24px\" color=\"gray\" />\n                    ) : (\n                      <MdCheckBoxOutlineBlank\n                        size=\"24px\"\n                        color=\"gray\"\n                      />\n                    )\n                  }\n                  onClickHandler={() => onToggleAllDay(!isAllDay)}\n                />\n              </div>\n              <div>All day</div>\n            </div>\n\n            {/* Repeat Selector */}\n            <div className=\"relative mt-2\">\n              <button\n                className=\"flex px-2 py-1 -ml-1 transition rounded-md hover:bg-gray-100\"\n                onClick={() => setIsRepeatTypeDropdownOpen(true)}\n              >\n                <span className=\"mr-0.5\">\n                  {repeatTypeStringLookup[repeatType as -1 | EventRepeatType]}\n                </span>\n                <MdArrowDropDown\n                  size=\"18px\"\n                  color=\"rgba(75, 85, 99)\"\n                />\n              </button>\n              {isRepeatTypeDropdownOpen && (\n                <Dropdown\n                  data={repeatTypeDropdownData}\n                  onCloseDropdown={() =>\n                    setIsRepeatTypeDropdownOpen(false)\n                  }\n                />\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Location */}\n        <div className=\"flex items-center px-5 py-4 border-t\">\n          <div>\n            <MdLocationOn size=\"20px\" color=\"rgba(75, 85, 99)\" />\n          </div>\n          <div className=\"flex-auto pl-6\">\n            <input\n              type=\"text\"\n              value={location}\n              placeholder=\"Location\"\n              onChange={e => setLocation(e.target.value)}\n              className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none\"\n            />\n          </div>\n        </div>\n\n        {/* Description */}\n        <div className=\"flex px-5 py-4 border-t\">\n          <div>\n            <MdSubject size=\"20px\" color=\"rgba(75, 85, 99)\" />\n          </div>\n          <div className=\"flex-auto pl-6\">\n            <textarea\n              value={description}\n              placeholder=\"Description\"\n              onChange={e => setDescription(e.target.value)}\n              className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none resize-none\"\n            />\n          </div>\n        </div>\n\n        {/* User / Theme color */}\n        <div className=\"flex px-5 py-4 border-t border-b\">\n          <div>\n            <MdColorLens size=\"20px\" color=\"rgba(75, 85, 99)\" />\n          </div>\n          <div className=\"flex flex-auto pl-6 space-x-4 text-xs -mt-1.5\">\n            {Object.keys(ThemeColorTypes).map(key => {\n              // on ignore d'éventuelles clés numériques (si enum)\n              if (!isNaN(Number(key))) {\n                return null\n              }\n              const colorIndex = (ThemeColorTypes as any)[\n                key\n              ] as ThemeColorType\n              return (\n                <div\n                  key={key}\n                  className={`\n                    flex flex-col items-center px-1 py-1.5 transition rounded-md cursor-pointer\n                    hover:${colorLookup[colorIndex]}\n                    hover:bg-opacity-20\n                    ${\n                      themeColor === colorIndex\n                        ? `${colorLookup[colorIndex]} bg-opacity-20`\n                        : ''\n                    }\n                  `}\n                  onClick={() => setThemeColor(colorIndex)}\n                >\n                  <span className=\"mb-2 tracking-wide text-gray-500 text-xxs\">\n                    {key}\n                  </span>\n                  <div\n                    className={`\n                      w-4 h-4 rounded-full\n                      ${colorLookup[colorIndex]}\n                    `}\n                  />\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex items-center justify-end px-4 py-3\">\n        <button\n          className={`px-6 py-2 text-sm text-white bg-opacity-80 transition ${colorLookup[themeColor]} rounded-md`}\n          onClick={onSaveEvent}\n        >\n          Save\n        </button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2763, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/CalendarView/Timeline/TimelineBlock.tsx"],"sourcesContent":["'use client'\n\nimport { differenceInMinutes, format, set } from 'date-fns'\nimport { useRef } from 'react'\nimport {\n  colorLookup,\n  getClosestIndexForDayViewEvents,\n} from '../../../utils/helpers'\nimport { ThemeColorType } from '../../../utils/types'\n\nexport interface TimelineBlockEvent {\n  eventUid: string\n  title: string\n  startDate: string\n  endDate: string\n  themeColor: ThemeColorType\n  [key: string]: any\n}\n\ninterface TimelineBlockProps {\n  index: number\n  startColIndex?: number\n  baseZIndex?: number\n  event: TimelineBlockEvent\n  isMultiday?: boolean\n  onClickTimelineBlock: (payload: {\n    eventUid: string\n    top: number\n    left: number\n    height: number\n    width: number\n  }) => void\n}\n\nexport default function TimelineBlock({\n  index,\n  startColIndex = 0,\n  baseZIndex = 1,\n  event,\n  isMultiday = false,\n  onClickTimelineBlock,\n}: TimelineBlockProps) {\n  const timelineBlockRef = useRef<HTMLDivElement | null>(null)\n\n  const getBlockHeight = (evt: TimelineBlockEvent): number => {\n    if (!isMultiday) {\n      const basePixel = 11\n      const [startHour, startMinuteSeg] = getClosestIndexForDayViewEvents(\n        new Date(evt.startDate),\n      )\n      const [endHour, endMinuteSeg] = getClosestIndexForDayViewEvents(\n        new Date(evt.endDate),\n      )\n\n      if (startHour === endHour && startMinuteSeg === endMinuteSeg) {\n        return 22\n      }\n      const start = set(new Date(evt.startDate), {\n        hours: startHour,\n        minutes: startMinuteSeg,\n      })\n      const end = set(new Date(evt.endDate), {\n        hours: endHour,\n        minutes: endMinuteSeg,\n      })\n      const diffSlots = Math.floor(differenceInMinutes(end, start) / 15)\n      return diffSlots * basePixel + (diffSlots - 1)\n    } else {\n      return 22\n    }\n  }\n\n  const blockSubtitle = (blockHeight: number, multi: boolean) => {\n    if (!multi) {\n      if (blockHeight > 22) {\n        const startTime = format(new Date(event.startDate), 'K:mm aaa')\n        const endTime = format(new Date(event.endDate), 'K:mm aaa')\n\n        return (\n          <div className=\"pt-0.5\">\n            {`${startTime} - ${endTime}`}\n          </div>\n        )\n      } else {\n        return `, ${format(new Date(event.startDate), 'K aaa')}`\n      }\n    }\n    return null\n  }\n\n  const handleOnClickBlock = () => {\n    if (!timelineBlockRef.current) return\n    const { top, left, height, width } =\n      timelineBlockRef.current.getBoundingClientRect()\n\n    onClickTimelineBlock({\n      eventUid: event.eventUid,\n      top: top - 65,\n      left: left - 248,\n      height,\n      width,\n    })\n  }\n\n  const heightPx = getBlockHeight(event)\n\n  return (\n    <div\n      ref={timelineBlockRef}\n      style={{ height: `${heightPx}px` }}\n      className={`\n        relative\n        -top-px\n        rounded-md\n        text-xs\n        text-white\n        overflow-x-hidden\n        flex-1\n        px-2.5\n        pt-0.5\n        cursor-pointer\n        ${colorLookup[event.themeColor]}\n        ${`z-${1 + baseZIndex + index}`}\n        ${startColIndex > 0 ? 'border border-white' : ''}\n        ${!isMultiday && index > 0 ? 'border-l border-white -ml-2' : ''}\n      `}\n      onClick={handleOnClickBlock}\n    >\n      <div className=\"absolute min-w-0 font-normal truncate\">\n        {event.title}\n        {blockSubtitle(heightPx, isMultiday)}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAkCe,SAAS,cAAc,EACpC,KAAK,EACL,gBAAgB,CAAC,EACjB,aAAa,CAAC,EACd,KAAK,EACL,aAAa,KAAK,EAClB,oBAAoB,EACD;IACnB,MAAM,mBAAmB,IAAA,+MAAM,EAAwB;IAEvD,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,YAAY;YACf,MAAM,YAAY;YAClB,MAAM,CAAC,WAAW,eAAe,GAAG,IAAA,0JAA+B,EACjE,IAAI,KAAK,IAAI,SAAS;YAExB,MAAM,CAAC,SAAS,aAAa,GAAG,IAAA,0JAA+B,EAC7D,IAAI,KAAK,IAAI,OAAO;YAGtB,IAAI,cAAc,WAAW,mBAAmB,cAAc;gBAC5D,OAAO;YACT;YACA,MAAM,QAAQ,IAAA,yIAAG,EAAC,IAAI,KAAK,IAAI,SAAS,GAAG;gBACzC,OAAO;gBACP,SAAS;YACX;YACA,MAAM,MAAM,IAAA,yIAAG,EAAC,IAAI,KAAK,IAAI,OAAO,GAAG;gBACrC,OAAO;gBACP,SAAS;YACX;YACA,MAAM,YAAY,KAAK,KAAK,CAAC,IAAA,yKAAmB,EAAC,KAAK,SAAS;YAC/D,OAAO,YAAY,YAAY,CAAC,YAAY,CAAC;QAC/C,OAAO;YACL,OAAO;QACT;IACF;IAEA,MAAM,gBAAgB,CAAC,aAAqB;QAC1C,IAAI,CAAC,OAAO;YACV,IAAI,cAAc,IAAI;gBACpB,MAAM,YAAY,IAAA,+JAAM,EAAC,IAAI,KAAK,MAAM,SAAS,GAAG;gBACpD,MAAM,UAAU,IAAA,+JAAM,EAAC,IAAI,KAAK,MAAM,OAAO,GAAG;gBAEhD,qBACE,8OAAC;oBAAI,WAAU;8BACZ,GAAG,UAAU,GAAG,EAAE,SAAS;;;;;;YAGlC,OAAO;gBACL,OAAO,CAAC,EAAE,EAAE,IAAA,+JAAM,EAAC,IAAI,KAAK,MAAM,SAAS,GAAG,UAAU;YAC1D;QACF;QACA,OAAO;IACT;IAEA,MAAM,qBAAqB;QACzB,IAAI,CAAC,iBAAiB,OAAO,EAAE;QAC/B,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,GAChC,iBAAiB,OAAO,CAAC,qBAAqB;QAEhD,qBAAqB;YACnB,UAAU,MAAM,QAAQ;YACxB,KAAK,MAAM;YACX,MAAM,OAAO;YACb;YACA;QACF;IACF;IAEA,MAAM,WAAW,eAAe;IAEhC,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;YAAE,QAAQ,GAAG,SAAS,EAAE,CAAC;QAAC;QACjC,WAAW,CAAC;;;;;;;;;;;QAWV,EAAE,sIAAW,CAAC,MAAM,UAAU,CAAC,CAAC;QAChC,EAAE,CAAC,EAAE,EAAE,IAAI,aAAa,OAAO,CAAC;QAChC,EAAE,gBAAgB,IAAI,wBAAwB,GAAG;QACjD,EAAE,CAAC,cAAc,QAAQ,IAAI,gCAAgC,GAAG;MAClE,CAAC;QACD,SAAS;kBAET,cAAA,8OAAC;YAAI,WAAU;;gBACZ,MAAM,KAAK;gBACX,cAAc,UAAU;;;;;;;;;;;;AAIjC","debugId":null}},
    {"offset": {"line": 2876, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/CalendarView/Timeline/Timeline.tsx"],"sourcesContent":["'use client'\n\nimport { CalendarViewTypes, CalendarViewType } from '../../../utils/types'\nimport TimelineBlock from './TimelineBlock'\n\ninterface TimelineDataHourSegment {\n  events: any[]\n  startColIndex: number\n  colCount: number\n  baseZIndex: number\n}\n\ntype TimelineDay = Record<string, TimelineDataHourSegment>\n\ninterface WeekViewData {\n  days: Record<string, Record<string, TimelineDay>>\n}\n\ninterface TimelineProps {\n  calendarViewType: CalendarViewType\n  data?: WeekViewData | any\n  onClickTimelineBlock: (payload: any) => void\n}\n\nexport default function Timeline({ calendarViewType, data = {}, onClickTimelineBlock,}: TimelineProps) {\n  const weekViewTimeline = (weekData: WeekViewData) => {\n    const week = Object.keys(weekData.days).map((dayKey, i) => {\n      const dayHours = weekData.days[dayKey]\n      const dayContent = Object.keys(dayHours).map((h, hourIdx) => {\n        const minuteSegments = Object.keys(dayHours[h]).map(seg => {\n          const {  events,  startColIndex, baseZIndex,} = dayHours[h][seg]\n          return (\n            <div\n              key={`${dayKey}-${h}-${seg}`}\n              style={{\n                height: '11px',\n                paddingLeft: `calc(2rem * ${startColIndex})`,\n              }}\n              className=\"relative flex w-full pr-2 timelineSegmentSpacing\"\n            >\n              {events.map((e, idx) => (\n                <TimelineBlock\n                  key={idx}\n                  index={idx}\n                  baseZIndex={baseZIndex}\n                  startColIndex={startColIndex}\n                  event={e}\n                  onClickTimelineBlock={onClickTimelineBlock}\n                />\n              ))}\n            </div>\n          )\n        })\n\n        return (\n          <div\n            key={`${dayKey}-${hourIdx}`}\n            className=\"relative w-full h-12 border-b height-min\"\n          >\n            {minuteSegments}\n          </div>\n        )\n      })\n\n      return (\n        <div\n          key={`day-${i}`}\n          className=\"flex-1 w-1/7\"\n        >\n          {dayContent}\n        </div>\n      )\n    })\n    return [...week.slice(1), week[0]]\n  }\n\n  const isWeekView = calendarViewType === CalendarViewTypes.WEEK_VIEW\n\n  return (\n    <div\n      className={`\n        flex-auto w-full h-full border-l\n        ${isWeekView ? 'flex divide-x' : ''}\n      `}\n    >\n      {isWeekView && weekViewTimeline(data as WeekViewData)}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAwBe,SAAS,SAAS,EAAE,gBAAgB,EAAE,OAAO,CAAC,CAAC,EAAE,oBAAoB,EAAiB;IACnG,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ;YACnD,MAAM,WAAW,SAAS,IAAI,CAAC,OAAO;YACtC,MAAM,aAAa,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,GAAG;gBAC/C,MAAM,iBAAiB,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC,CAAA;oBAClD,MAAM,EAAG,MAAM,EAAG,aAAa,EAAE,UAAU,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC,IAAI;oBAChE,qBACE,8OAAC;wBAEC,OAAO;4BACL,QAAQ;4BACR,aAAa,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;wBAC9C;wBACA,WAAU;kCAET,OAAO,GAAG,CAAC,CAAC,GAAG,oBACd,8OAAC,0KAAa;gCAEZ,OAAO;gCACP,YAAY;gCACZ,eAAe;gCACf,OAAO;gCACP,sBAAsB;+BALjB;;;;;uBATJ,GAAG,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK;;;;;gBAmBlC;gBAEA,qBACE,8OAAC;oBAEC,WAAU;8BAET;mBAHI,GAAG,OAAO,CAAC,EAAE,SAAS;;;;;YAMjC;YAEA,qBACE,8OAAC;gBAEC,WAAU;0BAET;eAHI,CAAC,IAAI,EAAE,GAAG;;;;;QAMrB;QACA,OAAO;eAAI,KAAK,KAAK,CAAC;YAAI,IAAI,CAAC,EAAE;SAAC;IACpC;IAEA,MAAM,aAAa,qBAAqB,0IAAiB,CAAC,SAAS;IAEnE,qBACE,8OAAC;QACC,WAAW,CAAC;;QAEV,EAAE,aAAa,kBAAkB,GAAG;MACtC,CAAC;kBAEA,cAAc,iBAAiB;;;;;;AAGtC","debugId":null}},
    {"offset": {"line": 2957, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/CalendarView/Timeline/TimelineWrapper.tsx"],"sourcesContent":["import { eachDayOfInterval, format, setHours } from 'date-fns'\nimport { useEffect, useRef, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setSelectedEvent } from '../../../reducers/calendar/calendarSettingSlice'\nimport { getDateRange } from '../../../utils/helpers'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n} from '../../../utils/types'\nimport Timeline from './Timeline'\nimport TimelineHeader from './TimelineHeader'\n\ninterface CalendarSettingState {\n  targetDate: string\n  calendarViewType: CalendarViewType\n}\n\ninterface TimelineEvents {\n  wholeDayEvents?: any[]\n  [key: string]: any\n}\n\ninterface CalendarState {\n  dayViewEvents: TimelineEvents\n  weekViewEvents: TimelineEvents\n}\n\ninterface RootState {\n  calendarSetting: CalendarSettingState\n  calendar: CalendarState\n}\n\nexport default function TimelineWrapper() {\n  const timelineHeaderRef = useRef<HTMLDivElement | null>(null)\n  const timelineRef = useRef<HTMLDivElement | null>(null)\n  const dispatch = useDispatch()\n\n  const { targetDate, calendarViewType } = useSelector(\n    (state: RootState) => state.calendarSetting,\n  )\n  const { dayViewEvents, weekViewEvents } = useSelector(\n    (state: RootState) => state.calendar,\n  )\n\n  const [targetDateRange, setTargetDateRange] = useState<Date[]>([])\n  const [timelineMaxHeight, setTimelineMaxHeight] = useState(\n    'calc(100vh - (65px + 43px))',\n  )\n\n  const onClickTimelineBlock = (payload: any) => {\n    dispatch(setSelectedEvent(payload))\n  }\n\n  useEffect(() => {\n    const getDayList = (\n      target: string,\n      viewType: CalendarViewType,\n    ): Date[] => {\n      switch (viewType) {\n        case CalendarViewTypes.WEEK_VIEW: {\n          const [start, end] = getDateRange(viewType, target)\n          return eachDayOfInterval({ start, end })\n        }\n        default:\n          return []\n      }\n    }\n\n    if (targetDate) {\n      setTargetDateRange(getDayList(targetDate, calendarViewType))\n    }\n  }, [targetDate, calendarViewType])\n\n  useEffect(() => {\n    if (!timelineHeaderRef.current) return\n    const height = timelineHeaderRef.current.getBoundingClientRect().height\n    setTimelineMaxHeight(`calc(100vh - (65px + ${height}px))`)\n  }, [targetDate, dayViewEvents, weekViewEvents])\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {/* Timeline Header */}\n      <TimelineHeader\n        ref={timelineHeaderRef}\n        dates={targetDateRange}\n        \n        calendarViewType={calendarViewType}\n        onClickTimelineBlock={onClickTimelineBlock}\n      />\n\n      <div\n        ref={timelineRef}\n        style={{ maxHeight: timelineMaxHeight }}\n        className=\"flex flex-auto overflow-y-scroll\"\n      >\n\n        <div className=\"min-w-56\">\n          {Array(24)\n            .fill(null)\n            .map((_, i) => {\n              const date = setHours(new Date(), i)\n              return (\n                <div\n                  key={i}\n                  className=\"flex items-start justify-between h-12 text-gray-500 text-xxs\"\n                >\n                  <span className=\"relative text-right -top-2\">\n                    {i !== 0 ? format(date, 'h aa') : ''}\n                  </span>\n                  <div className=\"relative w-2 h-12 border-t -top-px\" />\n                </div>\n              )\n            })}\n        </div>\n        {calendarViewType === CalendarViewTypes.WEEK_VIEW &&\n          Object.keys(weekViewEvents || {}).length > 0 && (\n            <Timeline\n              calendarViewType={calendarViewType}\n              data={weekViewEvents}\n              onClickTimelineBlock={onClickTimelineBlock}\n            />\n          )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAIA;;;;;;;;;;;;;;;AAuBe,SAAS;IACtB,MAAM,oBAAoB,IAAA,+MAAM,EAAwB;IACxD,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAClD,MAAM,WAAW,IAAA,wKAAW;IAE5B,MAAM,EAAE,UAAU,EAAE,gBAAgB,EAAE,GAAG,IAAA,wKAAW,EAClD,CAAC,QAAqB,MAAM,eAAe;IAE7C,MAAM,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,IAAA,wKAAW,EACnD,CAAC,QAAqB,MAAM,QAAQ;IAGtC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAS,EAAE;IACjE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EACxD;IAGF,MAAM,uBAAuB,CAAC;QAC5B,SAAS,IAAA,uKAAgB,EAAC;IAC5B;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,CACjB,QACA;YAEA,OAAQ;gBACN,KAAK,0IAAiB,CAAC,SAAS;oBAAE;wBAChC,MAAM,CAAC,OAAO,IAAI,GAAG,IAAA,uIAAY,EAAC,UAAU;wBAC5C,OAAO,IAAA,qKAAiB,EAAC;4BAAE;4BAAO;wBAAI;oBACxC;gBACA;oBACE,OAAO,EAAE;YACb;QACF;QAEA,IAAI,YAAY;YACd,mBAAmB,WAAW,YAAY;QAC5C;IACF,GAAG;QAAC;QAAY;KAAiB;IAEjC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,kBAAkB,OAAO,EAAE;QAChC,MAAM,SAAS,kBAAkB,OAAO,CAAC,qBAAqB,GAAG,MAAM;QACvE,qBAAqB,CAAC,qBAAqB,EAAE,OAAO,IAAI,CAAC;IAC3D,GAAG;QAAC;QAAY;QAAe;KAAe;IAE9C,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,KAAK;gBACL,OAAO;gBAEP,kBAAkB;gBAClB,sBAAsB;;;;;;0BAGxB,8OAAC;gBACC,KAAK;gBACL,OAAO;oBAAE,WAAW;gBAAkB;gBACtC,WAAU;;kCAGV,8OAAC;wBAAI,WAAU;kCACZ,MAAM,IACJ,IAAI,CAAC,MACL,GAAG,CAAC,CAAC,GAAG;4BACP,MAAM,OAAO,IAAA,mJAAQ,EAAC,IAAI,QAAQ;4BAClC,qBACE,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAK,WAAU;kDACb,MAAM,IAAI,IAAA,+JAAM,EAAC,MAAM,UAAU;;;;;;kDAEpC,8OAAC;wCAAI,WAAU;;;;;;;+BANV;;;;;wBASX;;;;;;oBAEH,qBAAqB,0IAAiB,CAAC,SAAS,IAC/C,OAAO,IAAI,CAAC,kBAAkB,CAAC,GAAG,MAAM,GAAG,mBACzC,8OAAC,qKAAQ;wBACP,kBAAkB;wBAClB,MAAM;wBACN,sBAAsB;;;;;;;;;;;;;;;;;;AAMpC","debugId":null}},
    {"offset": {"line": 3107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/EventDetailModal.tsx"],"sourcesContent":["import { format, isSameDay } from 'date-fns'\nimport { useRef } from 'react'\nimport { MdClose, MdDelete, MdEdit, MdToday } from 'react-icons/md'\nimport { colorLookup } from '../../utils/helpers'\nimport IconButton from '../Common/Button/IconButton'\nimport { ThemeColorType } from '../../utils/types'\n\ninterface Event {\n  title: string\n  startDate: string\n  endDate: string\n  themeColor: ThemeColorType\n}\n\n\ninterface EventCreator {\n  displayName: string\n}\n\ninterface SelectedEvent {\n  event: Event\n  eventCreator: EventCreator\n  top: number\n  left: number\n}\n\ninterface EventDetailModalProps {\n  selectedEvent: SelectedEvent\n  onCloseModal: () => void\n}\n\n/*\n  When a user clicks on an event, the eventUid is passed to the page component\n  After receiving the selected EventUid, it looks for the event in the eventDB using the uid,\n  and then, the event is passed to the event-detail modal\n*/\nexport default function EventDetailModal({\n  selectedEvent,\n  onCloseModal,\n}: EventDetailModalProps) {\n  console.log('Event Detail: ', selectedEvent)\n  const eventDetailModalRef = useRef<HTMLDivElement | null>(null)\n\n  const parseEventDate = (startDate: string, endDate: string): string => {\n    const start = new Date(startDate)\n    const end = new Date(endDate)\n\n    if (isSameDay(start, end)) {\n      return `${format(start, 'eeee, MMMM d ⋅ h:mmaaa')} – ${format(\n        end,\n        'h:mmaaa',\n      )}`\n    } else {\n      return `${format(start, 'MMMM d, yyyy h:mmaaa')} – ${format(\n        end,\n        'MMMM d, yyyy h:mmaaa',\n      )}`\n    }\n  }\n\n  const { event, eventCreator } = selectedEvent\n\n  return (\n    <div\n      ref={eventDetailModalRef}\n      style={{\n        top: selectedEvent.top,\n        left: selectedEvent.left,\n      }}\n      className=\"absolute z-50 py-2 transition bg-white rounded-md min-w-448 eventDetailModalBoxShadow\"\n    >\n      <div className=\"flex items-center justify-end px-1.5\">\n        <IconButton\n  size=\"small\"\n  label=\"Edit\"\n  tooltipLocation=\"top\"\n  imgComponent={<MdEdit size=\"20px\" color=\"gray\" />}\n  onClickHandler={() => {}}\n/>\n<IconButton\n  size=\"small\"\n  label=\"Delete\"\n  tooltipLocation=\"top\"\n  imgComponent={<MdDelete size=\"20px\" color=\"gray\" />}\n  onClickHandler={() => {}}\n/>\n<IconButton\n  size=\"small\"\n  label=\"Close\"\n  tooltipLocation=\"top\"\n  imgComponent={<MdClose size=\"20px\" color=\"gray\" />}\n  onClickHandler={onCloseModal}\n/>\n\n      </div>\n      <div>\n        <div className=\"flex px-5\">\n          <div className=\"flex items-start justify-center\">\n            {/* Theme Color Rect */}\n            <div\n              className={`mt-0.5 h-3.5 w-3.5 rounded-sm ${\n                colorLookup[event.themeColor]\n              }`}\n            />\n          </div>\n          <div className=\"flex flex-col items-start justify-start flex-auto pl-6\">\n            <span className=\"text-xl leading-none\">\n              {event.title}\n            </span>\n            <span className=\"pt-2 text-xs font-normal text-gray-500\">\n              {parseEventDate(event.startDate, event.endDate)}\n            </span>\n          </div>\n        </div>\n        <div className=\"flex px-4 pb-2 mt-4\">\n          <div className=\"pl-0.5 flex items-center justify-center\">\n            <MdToday size=\"20px\" color=\"gray\" />\n          </div>\n          <div className=\"flex items-start justify-start flex-auto pl-5 text-xs text-gray-500\">\n            {eventCreator.displayName}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAgCe,SAAS,iBAAiB,EACvC,aAAa,EACb,YAAY,EACU;IACtB,QAAQ,GAAG,CAAC,kBAAkB;IAC9B,MAAM,sBAAsB,IAAA,+MAAM,EAAwB;IAE1D,MAAM,iBAAiB,CAAC,WAAmB;QACzC,MAAM,QAAQ,IAAI,KAAK;QACvB,MAAM,MAAM,IAAI,KAAK;QAErB,IAAI,IAAA,qJAAS,EAAC,OAAO,MAAM;YACzB,OAAO,GAAG,IAAA,+JAAM,EAAC,OAAO,0BAA0B,GAAG,EAAE,IAAA,+JAAM,EAC3D,KACA,YACC;QACL,OAAO;YACL,OAAO,GAAG,IAAA,+JAAM,EAAC,OAAO,wBAAwB,GAAG,EAAE,IAAA,+JAAM,EACzD,KACA,yBACC;QACL;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG;IAEhC,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;YACL,KAAK,cAAc,GAAG;YACtB,MAAM,cAAc,IAAI;QAC1B;QACA,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,+JAAU;wBACjB,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,wJAAM;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACxC,gBAAgB,KAAO;;;;;;kCAEzB,8OAAC,+JAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,0JAAQ;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBAC1C,gBAAgB,KAAO;;;;;;kCAEzB,8OAAC,+JAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,yJAAO;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACzC,gBAAgB;;;;;;;;;;;;0BAIZ,8OAAC;;kCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAEb,cAAA,8OAAC;oCACC,WAAW,CAAC,8BAA8B,EACxC,sIAAW,CAAC,MAAM,UAAU,CAAC,EAC7B;;;;;;;;;;;0CAGN,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,MAAM,KAAK;;;;;;kDAEd,8OAAC;wCAAK,WAAU;kDACb,eAAe,MAAM,SAAS,EAAE,MAAM,OAAO;;;;;;;;;;;;;;;;;;kCAIpD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,yJAAO;oCAAC,MAAK;oCAAO,OAAM;;;;;;;;;;;0CAE7B,8OAAC;gCAAI,WAAU;0CACZ,aAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}},
    {"offset": {"line": 3307, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/GoogleAgenda.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport PanelLeft from './Panel/PanelLeft'\nimport CreateEventModal from '../Modal/CreateEventModal'\nimport TimelineWrapper from '../CalendarView/Timeline/TimelineWrapper'\nimport EventDetailModal from '../Modal/EventDetailModal'\nimport { CalendarViewTypes, CalendarViewType,} from '../../utils/types'\nimport { fetchEventsForCalendarType} from '../../reducers/calendar/calendarSlice'\nimport { setViewType, setSelectedEvent,} from '../../reducers/calendar/calendarSettingSlice'\n\ninterface SelectedEventState {\n  eventUid: string\n  top: number\n  left: number\n  height: number\n  width: number\n}\n\ninterface CalendarSettingState {\n  isCreateEventModalOpen: boolean\n  targetDate: string\n  calendarViewType: CalendarViewType\n  selectedEvent: SelectedEventState\n}\n\ninterface RootState {\n  calendarSetting: CalendarSettingState\n  user: { userUid: string }\n  db: {\n    userDB: Record<string, any>\n    eventDB: Record<string, any>\n    userEventDB: Record<string, string[]>\n    invitedDB: Record<string, any[]>\n    eventGroupDB: Record<string, any>\n     eventInviteDB: Record<string, any> \n  }\n}\n\nexport default function GoogleAgenda() {\n  const dispatch = useDispatch()\n\n  const {\n    isCreateEventModalOpen,\n    targetDate,\n    calendarViewType,\n    selectedEvent,\n  } = useSelector((state: RootState) => state.calendarSetting)\n\n  const user = useSelector((state: RootState) => state.user)\n    const { userDB, eventDB, userEventDB, invitedDB, eventGroupDB, eventInviteDB } =\n    useSelector((state: RootState) => state.db)\n\n\n  const [isEditModalOpen, setIsEditModalOpen] = useState<boolean>(false)\n  useEffect(() => {\n    if (calendarViewType !== CalendarViewTypes.WEEK_VIEW) {\n      dispatch(setViewType(CalendarViewTypes.WEEK_VIEW))\n    }\n  }, [calendarViewType, dispatch])\n  useEffect(() => {\n    if (targetDate && user.userUid) {\n      dispatch(\n        fetchEventsForCalendarType({\n          userUid: user.userUid,\n          calendarViewType: CalendarViewTypes.WEEK_VIEW,\n          targetDate,\n          db: {\n            userDB,          // <-- ajouter\n            userEventDB,\n            eventDB,\n            invitedDB,\n            eventGroupDB,\n            eventInviteDB,   // <-- ajouter\n          },\n        }),\n      )\n    }\n  }, [\n    targetDate,\n    user.userUid,\n    userEventDB,\n    eventDB,\n    invitedDB,\n    eventGroupDB,\n    userDB,\n    eventInviteDB,\n    dispatch,\n  ])\n\n\n  const onCloseEventDetailModal = () => {\n    dispatch(\n      setSelectedEvent({\n        ...selectedEvent,\n        eventUid: '',\n      }),\n    )\n    setIsEditModalOpen(false)\n  }\n\n  return (\n    <div className=\"relative flex flex-col w-screen max-w-[1500px] mx-auto\">\n      <div className=\"flex flex-1\">\n        <PanelLeft />\n        <div className=\"relative flex-auto flex flex-col pr-3\">\n          {/* Vue semaine uniquement */}\n          <TimelineWrapper />\n        </div>\n      </div>\n\n      {/* Modale de création */}\n      {isCreateEventModalOpen && <CreateEventModal />}\n\n      {/* Modale de détail */}\n      {selectedEvent.eventUid.length > 0 &&\n        selectedEvent.eventUid in eventDB && (\n          <>\n            <div className=\"absolute top-0 left-0 w-full h-full z-1\" />\n            <EventDetailModal\n              selectedEvent={{\n                ...selectedEvent,\n                event: eventDB[selectedEvent.eventUid],\n                eventCreator:\n                  userDB[\n                    eventDB[selectedEvent.eventUid].eventCreatorUid\n                  ],\n              }}\n              onCloseModal={onCloseEventDetailModal}\n            />\n          </>\n        )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAwCe,SAAS;IACtB,MAAM,WAAW,IAAA,wKAAW;IAE5B,MAAM,EACJ,sBAAsB,EACtB,UAAU,EACV,gBAAgB,EAChB,aAAa,EACd,GAAG,IAAA,wKAAW,EAAC,CAAC,QAAqB,MAAM,eAAe;IAE3D,MAAM,OAAO,IAAA,wKAAW,EAAC,CAAC,QAAqB,MAAM,IAAI;IACvD,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,aAAa,EAAE,GAC9E,IAAA,wKAAW,EAAC,CAAC,QAAqB,MAAM,EAAE;IAG5C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAU;IAChE,IAAA,kNAAS,EAAC;QACR,IAAI,qBAAqB,0IAAiB,CAAC,SAAS,EAAE;YACpD,SAAS,IAAA,kKAAW,EAAC,0IAAiB,CAAC,SAAS;QAClD;IACF,GAAG;QAAC;QAAkB;KAAS;IAC/B,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc,KAAK,OAAO,EAAE;YAC9B,SACE,IAAA,0KAA0B,EAAC;gBACzB,SAAS,KAAK,OAAO;gBACrB,kBAAkB,0IAAiB,CAAC,SAAS;gBAC7C;gBACA,IAAI;oBACF;oBACA;oBACA;oBACA;oBACA;oBACA;gBACF;YACF;QAEJ;IACF,GAAG;QACD;QACA,KAAK,OAAO;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAGD,MAAM,0BAA0B;QAC9B,SACE,IAAA,uKAAgB,EAAC;YACf,GAAG,aAAa;YAChB,UAAU;QACZ;QAEF,mBAAmB;IACrB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mKAAS;;;;;kCACV,8OAAC;wBAAI,WAAU;kCAEb,cAAA,8OAAC,4KAAe;;;;;;;;;;;;;;;;YAKnB,wCAA0B,8OAAC,0JAAgB;;;;;YAG3C,cAAc,QAAQ,CAAC,MAAM,GAAG,KAC/B,cAAc,QAAQ,IAAI,yBACxB;;kCACE,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC,0JAAgB;wBACf,eAAe;4BACb,GAAG,aAAa;4BAChB,OAAO,OAAO,CAAC,cAAc,QAAQ,CAAC;4BACtC,cACE,MAAM,CACJ,OAAO,CAAC,cAAc,QAAQ,CAAC,CAAC,eAAe,CAChD;wBACL;wBACA,cAAc;;;;;;;;;;;;;;AAM5B","debugId":null}},
    {"offset": {"line": 3448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Provider/CalendarProvider.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Provider } from 'react-redux'\r\nimport { store } from '@/app/config/store'\r\nimport GoogleAgenda from '../GoogleAgenda'\r\n\r\nexport default function CalendarProvider() {\r\n  return (\r\n    <Provider store={store}>\r\n      <GoogleAgenda />\r\n    </Provider>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,qBACE,8OAAC,qKAAQ;QAAC,OAAO,+HAAK;kBACpB,cAAA,8OAAC,6JAAY;;;;;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 3479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport RollingSlider from \"./components/Slider/RollingSlider\";\r\nimport { useData } from \"@/app/contexts/data\";\r\nimport { useUser, SignedOut, SignInButton } from \"@clerk/nextjs\";\r\nimport CalendarProvider from \"./components/GoogleAgenda/Provider/CalendarProvider\";\r\n\r\nexport default function Home() {\r\n  const { isLoaded, user } = useUser();\r\n  const data = useData();\r\n  if (!isLoaded) {\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen w-full\">\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent\"></div>\r\n        <p className=\"mt-4 text-lg font-medium text-gray-600\">Chargement en cours…</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  function normalizeRoles(role: unknown): string[] {\r\n    if (Array.isArray(role)) return role as string[];\r\n    if (typeof role === \"string\") return [role];\r\n    return [];\r\n  }\r\n  const roles = normalizeRoles(user?.publicMetadata?.role);\r\n  const filteredCategories = data.categories.filter(category => (category.allowedRoles ?? []).some(r => roles.includes(r)));\r\n  const uniqueCategories = Array.from( new Map(filteredCategories.map(cat => [cat.id ?? cat.name, cat])).values());\r\n  return (\r\n    <main className=\"flex flex-col w-full text-xl sm:pt-[5vh]\">\r\n      <CalendarProvider/>\r\n      {uniqueCategories.length > 0 && (\r\n        <RollingSlider categories={uniqueCategories} />\r\n      )}\r\n      <SignedOut>\r\n        <SignInButton>\r\n          <button className=\"absolute top-[48%] left-[38%] p-4\">Se connecter</button>\r\n        </SignInButton>\r\n      </SignedOut>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAA,uKAAO;IAClC,MAAM,OAAO,IAAA,mIAAO;IACpB,IAAI,CAAC,UAAU;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;IAI9D;IACE,SAAS,eAAe,IAAa;QACnC,IAAI,MAAM,OAAO,CAAC,OAAO,OAAO;QAChC,IAAI,OAAO,SAAS,UAAU,OAAO;YAAC;SAAK;QAC3C,OAAO,EAAE;IACX;IACA,MAAM,QAAQ,eAAe,MAAM,gBAAgB;IACnD,MAAM,qBAAqB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAA,WAAY,CAAC,SAAS,YAAY,IAAI,EAAE,EAAE,IAAI,CAAC,CAAA,IAAK,MAAM,QAAQ,CAAC;IACrH,MAAM,mBAAmB,MAAM,IAAI,CAAE,IAAI,IAAI,mBAAmB,GAAG,CAAC,CAAA,MAAO;YAAC,IAAI,EAAE,IAAI,IAAI,IAAI;YAAE;SAAI,GAAG,MAAM;IAC7G,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,6KAAgB;;;;;YAChB,iBAAiB,MAAM,GAAG,mBACzB,8OAAC,wJAAa;gBAAC,YAAY;;;;;;0BAE7B,8OAAC,sLAAS;0BACR,cAAA,8OAAC,2LAAY;8BACX,cAAA,8OAAC;wBAAO,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAKhE","debugId":null}}]
}