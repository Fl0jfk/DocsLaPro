{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/qrcreator/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport QRCode from 'qrcode';\r\n\r\nexport default function QRCreator() {\r\n  const [url, setUrl] = useState(\"https://laprovidence-nicolasbarre.fr/\");\r\n  const [logo, setLogo] = useState<string | null>(null);\r\n  const [fillColor, setFillColor] = useState(\"#000000\");\r\n  const [backColor, setBackColor] = useState(\"#ffffff\"); \r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n  const generateQRCodeWithLogo = () => {\r\n    if (canvasRef.current) {\r\n      const canvas = canvasRef.current;\r\n      const ctx = canvas.getContext(\"2d\");\r\n      if (ctx) {\r\n        QRCode.toCanvas(\r\n          canvas, \r\n          url, \r\n          { width: 256, errorCorrectionLevel: 'H', color: { dark: fillColor, light: backColor }, margin: 4 },\r\n          (error) => {\r\n            if (error) console.error(error);\r\n            if (logo) {\r\n              const logoImg = new Image();\r\n              logoImg.src = logo;\r\n              logoImg.onload = () => {\r\n                const qrSize = canvas.width;\r\n                const logoSize = qrSize / 4;\r\n                const x = (qrSize - logoSize) / 2;\r\n                const y = (qrSize - logoSize) / 2;\r\n                ctx.drawImage(logoImg, x, y, logoSize, logoSize);\r\n              };\r\n            }\r\n          }\r\n        );\r\n      }\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    generateQRCodeWithLogo();\r\n  }, [url, logo, fillColor, backColor]);\r\n  const handleUrlChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setUrl(e.target.value);\r\n  };\r\n  const handleLogoUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files ? e.target.files[0] : null;\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setLogo(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(file); \r\n    }\r\n  };\r\n  const handleDownloadQRCode = () => {\r\n    if (canvasRef.current) {\r\n      const canvas = canvasRef.current;\r\n      const dataUrl = canvas.toDataURL(\"image/png\"); \r\n      const link = document.createElement(\"a\");\r\n      link.href = dataUrl;\r\n      link.download = \"qr_code_avec_logo.png\";\r\n      link.click();\r\n    }\r\n  };\r\n  return (\r\n    <main className='sm:pt-[13vh] p-4 flex flex-col gap-4 max-w-[1000px] mx-auto'>\r\n      <h1 className='text-4xl'>Création de QR Code</h1>\r\n      <div className=\"mt-4\">\r\n        <label htmlFor=\"url\" className=\"block text-lg\">Adresse URL :</label>\r\n        <input type=\"text\" id=\"url\"  value={url}  onChange={handleUrlChange} className=\"mt-2 p-2 border border-gray-300 rounded-xl w-full\" placeholder=\"Entrez l'adresse URL\"/>\r\n      </div>\r\n      <div className=\"mb-4\">\r\n        <label htmlFor=\"logo\" className=\"block text-lg\">Télécharger un logo :</label>\r\n        <input type=\"file\" id=\"logo\" onChange={handleLogoUpload} className=\"mt-2 p-2 border border-gray-300 rounded-xl w-full\" accept=\"image/*\"/>\r\n      </div>\r\n      <div className=\"flex items-center gap-4\">\r\n        <label htmlFor=\"fillColor\" className=\"block text-lg\">Couleur du QR Code :</label>\r\n        <input type=\"color\" id=\"fillColor\" value={fillColor} onChange={(e) => setFillColor(e.target.value)} className=\"p-2 border border-gray-300 rounded-xl\" style={{ backgroundColor: fillColor }}/>\r\n      </div>\r\n      <div className=\"flex items-center gap-4\">\r\n        <label htmlFor=\"backColor\" className=\"block text-lg\">Couleur de fond :</label>\r\n        <input type=\"color\" id=\"backColor\" value={backColor} onChange={(e) => setBackColor(e.target.value)} style={{ backgroundColor: backColor }} className=\"p-2 border border-gray-300 rounded-xl\"/>\r\n      </div>\r\n      <canvas ref={canvasRef} width={256} height={256} className='self-center'/>\r\n      <button onClick={handleDownloadQRCode} className=\"mt-4 bg-green-500 text-white p-2 rounded-xl\">Télécharger le QR code</button>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}