{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slide.tsx"],"sourcesContent":["import Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\ntype SliderProps = {\r\n  name: string;\r\n  img: string;\r\n  link: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport default function Slide({ name, img, link, external }: SliderProps) {\r\n  if (external) {\r\n    return (\r\n      <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" className='bg-white select-none flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n        {name && \r\n          <>\r\n            <div className='flex flex-col gap-1'>\r\n              <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n            </div>      \r\n            {img && \r\n              <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n            }\r\n          </>    \r\n        }  \r\n      </a>\r\n    );\r\n  }\r\n  return (\r\n    <Link href={link} className='select-none bg-white flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n      {name && \r\n        <>\r\n          <div className='flex flex-col gap-1'>\r\n            <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n          </div>      \r\n          {img && \r\n            <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n          }\r\n        </>    \r\n      }  \r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AASe,SAAS,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAe;IACtE,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAE,MAAM;YAAM,QAAO;YAAS,KAAI;YAAsB,WAAU;sBAChE,sBACC;;kCACE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAwC;;;;;;;;;;;oBAEtD,qBACC,8OAAC,wIAAK;wBAAC,KAAK;wBAAK,IAAI;wBAAC,KAAK;wBAAM,OAAO;4BAAC,WAAU;wBAAS;wBAAG,QAAQ;wBAAC,WAAU;wBAA8C,OAAM;;;;;;;;;;;;;IAMlJ;IACA,qBACE,8OAAC,uKAAI;QAAC,MAAM;QAAM,WAAU;kBACzB,sBACC;;8BACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;gBAEtD,qBACC,8OAAC,wIAAK;oBAAC,KAAK;oBAAK,IAAI;oBAAC,KAAK;oBAAM,OAAO;wBAAC,WAAU;oBAAS;oBAAG,QAAQ;oBAAC,WAAU;oBAA8C,OAAM;;;;;;;;;;;;;AAMlJ","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport Slide from \"./Slide\";\r\n\r\nexport type Category = {\r\n  id: number;\r\n  name: string;\r\n  link: string;\r\n  img: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport type SliderProps = { items: Category[]};\r\n\r\nexport default function Slider({ items }: SliderProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startX, setStartX] = useState(0);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (containerRef.current) {\r\n      setIsDragging(true);\r\n      setStartX(e.pageX);\r\n      setScrollLeft(containerRef.current.scrollLeft);\r\n    }\r\n  };\r\n  const handleMouseUp = () => { setIsDragging(false); };\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !containerRef.current) return;\r\n    const x = e.pageX;\r\n    const diffX = x - startX;\r\n    const newScrollLeft = scrollLeft - diffX;\r\n    containerRef.current.scrollLeft = newScrollLeft;\r\n  };\r\n  return (\r\n    <div ref={containerRef} className=\"xl:grid-cols-4 lg:grid-cols-3 grid md:grid-cols-3 sm:flex sm:items-center sm:overflow-x-scroll sm:snap-x sm:snap-mandatory sm:cursor-grab select-none sm:h-[550px]\" onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove}>\r\n      {items.map((category) => (\r\n        <Slide name={category.name} key={category.id} link={category.link} img={category.img} external={category.external}/>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAee,SAAS,OAAO,EAAE,KAAK,EAAe;IACnD,MAAM,eAAe,IAAA,+MAAM,EAAwB;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,kBAAkB,CAAC;QACvB,IAAI,aAAa,OAAO,EAAE;YACxB,cAAc;YACd,UAAU,EAAE,KAAK;YACjB,cAAc,aAAa,OAAO,CAAC,UAAU;QAC/C;IACF;IACA,MAAM,gBAAgB;QAAQ,cAAc;IAAQ;IACpD,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,cAAc,CAAC,aAAa,OAAO,EAAE;QAC1C,MAAM,IAAI,EAAE,KAAK;QACjB,MAAM,QAAQ,IAAI;QAClB,MAAM,gBAAgB,aAAa;QACnC,aAAa,OAAO,CAAC,UAAU,GAAG;IACpC;IACA,qBACE,8OAAC;QAAI,KAAK;QAAc,WAAU;QAAqK,aAAa;QAAiB,WAAW;QAAe,cAAc;QAAe,aAAa;kBACtS,MAAM,GAAG,CAAC,CAAC,yBACV,8OAAC,gJAAK;gBAAC,MAAM,SAAS,IAAI;gBAAoB,MAAM,SAAS,IAAI;gBAAE,KAAK,SAAS,GAAG;gBAAE,UAAU,SAAS,QAAQ;eAAhF,SAAS,EAAE;;;;;;;;;;AAIpD","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/RollingSlider.tsx"],"sourcesContent":["import Slider, { Category } from \"./Slider\";\r\n\r\ntype RollingSliderProps = { categories: Category[]};\r\n\r\nexport default function RollingSlider({ categories }: RollingSliderProps) {\r\n  if (!categories || categories.length === 0) {\r\n    return <div className=\"text-center py-4\">Aucune catégorie disponible pour votre rôle</div>;\r\n  }\r\n  return (\r\n    <section id=\"slideshow\" className=\"w-full self-center mx-auto max-w-[1500px]\">\r\n      <Slider items={categories} />\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAIe,SAAS,cAAc,EAAE,UAAU,EAAsB;IACtE,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QAC1C,qBAAO,8OAAC;YAAI,WAAU;sBAAmB;;;;;;IAC3C;IACA,qBACE,8OAAC;QAAQ,IAAG;QAAY,WAAU;kBAChC,cAAA,8OAAC,iJAAM;YAAC,OAAO;;;;;;;;;;;AAGrB","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Button/IconButton.tsx"],"sourcesContent":["import { ReactNode, MouseEventHandler } from 'react'\n\ntype IconButtonSize = 'xs' | 'small' | 'medium'\ntype IconButtonInk = 'default' | 'black'\ntype TooltipLocation = 'left' | 'bottom' | 'top' | 'none'\n\nconst wrapperSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-9', width: 'w-9' },\n  medium: { height: 'h-10', width: 'w-10' },\n}\n\nconst inkSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-10', width: 'w-10' },\n  medium: { height: 'h-11', width: 'w-11' },\n}\n\nconst inkHoverColorLookup: Record<IconButtonInk, string> = {\n  default: 'hover:bg-gray-400 group-hover:bg-opacity-10',\n  black: 'hover:bg-black group-hover:bg-opacity-10',\n}\n\ninterface IconButtonProps {\n  size: IconButtonSize\n  ink?: IconButtonInk\n  label: string\n  tooltipLocation: TooltipLocation\n  imgComponent: ReactNode\n  onClickHandler: MouseEventHandler<HTMLDivElement>\n}\n\nexport default function IconButton({\n  size,\n  ink = 'default',\n  label,\n  tooltipLocation,\n  imgComponent,\n  onClickHandler,\n}: IconButtonProps) {\n  return (\n    <div\n      className={`\n        relative\n        cursor-pointer\n        flex\n        justify-center\n        items-center\n        bg-transparent\n        group\n        ${wrapperSizeLookup[size].height}\n        ${wrapperSizeLookup[size].width}\n      `}\n      onClick={onClickHandler}\n    >\n      {imgComponent}\n      <div\n        className={`\n          absolute\n          rounded-full\n          top-1/2\n          left-1/2\n          transform\n          -translate-x-1/2\n          -translate-y-1/2\n          transition-all\n          ease-in-out\n          duration-300\n          ${inkHoverColorLookup[ink]}\n          z-10\n          ${inkSizeLookup[size].height}\n          ${inkSizeLookup[size].width}\n        `}\n      >\n        {tooltipLocation === 'left' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              top-1/2\n              right-14\n              transform\n              -translate-y-1/2\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'bottom' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              -bottom-8\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'top' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              bottom-full\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAMA,MAAM,oBAA+E;IACnF,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAO,OAAO;IAAM;IACrC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,gBAA2E;IAC/E,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAQ,OAAO;IAAO;IACvC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,sBAAqD;IACzD,SAAS;IACT,OAAO;AACT;AAWe,SAAS,WAAW,EACjC,IAAI,EACJ,MAAM,SAAS,EACf,KAAK,EACL,eAAe,EACf,YAAY,EACZ,cAAc,EACE;IAChB,qBACE,8OAAC;QACC,WAAW,CAAC;;;;;;;;QAQV,EAAE,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC;QACjC,EAAE,iBAAiB,CAAC,KAAK,CAAC,KAAK,CAAC;MAClC,CAAC;QACD,SAAS;;YAER;0BACD,8OAAC;gBACC,WAAW,CAAC;;;;;;;;;;;UAWV,EAAE,mBAAmB,CAAC,IAAI,CAAC;;UAE3B,EAAE,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC;UAC7B,EAAE,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC;QAC9B,CAAC;;oBAEA,oBAAoB,wBACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,0BACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,uBACnB,8OAAC;wBACC,WAAW,CAAC;;;;;;;;;;;;;YAaZ,CAAC;kCAED,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOf","debugId":null}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Calendar/Calendar.tsx"],"sourcesContent":["'use client'\n\nimport {\n  addMonths,\n  addWeeks,\n  eachDayOfInterval,\n  endOfMonth,\n  endOfWeek,\n  format,\n  getDate,\n  getMonth,\n  getYear,\n  isSameDay,\n  isSameWeek,\n  setMonth,\n  startOfMonth,\n  startOfWeek,\n  subMonths,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useEffect, useRef, useState } from 'react'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\nimport IconButton from '../Button/IconButton'\n\ninterface CalendarProps {\n  targetDate: string | Date\n  onClickDate: (date: Date) => void\n  isModal?: boolean\n  onClose?: () => void\n}\n\nexport default function Calendar({\n  targetDate,\n  onClickDate,\n  isModal = false,\n  onClose = () => {},\n}: CalendarProps) {\n  const today = new Date()\n  const calendarRef = useRef<HTMLDivElement | null>(null)\n  const [calendarDate, setCalendarDate] = useState<Date>(new Date())\n\n  useEffect(() => {\n    const target = new Date(targetDate)\n    const diffMonths =\n      getMonth(target) - getMonth(calendarDate) +\n      12 * (target.getFullYear() - calendarDate.getFullYear())\n    if (diffMonths !== 0) {\n      setCalendarDate(current =>\n        diffMonths > 0\n          ? addMonths(current, diffMonths)\n          : subMonths(current, Math.abs(diffMonths)),\n      )\n    }\n  }, [targetDate])\n\n  useEffect(() => {\n    if (!isModal) return\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (calendarRef.current) {\n        const outsideClick = !calendarRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onClose()\n        }\n      }\n    }\n    document.addEventListener('click', checkOutsideClick)\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [isModal, onClose])\n\n  const onClickMoveMonth = (dir: 'prev' | 'next') => {\n    const newDate = new Date(calendarDate)\n    if (dir === 'prev') {\n      setCalendarDate(subMonths(newDate, 1))\n    } else {\n      setCalendarDate(addMonths(newDate, 1))\n    }\n  }\n\n  const isEqualDate = (a: Date | string, b: Date | string): boolean => {\n    const dateA = new Date(a)\n    const dateB = new Date(b)\n    return isSameDay(dateA, dateB)\n  }\n\n  const gridHeader = ['L', 'M', 'M', 'J', 'V', 'S', 'D'].map((d, i) => (\n    <div\n      key={i}\n      className=\"flex items-center justify-center h-6 text-gray-500 bg-white\"\n    >\n      {d}\n    </div>\n  ))\n\n  const gridDates = (startDate: Date | string = Date()) => {\n    const target = new Date(startDate)\n    const targetMonth = getMonth(target)\n    const targetYear = getYear(target)\n\n    const month = setMonth(\n      new Date(targetYear, 0, 1),\n      targetMonth,\n    )\n\n    const monthRangeStart = startOfWeek(startOfMonth(month), {\n      weekStartsOn: 1,\n    })\n    const monthRangeEndRaw = endOfWeek(endOfMonth(month), {\n      weekStartsOn: 1,\n    })\n\n    // on génère les jours pour couvrir le mois (classique)\n    const allDays = eachDayOfInterval({\n      start: monthRangeStart,\n      end: monthRangeEndRaw,\n    })\n\n    // on regroupe par semaines (7 jours)\n    const weeks: Date[][] = []\n    for (let i = 0; i < allDays.length; i += 7) {\n      weeks.push(allDays.slice(i, i + 7))\n    }\n\n    // filtrage pour supprimer une éventuelle 7e ligne complètement \"mois suivant\"\n    const filteredWeeks = weeks.filter((week, index) => {\n      const hasCurrentMonthDay = week.some(\n        d => getMonth(d) === targetMonth && getYear(d) === targetYear,\n      )\n      if (hasCurrentMonthDay) return true\n\n      // garder la semaine qui contient la targetDate (si tu veux voir une semaine entamée)\n      const hasTargetWeek = week.some(d =>\n        isSameWeek(d, target, { weekStartsOn: 1 }),\n      )\n      return hasTargetWeek\n    })\n\n    const flatDays = filteredWeeks.flat()\n\n    const dynamicDateColor = (\n      today: Date,\n      date: Date,\n      targetDate: Date | string,\n      curDateMonth: number,\n      targetMonth: number,\n    ): string => {\n      const base ='flex items-center justify-center w-6 h-6 transition rounded-full'\n      if (\n        (isEqualDate(today, date) && isEqualDate(targetDate, date)) ||\n        isEqualDate(today, date)\n      ) {\n        // aujourd'hui (et sélectionné)\n        return base + 'bg-blue-500 hover:bg-blue-600 text-white '\n      }\n      if (isEqualDate(targetDate, date)) {\n        // date sélectionnée\n        return base + 'bg-blue-300 text-blue-800 hover:bg-blue-400'\n      }\n      if (curDateMonth !== targetMonth) {\n        // jours du mois précédent / suivant\n        return base + 'text-gray-400 hover:bg-gray-100'\n      }\n      // jours normaux du mois courant\n      return base + 'text-gray-900 hover:bg-gray-200'\n    }\n\n    const days = flatDays.map((date, i) => {\n      const curDateMonth = getMonth(date)\n      return (\n        <div\n          key={i}\n          className=\"flex items-center justify-center bg-white cursor-pointer\"\n          onClick={() => onClickDate(date)}\n        >\n          <p\n            className={dynamicDateColor(\n              today,\n              date,\n              targetDate,\n              curDateMonth,\n              targetMonth,\n            )}\n          >\n            {getDate(date)}\n          </p>\n        </div>\n      )\n    })\n\n    return days\n  }\n\n  return (\n    <div\n      ref={calendarRef}\n      className=\"px-4 pt-2 pb-6 bg-white\"\n    >\n      <div className=\"flex items-center justify-between pl-2.5 pr-1\">\n        <p>\n          {format(new Date(calendarDate), 'MMMM yyyy', {\n            locale: fr,\n          })}\n        </p>\n        <div className=\"flex\">\n          <IconButton\n            size=\"xs\"\n            label=\"Previous Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowLeft\n                size=\"20px\"\n                color=\"rgba(95, 105, 119)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('prev')}\n          />\n          <IconButton\n            size=\"xs\"\n            label=\"Next Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowRight\n                size=\"20px\"\n                color=\"rgba(80, 80, 60)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('next')}\n          />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-7 mt-2 gap-y-1\">\n        {gridHeader}\n        {gridDates(calendarDate)}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 629, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeftCalendar.tsx"],"sourcesContent":["'use client'\n\nimport Calendar from '../../Common/Calendar/Calendar'\n\ninterface PanelLeftCalendarProps {\n  targetDate: string\n  setTargetDate: (value: string) => void\n}\n\nexport default function PanelLeftCalendar({\n  targetDate,\n  setTargetDate,\n}: PanelLeftCalendarProps) {\n  const onClickDate = (date: Date) => {\n    setTargetDate(date.toString())\n  }\n\n  return (\n    <Calendar\n      targetDate={targetDate}\n      onClickDate={onClickDate}\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,kBAAkB,EACxC,UAAU,EACV,aAAa,EACU;IACvB,MAAM,cAAc,CAAC;QACnB,cAAc,KAAK,QAAQ;IAC7B;IAEA,qBACE,8OAAC,+JAAQ;QACP,YAAY;QACZ,aAAa;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 655, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeft.tsx"],"sourcesContent":["'use client'\n\nimport { getHours, getMinutes, set } from 'date-fns'\nimport Image from 'next/image'\nimport PanelLeftCalendar from './PanelLeftCalendar'\n\ninterface PanelLeftProps {\n  targetDate: string\n  setTargetDate: (value: string) => void\n  onClickNewEvent: (basis?: { startDate: string; endDate: string }) => void\n}\n\nexport default function PanelLeft({\n  targetDate,\n  setTargetDate,\n  onClickNewEvent,\n}: PanelLeftProps) {\n  const onClickCreate = () => {\n    const now = new Date()\n    const newEventBaseDate = set(new Date(targetDate), {\n      hours: getHours(now),\n      minutes: getMinutes(now),\n    }).toString()\n\n    onClickNewEvent({\n      startDate: newEventBaseDate,\n      endDate: newEventBaseDate,\n    })\n  }\n\n  return (\n    <div>\n      <div className=\"pl-2 my-4\">\n        <button\n          className=\"flex items-center justify-center h-12 p-3.5 text-sm transition bg-white border rounded-full shadow-md border-opacity-30 min-w-56 hover:shadow-xl hover:bg-blue-50\"\n          onClick={onClickCreate}\n        >\n          <Image\n            src=\"/createIcon.png\"\n            height={32}\n            width={32}\n            alt=\"create-icon\"\n          />\n          <span className=\"pr-3 ml-3 font-normal tracking-wide text-gray-500\">\n            Créer\n          </span>\n        </button>\n      </div>\n      <PanelLeftCalendar targetDate={targetDate} setTargetDate={setTargetDate} />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAYe,SAAS,UAAU,EAChC,UAAU,EACV,aAAa,EACb,eAAe,EACA;IACf,MAAM,gBAAgB;QACpB,MAAM,MAAM,IAAI;QAChB,MAAM,mBAAmB,IAAA,yIAAG,EAAC,IAAI,KAAK,aAAa;YACjD,OAAO,IAAA,mJAAQ,EAAC;YAChB,SAAS,IAAA,uJAAU,EAAC;QACtB,GAAG,QAAQ;QAEX,gBAAgB;YACd,WAAW;YACX,SAAS;QACX;IACF;IAEA,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS;;sCAET,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,QAAQ;4BACR,OAAO;4BACP,KAAI;;;;;;sCAEN,8OAAC;4BAAK,WAAU;sCAAoD;;;;;;;;;;;;;;;;;0BAKxE,8OAAC,2KAAiB;gBAAC,YAAY;gBAAY,eAAe;;;;;;;;;;;;AAGhE","debugId":null}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/types.ts"],"sourcesContent":["export const EventRepeatTypes = { DAILY: 0, WEEKLY: 1, MONTHLY: 2,} as const\n\nexport type EventRepeatType =\n  (typeof EventRepeatTypes)[keyof typeof EventRepeatTypes]\n\nexport const EventInviteStatusTypes = {\n  PENDING: 0,\n  ACCEPTED: 1,\n  DECLINED: 2,\n} as const\n\nexport type EventInviteStatusType =\n  (typeof EventInviteStatusTypes)[keyof typeof EventInviteStatusTypes]\n\nexport const CalendarViewTypes = {\n  WEEK_VIEW: 1,\n} as const\n\nexport type CalendarViewType =\n  (typeof CalendarViewTypes)[keyof typeof CalendarViewTypes]\n\nexport const RepeatChangesTypes = {\n  CHANGE: 'change',\n  DELETE: 'delete',\n} as const\n\nexport type RepeatChangesType =\n  (typeof RepeatChangesTypes)[keyof typeof RepeatChangesTypes]\n\nexport const MINUTE_SEGMENT_INDEX = {\n  0: 0,\n  15: 1,\n  30: 2,\n  45: 3,\n} as const\n\n// \"0\" | \"15\" | \"30\" | \"45\"\nexport type MinuteSegmentKey = keyof typeof MINUTE_SEGMENT_INDEX\n\n// 0 | 1 | 2 | 3\nexport type MinuteIndex = (typeof MINUTE_SEGMENT_INDEX)[MinuteSegmentKey]\n\n// On cast d'abord vers unknown, puis vers MinuteSegmentKey[]\nexport const MINUTE_SEGMENT_KEYS =\n  Object.keys(MINUTE_SEGMENT_INDEX) as unknown as MinuteSegmentKey[]\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,mBAAmB;IAAE,OAAO;IAAG,QAAQ;IAAG,SAAS;AAAE;AAK3D,MAAM,yBAAyB;IACpC,SAAS;IACT,UAAU;IACV,UAAU;AACZ;AAKO,MAAM,oBAAoB;IAC/B,WAAW;AACb;AAKO,MAAM,qBAAqB;IAChC,QAAQ;IACR,QAAQ;AACV;AAKO,MAAM,uBAAuB;IAClC,GAAG;IACH,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AASO,MAAM,sBACX,OAAO,IAAI,CAAC","debugId":null}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/helpers.ts"],"sourcesContent":["import {\n  closestTo,\n  eachHourOfInterval,\n  endOfDay,\n  endOfWeek,\n  getHours,\n  getMinutes,\n  set as setDate,\n  startOfDay,\n  startOfWeek,\n} from 'date-fns'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n  EventRepeatTypes,\n  EventRepeatType,\n  MINUTE_SEGMENT_INDEX,\n  MINUTE_SEGMENT_KEYS,\n  MinuteSegmentKey,\n  MinuteIndex,\n\n} from './types'\n\nexport const repeatTypeStringLookup: Record<EventRepeatType | -1, string> = {\n  [-1]: 'Ne pas répéter',\n  [EventRepeatTypes.DAILY]: 'Journalier',\n  [EventRepeatTypes.WEEKLY]: 'Hebdomadaire',\n  [EventRepeatTypes.MONTHLY]: 'Mensuel',\n}\n\nexport const isValidTime = (strValue: string): [boolean, number, number] => {\n  const trimmed = strValue.trim()\n  const split = trimmed.split(':')\n\n  if (split.length !== 2) return [false, 0, 0]\n\n  const hour = Number(split[0])\n  const minutes = Number(split[1])\n\n  if (isNaN(hour) || isNaN(minutes)) return [false, 0, 0]\n  if (hour < 0 || hour > 23) return [false, 0, 0]\n  if (minutes < 0 || minutes > 59) return [false, 0, 0]\n\n  return [true, hour, minutes]\n}\n\nexport const sortEventBlocks = <T extends Record<string, any>>(\n  events: T[],\n  key: keyof T,\n  isAscending = true,\n): T[] => {\n  const compFunc = (a: number | Date, b: number | Date, asc: boolean) =>\n    asc ? (a < b ? -1 : a > b ? 1 : 0) : (a < b ? 1 : a > b ? -1 : 0)\n\n  return events\n    .slice()\n    .sort((a, b) => {\n      if (key === 'startDate' || key === 'endDate' || key === 'createdAt') {\n        return compFunc(\n          new Date(a[key] as any),\n          new Date(b[key] as any),\n          isAscending,\n        )\n      }\n\n      if (a[key] === b[key]) {\n        return compFunc(\n          new Date(a['startDate'] as any),\n          new Date(b['startDate'] as any),\n          isAscending,\n        )\n      }\n\n      return compFunc(a[key] as any, b[key] as any, isAscending)\n    })\n}\n\nexport interface DayViewHourSegment {\n  events: any[]\n  startColIndex: number\n  colCount: number\n  baseZIndex: number\n}\n\nexport type DayViewHours = Record<\n  number,\n  Record<MinuteSegmentKey, DayViewHourSegment>\n>\n\nexport const getBaseDayViewEvents = () => {\n  const hours: DayViewHours = Array(24)\n    .fill(null)\n    .map((_, i) => i)\n    .reduce<DayViewHours>((acc, cur) => {\n      const segment: Record<MinuteSegmentKey, DayViewHourSegment> = {\n        0: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        15: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        30: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        45: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n      }\n      acc[cur] = segment\n      return acc\n    }, {} as DayViewHours)\n\n  return {\n    wholeDayEvents: [] as any[],\n    hours,\n  }\n}\n\nexport interface WeekDayEvents {\n  hours: DayViewHours\n}\n\nexport const getBaseWeekViewEvents = () => {\n  const weekArray = Array(7)\n    .fill(null)\n    .map((_, i) => i)\n\n  const days = weekArray.reduce<Record<number, DayViewHours>>((acc, cur) => {\n    const { hours } = getBaseDayViewEvents()\n    acc[cur] = { ...hours }\n    return acc\n  }, {})\n\n  const wholeDayEvents = weekArray.reduce<\n    Record<\n      number,\n      {\n        incomingRowsMatrix: Record<number, number>\n        events: any[]\n      }\n    >\n  >((acc, cur) => {\n    acc[cur] = {\n      incomingRowsMatrix: {},\n      events: [],\n    }\n    return acc\n  }, {})\n\n  return {\n    wholeDayEvents,\n    days,\n  }\n}\n\nexport const getUpdatedEventBlocksWithPlacement = (\n  events: any[],\n  incomingRowsMatrix: Record<number, number>,\n) => {\n  const list: any[] = []\n  let eventIndex = 0\n  let matrixIndex = 0\n\n  while (eventIndex < events.length) {\n    if (matrixIndex in incomingRowsMatrix) {\n      list.push({ isEmpty: true })\n    } else {\n      list.push({\n        ...events[eventIndex],\n        isEmpty: false,\n      })\n      eventIndex++\n    }\n    matrixIndex++\n  }\n\n  return list\n}\n\nexport const calculateIncomingRowMatrix = (\n  eventsByDay: Record<\n    number,\n    {\n      events: any[]\n      incomingRowsMatrix: Record<number, number>\n    }\n  >,\n  isWeek = false,\n) => {\n  const container: typeof eventsByDay = { ...eventsByDay }\n\n  let baseIncomingRowsMatrix: Record<number, number> = {}\n  let count = 0\n  let rowIndex = 0\n\n  let keys = Object.keys(container).map(Number)\n\n  if (isWeek) {\n    const updated = keys.slice()\n    const temp = updated.shift()\n    if (temp !== undefined) updated.push(temp)\n    keys = updated\n  }\n\n  keys.forEach(day => {\n    if (count === 7) {\n      count = 0\n      baseIncomingRowsMatrix = {}\n    }\n\n    container[day] = {\n      ...container[day],\n      events: sortEventBlocks(container[day].events, 'duration', false),\n    }\n\n    const deletedKeys: number[] = []\n\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      if (baseIncomingRowsMatrix[keyNum] === 0) {\n        deletedKeys.push(keyNum)\n        delete baseIncomingRowsMatrix[keyNum]\n      }\n    })\n\n    if (deletedKeys.length > 0) {\n      rowIndex = Math.min(...deletedKeys)\n    }\n\n    container[day] = {\n      ...container[day],\n      incomingRowsMatrix: { ...baseIncomingRowsMatrix },\n    }\n\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      baseIncomingRowsMatrix[keyNum] = baseIncomingRowsMatrix[keyNum] - 1\n    })\n\n    container[day].events.forEach(e => {\n      if (e.duration > 0) {\n        baseIncomingRowsMatrix[rowIndex] = e.duration\n        rowIndex += 1\n        while (rowIndex in baseIncomingRowsMatrix) {\n          rowIndex += 1\n        }\n      }\n    })\n\n    count += 1\n  })\n\n  return container\n}\n\nexport const getDateRange = (\n  calendarViewType: CalendarViewType,\n  targetDate: string | Date,\n): [Date, Date] => {\n  const target = new Date(targetDate)\n\n  switch (calendarViewType) {\n    case CalendarViewTypes.WEEK_VIEW: {\n      const weekStart = startOfWeek(target, { weekStartsOn: 1 })\n      const weekEnd = endOfWeek(target, { weekStartsOn: 1 })\n      return [weekStart, endOfDay(weekEnd)]\n    }\n    default:\n      return [startOfDay(target), endOfDay(target)]\n  }\n}\n\nexport const getClosestIndexForDayViewEvents = (\n  date: Date,\n): [number, MinuteSegmentKey] => {\n  const ZERO = setDate(date, { minutes: 0 })\n  const FIFTEEN = setDate(date, { minutes: 15 })\n  const THIRTY = setDate(date, { minutes: 30 })\n  const FOURTYFIVE = setDate(date, { minutes: 45 })\n\n  const closest = closestTo(date, [ZERO, FIFTEEN, THIRTY, FOURTYFIVE])\n  if (!closest) {\n    return [getHours(date), 0]\n  }\n  const m = getMinutes(closest) as 0 | 15 | 30 | 45\n  const minuteKey = ((): MinuteSegmentKey => {\n    switch (m) {\n      case 0:\n        return 0\n      case 15:\n        return 15\n      case 30:\n        return 30\n      case 45:\n        return 45\n      default:\n        return 0\n    }\n  })()\n\n  return [getHours(date), minuteKey]\n}\n\nexport const findEventCoverage = (event: {\n  startDate: string\n  endDate: string\n}) => {\n  const coveredHours = eachHourOfInterval({\n    start: new Date(event.startDate),\n    end: new Date(event.endDate),\n  })\n\n  const startDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.startDate),\n  )[1]\n  const endDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.endDate),\n  )[1]\n\n  if (coveredHours.length === 1) {\n    const startSeg = MINUTE_SEGMENT_INDEX[startDateMinuteKey]\n    const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n    const endSeg =\n      startSeg === endSegRaw ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n    return {\n      [coveredHours[0].toString()]: MINUTE_SEGMENT_KEYS.slice(\n        startSeg,\n        endSeg,\n      ) as MinuteSegmentKey[],\n    } as Record<string, MinuteSegmentKey[]>\n  }\n\n  // > 1h\n  const result = coveredHours\n    .map((hour, index) => {\n      if (index === 0) {\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            MINUTE_SEGMENT_INDEX[startDateMinuteKey],\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      if (index === coveredHours.length - 1) {\n        const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n        const endSeg =\n          endSegRaw === 0 ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            0,\n            endSeg,\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      return {\n        hour: hour.toString(),\n        minuteSegments: [...MINUTE_SEGMENT_KEYS] as MinuteSegmentKey[],\n      }\n    })\n    .reduce<Record<string, MinuteSegmentKey[]>>((acc, cur) => {\n      acc[cur.hour] = cur.minuteSegments\n      return acc\n    }, {})\n\n  return result\n}\n\nexport const reduceCoverages = (\n  coveragesArray: Record<string, MinuteSegmentKey[]>[],\n) => {\n  const reducedCoverage: Record<number, Record<MinuteSegmentKey, number>> = {}\n\n  coveragesArray.forEach(coverage => {\n    const hourKeys = Object.keys(coverage)\n\n    for (let i = 0; i < hourKeys.length; i++) {\n      const hourNum = getHours(new Date(hourKeys[i]))\n\n      if (!(hourNum in reducedCoverage)) {\n        reducedCoverage[hourNum] = {\n          0: 0,\n          15: 0,\n          30: 0,\n          45: 0,\n        }\n      }\n\n      const minuteSegments = coverage[hourKeys[i]] as MinuteSegmentKey[]\n\n      minuteSegments.forEach(segmentKey => {\n        reducedCoverage[hourNum][segmentKey] =\n          reducedCoverage[hourNum][segmentKey] + 1\n      })\n    }\n  })\n\n  return reducedCoverage\n}\n\nexport const calculateOverlap = (\n  reduceCoverage: Record<number, Record<MinuteSegmentKey, number>>,\n  hoursObject: DayViewHours,\n) => {\n  const coverageHours = Object.keys(reduceCoverage).map(Number)\n\n  coverageHours.forEach(hour => {\n    const coverageMinuteSegments =\n      Object.keys(reduceCoverage[hour]) as unknown as MinuteSegmentKey[]\n\n    coverageMinuteSegments.forEach(minute => {\n      const coverageCount = reduceCoverage[hour][minute]\n      const { events } = hoursObject[hour][minute]\n\n      if (events.length < coverageCount) {\n        const diff = coverageCount - events.length\n        hoursObject[hour][minute].colCount = diff + 1\n        hoursObject[hour][minute].startColIndex = diff\n        hoursObject[hour][minute].baseZIndex = diff\n      }\n    })\n  })\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Dropdown/Dropdown.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\n\ninterface DropdownItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\ninterface DropdownProps {\n  data?: DropdownItem[]\n  onCloseDropdown: () => void\n}\n\nexport default function Dropdown({ data = [], onCloseDropdown,}: DropdownProps) {\n  const dropdownRef = useRef<HTMLDivElement | null>(null)\n  useEffect(() => {\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (dropdownRef.current) {\n        const outsideClick = !dropdownRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onCloseDropdown()\n        }\n      }\n    }\n    document.addEventListener('click', checkOutsideClick)\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [onCloseDropdown])\n  const handleOnClick = (handler: () => void) => {\n    handler()\n    onCloseDropdown()\n  }\n  return (\n    <div ref={dropdownRef} className=\"absolute left-0 z-50 py-2 bg-white rounded-md dropdownBoxShadow min-w-168 top-full\">\n      {data.map((d, i) => (\n        <div key={i} onClick={() => handleOnClick(d.onClickHandler)} className=\"flex items-center justify-between px-4 py-2 transition cursor-pointer hover:bg-gray-100\">\n          <div className=\"text-sm\">{d.leftLabel}</div>\n          <div className=\"text-sm text-gray-400\">{d.rightLabel}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAae,SAAS,SAAS,EAAE,OAAO,EAAE,EAAE,eAAe,EAAiB;IAC5E,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAClD,IAAA,kNAAS,EAAC;QACR,MAAM,oBAAoB,CAAC;YACzB,IAAI,YAAY,OAAO,EAAE;gBACvB,MAAM,eAAe,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM;gBAC3D,IAAI,cAAc;oBAChB;gBACF;YACF;QACF;QACA,SAAS,gBAAgB,CAAC,SAAS;QACnC,OAAO;YACL,SAAS,mBAAmB,CAAC,SAAS;QACxC;IACF,GAAG;QAAC;KAAgB;IACpB,MAAM,gBAAgB,CAAC;QACrB;QACA;IACF;IACA,qBACE,8OAAC;QAAI,KAAK;QAAa,WAAU;kBAC9B,KAAK,GAAG,CAAC,CAAC,GAAG,kBACZ,8OAAC;gBAAY,SAAS,IAAM,cAAc,EAAE,cAAc;gBAAG,WAAU;;kCACrE,8OAAC;wBAAI,WAAU;kCAAW,EAAE,SAAS;;;;;;kCACrC,8OAAC;wBAAI,WAAU;kCAAyB,EAAE,UAAU;;;;;;;eAF5C;;;;;;;;;;AAOlB","debugId":null}},
    {"offset": {"line": 1229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/CreateEventModal.tsx"],"sourcesContent":["'use client'\n\nimport {\n  endOfDay,\n  format,\n  getDate,\n  getHours,\n  getMinutes,\n  getMonth,\n  getYear,\n  isAfter,\n  isBefore,\n  set as setDate,\n  startOfDay,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useEffect, useRef, useState } from 'react'\nimport {\n  MdAccessTime,\n  MdArrowDropDown,\n  MdCheckBox,\n  MdCheckBoxOutlineBlank,\n  MdClose,\n  MdColorLens,\n  MdLocationOn,\n  MdSubject,\n} from 'react-icons/md'\nimport { v4 as uuid } from 'uuid'\nimport { isValidTime, repeatTypeStringLookup } from '../../utils/helpers'\nimport {\n  EventRepeatTypes,\n  EventRepeatType,\n} from '../../utils/types'\nimport IconButton from '../Common/Button/IconButton'\nimport Calendar from '../Common/Calendar/Calendar'\nimport Dropdown from '../Common/Dropdown/Dropdown'\n\ninterface RepeatTypeItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\nexport interface CreateEventPayload {\n  id?: string\n  title: string\n  description: string\n  location: string\n  startDate: string\n  endDate: string\n  isAllDay: boolean\n  repeatType: -1 | EventRepeatType\n  colorId?: string | null\n}\n\ninterface CreateEventModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSave: (event: CreateEventPayload) => void\n  initialStartDate?: string\n  initialEndDate?: string\n  defaultColorId?: string | null    // ex: '1' pour bleu Google\n  isEdit?: boolean\n}\n\n// Liste des 11 couleurs Google (colorId 1–11) + classes Tailwind approximatives\nconst GOOGLE_COLORS: { id: string; label: string; className: string }[] = [\n  { id: '1',  label: 'Bleu',        className: 'bg-blue-500 text-white' },\n  { id: '2',  label: 'Vert clair',  className: 'bg-emerald-400 text-white' },\n  { id: '3',  label: 'Violet',      className: 'bg-purple-500 text-white' },\n  { id: '4',  label: 'Rouge',       className: 'bg-red-500 text-white' },\n  { id: '5',  label: 'Jaune',       className: 'bg-yellow-400 text-black' },\n  { id: '6',  label: 'Orange',      className: 'bg-orange-500 text-white' },\n  { id: '7',  label: 'Turquoise',   className: 'bg-teal-500 text-white' },\n  { id: '8',  label: 'Gris',        className: 'bg-gray-500 text-white' },\n  { id: '9',  label: 'Indigo',      className: 'bg-indigo-500 text-white' },\n  { id: '10', label: 'Vert',        className: 'bg-lime-500 text-black' },\n  { id: '11', label: 'Rose',        className: 'bg-rose-500 text-white' },\n]\n\nfunction getColorClass(colorId: string | null | undefined): string {\n  const found = GOOGLE_COLORS.find(c => c.id === colorId)\n  return found?.className ?? 'bg-sky-500 text-white'\n}\n\nexport default function CreateEventModal({\n  isOpen,\n  onClose,\n  onSave,\n  initialStartDate,\n  initialEndDate,\n  defaultColorId = '1',\n  isEdit = false,\n}: CreateEventModalProps) {\n  const startDateInputRef = useRef<HTMLInputElement | null>(null)\n  const endDateInputRef = useRef<HTMLInputElement | null>(null)\n\n  const [title, setTitle] = useState('')\n  const [location, setLocation] = useState('')\n  const [description, setDescription] = useState('')\n\n  const [startDate, setStartDate] = useState<string>(\n    initialStartDate ?? new Date().toISOString(),\n  )\n  const [startDateInputValue, setStartDateInputValue] = useState('')\n  const [showStartDateInput, setShowStartDateInput] = useState(false)\n\n  const [endDate, setEndDate] = useState<string>(\n    initialEndDate ?? new Date().toISOString(),\n  )\n  const [endDateInputValue, setEndDateInputValue] = useState('')\n  const [showEndDateInput, setShowEndDateInput] = useState(false)\n\n  const [isAllDay, setIsAllDay] = useState(false)\n  const [repeatType, setRepeatType] = useState<-1 | EventRepeatType>(-1)\n\n  // colorId Google direct\n  const [colorId, setColorId] = useState<string | null>(defaultColorId)\n\n  const [isRepeatTypeDropdownOpen, setIsRepeatTypeDropdownOpen] =\n    useState(false)\n  const [isStartDateCalendarOpen, setIsStartDateCalendarOpen] = useState(false)\n  const [isEndDateCalendarOpen, setIsEndDateCalendarOpen] = useState(false)\n\n  const repeatTypeDropdownData: RepeatTypeItem[] = [\n    {\n      leftLabel: 'Ne se répète pas',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(-1)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Quotidien',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.DAILY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Hebdomadaire',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.WEEKLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Mensuel',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.MONTHLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n  ]\n\n  const onToggleAllDay = (newVal: boolean) => {\n    if (newVal) {\n      const updatedStartDate = startOfDay(new Date(startDate))\n      const updatedEndDate = endOfDay(new Date(endDate))\n      setStartDate(updatedStartDate.toISOString())\n      setEndDate(updatedEndDate.toISOString())\n    } else {\n      const now = new Date()\n      const curHour = getHours(now)\n      const curMin = getMinutes(now)\n      setStartDate(\n        setDate(new Date(startDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n      setEndDate(\n        setDate(new Date(endDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n    }\n\n    setIsAllDay(newVal)\n  }\n\n  const onChangeDate = (target: 'start' | 'end', newDateVal: Date) => {\n    const base = new Date(newDateVal)\n    const year = getYear(base)\n    const month = getMonth(base)\n    const date = getDate(base)\n    if (target === 'start') {\n      const updated = setDate(new Date(startDate), { year, month, date })\n      setStartDate(updated.toISOString())\n      if (isBefore(new Date(endDate), updated)) {\n        setEndDate(updated.toISOString())\n      }\n      setIsStartDateCalendarOpen(false)\n    } else {\n      const updated = setDate(new Date(endDate), { year, month, date })\n      setEndDate(updated.toISOString())\n      if (isBefore(updated, new Date(startDate))) {\n        setStartDate(updated.toISOString())\n      }\n      setIsEndDateCalendarOpen(false)\n    }\n  }\n\n  const onBlurInput = (target: 'start' | 'end', value: string) => {\n    const [valid, hours, minutes] = isValidTime(value)\n    if (target === 'start') {\n      if (valid) {\n        const newStartDate = setDate(new Date(startDate), {\n          hours,\n          minutes,\n        })\n        if (isAfter(newStartDate, new Date(endDate))) {\n          const newEndDate = setDate(new Date(endDate), {\n            hours,\n            minutes,\n          })\n          setEndDate(newEndDate.toISOString())\n        }\n\n        setStartDate(newStartDate.toISOString())\n      }\n\n      setShowStartDateInput(false)\n    } else {\n      if (valid) {\n        const newEndDate = setDate(new Date(endDate), { hours, minutes })\n        if (isBefore(newEndDate, new Date(startDate))) {\n          const newStartDate = setDate(new Date(startDate), {\n            hours,\n            minutes,\n          })\n          setStartDate(newStartDate.toISOString())\n        }\n        setEndDate(newEndDate.toISOString())\n      }\n      setShowEndDateInput(false)\n    }\n  }\n\n  const handleSaveClick = () => {\n    const payload: CreateEventPayload = {\n      id: uuid(),\n      title: title.length > 0 ? title : '(Sans titre)',\n      description,\n      location,\n      startDate,\n      endDate,\n      isAllDay,\n      repeatType,\n      colorId: colorId ?? undefined,\n    }\n     console.log('CreateEventModal payload =>', payload) \n    onSave(payload)\n    onClose()\n  }\n\n  useEffect(() => {\n    setStartDateInputValue(\n      format(new Date(startDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [startDate])\n\n  useEffect(() => {\n    setEndDateInputValue(\n      format(new Date(endDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [endDate])\n\n  useEffect(() => {\n    if (showStartDateInput && startDateInputRef.current) {\n      startDateInputRef.current.focus()\n    }\n    if (showEndDateInput && endDateInputRef.current) {\n      endDateInputRef.current.focus()\n    }\n  }, [showStartDateInput, showEndDateInput])\n\n  if (!isOpen) return null\n\n  const headerColorClass = getColorClass(colorId)\n\n  return (\n    <div className=\"fixed inset-0 z-40 flex items-center justify-center\">\n      <div\n        className=\"absolute inset-0 bg-black bg-opacity-20\"\n        onClick={onClose}\n      />\n\n      <div\n        className=\"\n          relative flex flex-col bg-white rounded-md h-580px min-w-448\n          createEventModalBoxShadow\n        \"\n      >\n        <div\n          className={`\n            flex items-center justify-between px-3 py-1 rounded-t-md bg-opacity-20 transition\n            ${headerColorClass}\n          `}\n        >\n          <IconButton\n            label=\"Fermer\"\n            size=\"small\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdClose size=\"24px\" color=\"rgba(75, 85, 99)\" />\n            }\n            onClickHandler={onClose}\n          />\n        </div>\n\n        <div className=\"pt-2\">\n          {/* Titre */}\n          <div className=\"flex py-4 pl-16 pr-5\">\n            <input\n              type=\"text\"\n              value={title}\n              placeholder=\"Ajouter un titre\"\n              onChange={e => setTitle(e.target.value)}\n              className=\"w-full text-2xl antialiased font-normal border-b outline-none\"\n            />\n          </div>\n\n          {/* Bloc date / heure */}\n          <div className=\"flex px-5 py-4\">\n            <div className=\"flex items-start justify-center\">\n              <MdAccessTime size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-col flex-auto pl-6 text-sm text-gray-500\">\n              <div className=\"flex items-center justify-start\">\n                {/* Start date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsStartDateCalendarOpen(true)}\n                  >\n                    {format(new Date(startDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isStartDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={startDate}\n                        onClickDate={newDate =>\n                          onChangeDate('start', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsStartDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Start time */}\n                {!isAllDay && (\n                  <div>\n                    {showStartDateInput ? (\n                      <input\n                        ref={startDateInputRef}\n                        type=\"text\"\n                        value={startDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setStartDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('start', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowStartDateInput(true)}\n                      >\n                        {format(new Date(startDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <span className=\"px-1\">-</span>\n\n                {/* End time */}\n                {!isAllDay && (\n                  <div>\n                    {showEndDateInput ? (\n                      <input\n                        ref={endDateInputRef}\n                        type=\"text\"\n                        value={endDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setEndDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('end', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowEndDateInput(true)}\n                      >\n                        {format(new Date(endDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* End date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsEndDateCalendarOpen(true)}\n                  >\n                    {format(new Date(endDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isEndDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={endDate}\n                        onClickDate={newDate =>\n                          onChangeDate('end', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsEndDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* All day */}\n              <div className=\"flex items-center mt-2 -ml-1\">\n                <div className=\"mr-1.5\">\n                  <IconButton\n                    label=\"Toute la journée\"\n                    size=\"small\"\n                    tooltipLocation=\"bottom\"\n                    imgComponent={\n                      isAllDay ? (\n                        <MdCheckBox size=\"24px\" color=\"gray\" />\n                      ) : (\n                        <MdCheckBoxOutlineBlank\n                          size=\"24px\"\n                          color=\"gray\"\n                        />\n                      )\n                    }\n                    onClickHandler={() => onToggleAllDay(!isAllDay)}\n                  />\n                </div>\n                <div>Toute la journée</div>\n              </div>\n\n              {/* Répétition */}\n              <div className=\"relative mt-2\">\n                <button\n                  className=\"flex px-2 py-1 -ml-1 transition rounded-md hover:bg-gray-100\"\n                  onClick={() => setIsRepeatTypeDropdownOpen(true)}\n                >\n                  <span className=\"mr-0.5\">\n                    {repeatTypeStringLookup[\n                      repeatType as -1 | EventRepeatType\n                    ]}\n                  </span>\n                  <MdArrowDropDown\n                    size=\"18px\"\n                    color=\"rgba(75, 85, 99)\"\n                  />\n                </button>\n                {isRepeatTypeDropdownOpen && (\n                  <Dropdown\n                    data={repeatTypeDropdownData}\n                    onCloseDropdown={() =>\n                      setIsRepeatTypeDropdownOpen(false)\n                    }\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Location */}\n          <div className=\"flex items-center px-5 py-4 border-t\">\n            <div>\n              <MdLocationOn size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <input\n                type=\"text\"\n                value={location}\n                placeholder=\"Lieu\"\n                onChange={e => setLocation(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none\"\n              />\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"flex px-5 py-4 border-t\">\n            <div>\n              <MdSubject size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <textarea\n                value={description}\n                placeholder=\"Description\"\n                onChange={e => setDescription(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none resize-none\"\n              />\n            </div>\n          </div>\n\n          {/* Couleur Google */}\n          <div className=\"flex px-5 py-4 border-t border-b\">\n            <div>\n              <MdColorLens size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-auto pl-6 flex-wrap gap-3 text-xs -mt-1.5\">\n              {GOOGLE_COLORS.map(c => (\n                <button\n                  key={c.id}\n                  type=\"button\"\n                  className={`\n                    flex flex-col items-center px-1 py-1.5 transition rounded-md cursor-pointer\n                    border border-transparent\n                    ${colorId === c.id ? 'border-gray-600' : ''}\n                  `}\n                  onClick={() => setColorId(c.id)}\n                >\n                  <span className=\"mb-1 tracking-wide text-gray-500 text-xxs\">\n                    {c.label}\n                  </span>\n                  <div\n                    className={`\n                      w-4 h-4 rounded-full\n                      ${c.className}\n                    `}\n                  />\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Boutons action */}\n        <div className=\"flex items-center justify-end px-4 py-3\">\n          <button\n            className={`\n              px-6 py-2 text-sm text-white bg-opacity-80 transition rounded-md\n              ${getColorClass(colorId)}\n            `}\n            onClick={handleSaveClick}\n          >\n            Enregistrer\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Timeline/Timeline.tsx"],"sourcesContent":["'use client'\n\nimport {\n  eachDayOfInterval,\n  format,\n  set as setDate,\n  setHours,\n  setMinutes,\n  differenceInMinutes,\n  isBefore,\n  isAfter,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport {\n  Dispatch,\n  SetStateAction,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport {\n  getDateRange,\n  getClosestIndexForDayViewEvents,\n} from '../../utils/helpers'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n} from '../../utils/types'\nimport { UiEvent, SelectedEventState } from '../GoogleAgenda/GoogleAgenda'\n\n/* ---------- Types ---------- */\n\nexport interface TimelineBlockEvent {\n  eventUid: string\n  title: string\n  startDate: string\n  endDate: string\n  colorId: string | null\n  colIndex: number\n  colCount: number\n}\n\ninterface TimelineBlockProps {\n  index: number\n  event: TimelineBlockEvent\n  onClickTimelineBlock: (payload: {\n    eventUid: string\n    top: number\n    left: number\n    height: number\n    width: number\n  }) => void\n}\n\ntype DayEventsByHour = Record<\n  number,\n  Record<number, TimelineBlockEvent[]>\n>\n\n/* ---------- Couleur depuis colorId Google ---------- */\n\nfunction googleColorIdToClasses(colorId: string | null | undefined): string {\n  switch (colorId) {\n    case '1':  return 'bg-blue-500 text-white'\n    case '2':  return 'bg-green-500 text-white'\n    case '3':  return 'bg-purple-500 text-white'\n    case '4':  return 'bg-red-500 text-white'\n    case '5':  return 'bg-yellow-400 text-black'\n    case '6':  return 'bg-orange-500 text-white'\n    case '7':  return 'bg-teal-500 text-white'\n    case '8':  return 'bg-gray-500 text-white'\n    case '9':  return 'bg-indigo-500 text-white'\n    case '10': return 'bg-lime-500 text-black'\n    case '11': return 'bg-rose-500 text-white'\n    default:   return 'bg-sky-500 text-white'\n  }\n}\n\n/* ---------- Block (un event dans la grille) ---------- */\n\nfunction TimelineBlock({\n  index,\n  event,\n  onClickTimelineBlock,\n}: TimelineBlockProps) {\n  const timelineBlockRef = useRef<HTMLDivElement | null>(null)\n\n  const getBlockHeight = (evt: TimelineBlockEvent): number => {\n    const basePixel = 11\n    const [startHour, startMinuteSeg] = getClosestIndexForDayViewEvents(\n      new Date(evt.startDate),\n    )\n    const [endHour, endMinuteSeg] = getClosestIndexForDayViewEvents(\n      new Date(evt.endDate),\n    )\n\n    if (startHour === endHour && startMinuteSeg === endMinuteSeg) {\n      return 22\n    }\n\n    const start = setDate(new Date(evt.startDate), {\n      hours: startHour,\n      minutes: startMinuteSeg,\n    })\n    const end = setDate(new Date(evt.endDate), {\n      hours: endHour,\n      minutes: endMinuteSeg,\n    })\n    const diffSlots = Math.floor(differenceInMinutes(end, start) / 15)\n    return diffSlots * basePixel + (diffSlots - 1)\n  }\n\n  const blockSubtitle = (blockHeight: number) => {\n    if (blockHeight > 22) {\n      const startTime = format(new Date(event.startDate), 'HH:mm', {\n        locale: fr,\n      })\n      const endTime = format(new Date(event.endDate), 'HH:mm', {\n        locale: fr,\n      })\n      return (\n        <div className=\"pt-0.5\">\n          {`${startTime} - ${endTime}`}\n        </div>\n      )\n    }\n    return `, ${format(new Date(event.startDate), 'HH', {\n      locale: fr,\n    })}h`\n  }\n\n  const handleOnClickBlock = () => {\n    if (!timelineBlockRef.current) return\n    const { top, left, height, width } =\n      timelineBlockRef.current.getBoundingClientRect()\n\n    onClickTimelineBlock({\n      eventUid: event.eventUid,\n      top: top - 65,\n      left: left - 248,\n      height,\n      width,\n    })\n  }\n\n  const heightPx = getBlockHeight(event)\n\n  const widthPercent = 100 / event.colCount\n  const leftPercent = widthPercent * event.colIndex\n\n  const dStart = new Date(event.startDate)\n  const minutes = dStart.getMinutes()\n  const slotPx = 11\n  const offsetSlots = minutes / 15\n  const topPx = offsetSlots * slotPx\n\n  const colorClass = googleColorIdToClasses(event.colorId)\n\n  return (\n    <div\n      ref={timelineBlockRef}\n      style={{\n        position: 'absolute',\n        top: `${topPx}px`,\n        height: `${heightPx}px`,\n        width: `${widthPercent}%`,\n        left: `${leftPercent}%`,\n        zIndex: 30 + index,\n      }}\n      className={`rounded-md overflow-x-hidden px-2.5 pt-0.5 cursor-pointer text-xs ${colorClass}`}\n      onClick={handleOnClickBlock}\n    >\n      <div className=\"min-w-0 font-normal truncate\">\n        {event.title}\n        {blockSubtitle(heightPx)}\n      </div>\n    </div>\n  )\n}\n\n/* ---------- Algo colonne “façon Google” ---------- */\n\nfunction overlap(a: UiEvent, b: UiEvent): boolean {\n  const aStart = new Date(a.startDate)\n  const aEnd = new Date(a.endDate)\n  const bStart = new Date(b.startDate)\n  const bEnd = new Date(b.endDate)\n\n  return isBefore(aStart, bEnd) && isBefore(bStart, aEnd)\n}\n\nfunction getMaxOverlap(group: UiEvent[]): number {\n  const points: { time: Date; type: 'start' | 'end' }[] = []\n  group.forEach(e => {\n    points.push({ time: new Date(e.startDate), type: 'start' })\n    points.push({ time: new Date(e.endDate), type: 'end' })\n  })\n  points.sort((a, b) => a.time.getTime() - b.time.getTime())\n\n  let cur = 0\n  let max = 0\n  points.forEach(p => {\n    if (p.type === 'start') {\n      cur += 1\n      if (cur > max) max = cur\n    } else {\n      cur -= 1\n    }\n  })\n  return Math.max(max, 1)\n}\n\nfunction layoutDayEvents(events: UiEvent[]): DayEventsByHour {\n  const normalEvents = events.filter(e => !e.isAllDay)\n\n  const sorted = normalEvents.slice().sort((a, b) =>\n    isBefore(new Date(a.startDate), new Date(b.startDate)) ? -1 : 1,\n  )\n\n  type LaidOutEvent = TimelineBlockEvent\n  const laidOut: LaidOutEvent[] = []\n\n  let group: UiEvent[] = []\n\n  const flushGroup = () => {\n    if (group.length === 0) return\n\n    const maxCols = getMaxOverlap(group)\n\n    const cols: UiEvent[][] = []\n    group.forEach(ev => {\n      let placed = false\n      for (let c = 0; c < cols.length; c++) {\n        const last = cols[c][cols[c].length - 1]\n        if (!overlap(last, ev)) {\n          cols[c].push(ev)\n          placed = true\n          break\n        }\n      }\n      if (!placed) cols.push([ev])\n    })\n\n    group.forEach(ev => {\n      const start = new Date(ev.startDate)\n      const firstStart = new Date(group[0].startDate)\n\n      const evOverlapsFirst =\n        overlap(ev, group[0]) && start.getTime() > firstStart.getTime()\n\n      let colIndex = 0\n      let colCount = 1\n\n      if (ev === group[0] && !evOverlapsFirst) {\n        colIndex = 0\n        colCount = 1\n      } else {\n        for (let c = 0; c < cols.length; c++) {\n          if (cols[c].includes(ev)) {\n            colIndex = c\n            break\n          }\n        }\n        colCount = maxCols\n      }\n\n      laidOut.push({\n        eventUid: ev.id,\n        title: ev.title,\n        startDate: ev.startDate,\n        endDate: ev.endDate,\n        colorId: ev.colorId ?? null,\n        colIndex,\n        colCount,\n      })\n    })\n\n    group = []\n  }\n\n  sorted.forEach(ev => {\n    if (group.length === 0) {\n      group.push(ev)\n      return\n    }\n\n    const lastInGroup = group[group.length - 1]\n    const lastEnd = new Date(lastInGroup.endDate)\n    const curStart = new Date(ev.startDate)\n\n    if (isAfter(curStart, lastEnd)) {\n      flushGroup()\n      group.push(ev)\n    } else {\n      group.push(ev)\n    }\n  })\n  flushGroup()\n\n  const byHour: DayEventsByHour = {}\n  laidOut.forEach(e => {\n    const d = new Date(e.startDate)\n    const hour = d.getHours()\n    const minutes = d.getMinutes()\n\n    const minuteKey =\n      minutes < 15 ? 0 :\n      minutes < 30 ? 15 :\n      minutes < 45 ? 30 : 45\n\n    if (!byHour[hour]) byHour[hour] = {}\n    if (!byHour[hour][minuteKey]) byHour[hour][minuteKey] = []\n    byHour[hour][minuteKey].push(e)\n  })\n\n  return byHour\n}\n\n/* ---------- Composant principal semaine ---------- */\n\ninterface TimelineFullProps {\n  calendarViewType: CalendarViewType\n  targetDate: string\n  events: UiEvent[]\n  onChangeTargetDate: Dispatch<SetStateAction<string>>\n  onSelectEvent: Dispatch<SetStateAction<SelectedEventState>>\n  onClickNewEvent: (basis?: { startDate: string; endDate: string }) => void\n}\n\nexport default function TimelineFull({\n  calendarViewType,\n  targetDate,\n  events,\n  onSelectEvent,\n}: TimelineFullProps) {\n  const timelineHeaderRef = useRef<HTMLDivElement | null>(null)\n  const timelineRef = useRef<HTMLDivElement | null>(null)\n  const [targetDateRange, setTargetDateRange] = useState<Date[]>([])\n  const [timelineMaxHeight, setTimelineMaxHeight] = useState(\n    'calc(100vh - (65px + 43px))',\n  )\n  const [weekEventsByDay, setWeekEventsByDay] = useState<\n    Record<number, DayEventsByHour>\n  >({})\n\n  const onClickTimelineBlock = (payload: any) => {\n    onSelectEvent(payload)\n  }\n\n  const START_HOUR = 6\n  const END_HOUR = 19\n\n  useEffect(() => {\n    const getDayList = (\n      target: string,\n      viewType: CalendarViewType,\n    ): Date[] => {\n      switch (viewType) {\n        case CalendarViewTypes.WEEK_VIEW: {\n          const [start, end] = getDateRange(viewType, target)\n          return eachDayOfInterval({ start, end })\n        }\n        default:\n          return []\n      }\n    }\n\n    if (targetDate) {\n      setTargetDateRange(getDayList(targetDate, calendarViewType))\n    }\n  }, [targetDate, calendarViewType])\n\n  useEffect(() => {\n    if (calendarViewType !== CalendarViewTypes.WEEK_VIEW) return\n    if (!targetDate) return\n    if (targetDateRange.length === 0) return\n\n    const [rangeStart, rangeEnd] = getDateRange(\n      CalendarViewTypes.WEEK_VIEW,\n      targetDate,\n    )\n\n    const result: Record<number, DayEventsByHour> = {}\n\n    targetDateRange.forEach((colDate, dayIndex) => {\n      const dayStart = new Date(\n        colDate.getFullYear(),\n        colDate.getMonth(),\n        colDate.getDate(),\n        0,\n        0,\n        0,\n        0,\n      )\n      const dayEnd = new Date(\n        colDate.getFullYear(),\n        colDate.getMonth(),\n        colDate.getDate(),\n        23,\n        59,\n        59,\n        999,\n      )\n\n      const eventsForDay = events.filter(e => {\n        const start = new Date(e.startDate)\n\n        if (start < rangeStart || start > rangeEnd) return false\n\n        return start >= dayStart && start <= dayEnd\n      })\n\n      result[dayIndex] = layoutDayEvents(eventsForDay)\n    })\n\n    setWeekEventsByDay(result)\n  }, [events, targetDate, calendarViewType, targetDateRange])\n\n  useEffect(() => {\n    if (!timelineHeaderRef.current) return\n    const height =\n      timelineHeaderRef.current.getBoundingClientRect().height\n    setTimelineMaxHeight(`calc(100vh - (65px + ${height}px))`)\n  }, [targetDate, weekEventsByDay])\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {/* Header jours */}\n      <div ref={timelineHeaderRef} className=\"flex flex-col\">\n        <div className=\"flex justify-between w-full pl-14\">\n          {targetDateRange.map((date, i) => (\n            <div\n              key={i}\n              className={`\n                flex flex-col items-center justify-start\n                ${targetDateRange.length > 1 ? 'flex-1' : ''}\n                ${targetDateRange.length === 1 ? 'pl-3' : ''}\n              `}\n            >\n              <span className=\"flex items-center justify-center h-8 mt-2 font-medium text-gray-600\">\n                {format(new Date(date), 'EEE', { locale: fr }).toUpperCase()}\n              </span>\n              <span className=\"flex items-center justify-center text-2xl transition text-gray-700 w-10 h-10\">\n                {format(new Date(date), 'd', { locale: fr })}\n              </span>\n            </div>\n          ))}\n        </div>\n        <div className=\"w-full border-b border-l\" />\n      </div>\n\n      {/* Grille */}\n      <div\n        ref={timelineRef}\n        style={{ maxHeight: timelineMaxHeight }}\n        className=\"flex flex-auto overflow-y-auto\"\n      >\n        {/* colonne heures */}\n        <div>\n          {Array.from({ length: END_HOUR - START_HOUR + 1 }).map((_, idx) => {\n            const hour = START_HOUR + idx\n            const date = setMinutes(setHours(new Date(), hour), 0)\n            return (\n              <div\n                key={hour}\n                className=\"flex h-12 text-gray-500\"\n              >\n                <span className=\"text-right pt-3\">\n                  {format(date, 'HH:mm', { locale: fr })}\n                </span>\n                <div className=\"w-2 h-12\" />\n              </div>\n            )\n          })}\n        </div>\n\n        {/* colonnes jours */}\n        <div className=\"flex flex-auto border-l divide-x\">\n          {Array.from({ length: 7 }).map((_, dayIndex) => {\n            const byHour = weekEventsByDay[dayIndex] || {}\n            return (\n              <div\n                key={dayIndex}\n                className=\"flex-1\"\n              >\n                {Array.from({\n                  length: END_HOUR - START_HOUR + 1,\n                }).map((_, idx) => {\n                  const hour = START_HOUR + idx\n                  const segments = byHour[hour] || {}\n                  return (\n                    <div\n                      key={hour}\n                      className=\"relative w-full h-12 border-b\"\n                    >\n                      {Object.keys(segments).map(segKey => {\n                        const segEvents = segments[Number(segKey)] || []\n                        return segEvents.map((e, idx2) => (\n                          <TimelineBlock\n                            key={`${hour}-${segKey}-${idx2}`}\n                            index={idx2}\n                            event={e}\n                            onClickTimelineBlock={onClickTimelineBlock}\n                          />\n                        ))\n                      })}\n                    </div>\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2515, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/EventDetailModal.tsx"],"sourcesContent":["'use client'\n\nimport { format, isSameDay } from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useRef } from 'react'\nimport { MdClose, MdDelete, MdEdit, MdToday } from 'react-icons/md'\nimport IconButton from '../Common/Button/IconButton'\n\ninterface Event {\n  id?: string              // pour Google eventId si dispo\n  title: string\n  startDate: string\n  endDate: string\n  colorClass?: string\n  description: string\n  colorId?: string | null  // optionnel: colorId Google\n}\n\ninterface EventCreator {\n  displayName: string\n}\n\ninterface SelectedEvent {\n  event: Event\n  eventCreator: EventCreator\n  top: number\n  left: number\n}\n\ninterface EventDetailModalProps {\n  selectedEvent: SelectedEvent\n  onCloseModal: () => void\n  onEditEvent: (event: Event) => void\n  onDeleteEvent?: (event: Event) => void\n}\n\nexport default function EventDetailModal({\n  selectedEvent,\n  onCloseModal,\n  onEditEvent,\n  onDeleteEvent,\n}: EventDetailModalProps) {\n  const eventDetailModalRef = useRef<HTMLDivElement | null>(null)\n\n  const parseEventDate = (startDate: string, endDate: string): string => {\n    const start = new Date(startDate)\n    const end = new Date(endDate)\n\n    if (isSameDay(start, end)) {\n      return `${format(start, 'EEEE d MMMM', { locale: fr })} · ${format(\n        start,\n        'HH:mm',\n        { locale: fr },\n      )} – ${format(end, 'HH:mm', { locale: fr })}`\n    } else {\n      return `${format(start, 'd MMM yyyy HH:mm', {\n        locale: fr,\n      })} – ${format(end, 'd MMM yyyy HH:mm', { locale: fr })}`\n    }\n  }\n\n  const { event, eventCreator } = selectedEvent\n  const colorClass = event.colorClass\n\n  const handleEditClick = () => {\n    onEditEvent(event)\n  }\n\n  const handleDeleteClick = () => {\n    if (onDeleteEvent) {\n      onDeleteEvent(event)\n    }\n  }\n\n  return (\n    <div\n      ref={eventDetailModalRef}\n      style={{\n        top: selectedEvent.top,\n        left: selectedEvent.left,\n      }}\n      className=\"absolute z-50 py-2 transition bg-white rounded-md min-w-448 eventDetailModalBoxShadow\"\n    >\n      <div className=\"flex items-center justify-end px-1.5\">\n        <IconButton\n          size=\"small\"\n          label=\"Modifier\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdEdit size=\"20px\" color=\"gray\" />}\n          onClickHandler={handleEditClick}\n        />\n        <IconButton\n          size=\"small\"\n          label=\"Supprimer\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdDelete size=\"20px\" color=\"gray\" />}\n          onClickHandler={handleDeleteClick}\n        />\n        <IconButton\n          size=\"small\"\n          label=\"Fermer\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdClose size=\"20px\" color=\"gray\" />}\n          onClickHandler={onCloseModal}\n        />\n      </div>\n\n      <div>\n        <div className=\"flex px-5\">\n          <div className=\"flex items-start justify-center\">\n            <div\n              className={`mt-0.5 h-3.5 w-3.5 rounded-sm ${colorClass}`}\n            />\n          </div>\n          <div className=\"flex flex-col items-start justify-start flex-auto pl-6\">\n            <span className=\"text-xl leading-none\">\n              {event.title}\n            </span>\n            <span className=\"pt-2 text-xs font-normal text-gray-500\">\n              {parseEventDate(event.startDate, event.endDate)}\n            </span>\n            {event.description && (\n              <span className=\"pt-2 text-xs font-normal text-gray-700 whitespace-pre-wrap\">\n                {event.description}\n              </span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex px-4 pb-2 mt-4\">\n          <div className=\"pl-0.5 flex items-center justify-center\">\n            <MdToday size=\"20px\" color=\"gray\" />\n          </div>\n          <div className=\"flex items-start justify-start flex-auto pl-5 text-xs text-gray-500\">\n            {eventCreator.displayName}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAoCe,SAAS,iBAAiB,EACvC,aAAa,EACb,YAAY,EACZ,WAAW,EACX,aAAa,EACS;IACtB,MAAM,sBAAsB,IAAA,+MAAM,EAAwB;IAE1D,MAAM,iBAAiB,CAAC,WAAmB;QACzC,MAAM,QAAQ,IAAI,KAAK;QACvB,MAAM,MAAM,IAAI,KAAK;QAErB,IAAI,IAAA,qJAAS,EAAC,OAAO,MAAM;YACzB,OAAO,GAAG,IAAA,+JAAM,EAAC,OAAO,eAAe;gBAAE,QAAQ,iJAAE;YAAC,GAAG,GAAG,EAAE,IAAA,+JAAM,EAChE,OACA,SACA;gBAAE,QAAQ,iJAAE;YAAC,GACb,GAAG,EAAE,IAAA,+JAAM,EAAC,KAAK,SAAS;gBAAE,QAAQ,iJAAE;YAAC,IAAI;QAC/C,OAAO;YACL,OAAO,GAAG,IAAA,+JAAM,EAAC,OAAO,oBAAoB;gBAC1C,QAAQ,iJAAE;YACZ,GAAG,GAAG,EAAE,IAAA,+JAAM,EAAC,KAAK,oBAAoB;gBAAE,QAAQ,iJAAE;YAAC,IAAI;QAC3D;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG;IAChC,MAAM,aAAa,MAAM,UAAU;IAEnC,MAAM,kBAAkB;QACtB,YAAY;IACd;IAEA,MAAM,oBAAoB;QACxB,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;YACL,KAAK,cAAc,GAAG;YACtB,MAAM,cAAc,IAAI;QAC1B;QACA,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,+JAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,wJAAM;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACxC,gBAAgB;;;;;;kCAElB,8OAAC,+JAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,0JAAQ;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBAC1C,gBAAgB;;;;;;kCAElB,8OAAC,+JAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,8OAAC,yJAAO;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACzC,gBAAgB;;;;;;;;;;;;0BAIpB,8OAAC;;kCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,WAAW,CAAC,8BAA8B,EAAE,YAAY;;;;;;;;;;;0CAG5D,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDACb,MAAM,KAAK;;;;;;kDAEd,8OAAC;wCAAK,WAAU;kDACb,eAAe,MAAM,SAAS,EAAE,MAAM,OAAO;;;;;;oCAE/C,MAAM,WAAW,kBAChB,8OAAC;wCAAK,WAAU;kDACb,MAAM,WAAW;;;;;;;;;;;;;;;;;;kCAM1B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,yJAAO;oCAAC,MAAK;oCAAO,OAAM;;;;;;;;;;;0CAE7B,8OAAC;gCAAI,WAAU;0CACZ,aAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAMrC","debugId":null}},
    {"offset": {"line": 2742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/GoogleAgenda.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { startOfWeek, endOfWeek } from 'date-fns'\nimport PanelLeft from './Panel/PanelLeft'\nimport CreateEventModal, {\n  CreateEventPayload,\n} from '../Modal/CreateEventModal'\nimport Timeline from '../Timeline/Timeline'\nimport EventDetailModal from '../Modal/EventDetailModal'\nimport { CalendarViewTypes } from '../../utils/types'\n\nexport interface UiEvent {\n  id: string\n  title: string\n  description: string\n  location: string\n  startDate: string\n  endDate: string\n  isAllDay: boolean\n  colorId: string | null\n  google?: {\n    colorId: string | null\n    htmlLink: string | null\n    creatorName: string\n    attendees: {\n      email: string\n      displayName: string | null\n      responseStatus: string | null\n    }[]\n  }\n}\n\nexport interface SelectedEventState {\n  eventUid: string\n  top: number\n  left: number\n  height: number\n  width: number\n}\n\nexport default function GoogleAgenda() {\n  const [targetDate, setTargetDate] = useState<string>(\n    new Date().toString(),\n  )\n  const [calendarViewType] = useState(CalendarViewTypes.WEEK_VIEW)\n  const [events, setEvents] = useState<UiEvent[]>([])\n  const [isCreateEventModalOpen, setIsCreateEventModalOpen] = useState(false)\n  const [selectedEvent, setSelectedEvent] = useState<SelectedEventState>({\n    eventUid: '',\n    top: 0,\n    left: 0,\n    height: 0,\n    width: 0,\n  })\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\n\n  useEffect(() => {\n    const loadEvents = async () => {\n      try {\n        const date = new Date(targetDate)\n        const weekStart = startOfWeek(date, { weekStartsOn: 1 }) // lundi\n        const weekEnd = endOfWeek(date, { weekStartsOn: 1 })     // dimanche\n        const timeMin = weekStart.toISOString()\n        const timeMax = weekEnd.toISOString()\n        const res = await fetch(\n          `/api/google/events?timeMin=${encodeURIComponent(\n            timeMin,\n          )}&timeMax=${encodeURIComponent(timeMax)}`,\n        )\n\n        if (!res.ok) {\n          console.error('Erreur fetch /api/google/events', await res.text())\n          return\n        }\n\n        const data: UiEvent[] = await res.json()\n        setEvents(data)\n      } catch (e) {\n        console.error('Erreur loadEvents', e)\n      }\n    }\n\n    loadEvents()\n  }, [targetDate])\n\n  const handleOpenCreateModal = (basis?: {\n    startDate: string\n    endDate: string\n  }) => {\n    // si tu veux, tu peux passer basis à CreateEventModal plus tard\n    setIsCreateEventModalOpen(true)\n  }\n\n  const handleSaveEvent = async (payload: CreateEventPayload) => {\n    try {\n      const res = await fetch('/api/google/events', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!res.ok) {\n        console.error('Erreur POST /api/google/events', await res.text())\n        return\n      }\n\n      const created: UiEvent = await res.json()\n      setEvents(prev => [...prev, created])\n    } catch (e) {\n      console.error('Erreur handleSaveEvent', e)\n    } finally {\n      setIsCreateEventModalOpen(false)\n    }\n  }\n\n  const handleCloseEventDetailModal = () => {\n    setSelectedEvent(prev => ({\n      ...prev,\n      eventUid: '',\n    }))\n    setIsEditModalOpen(false)\n  }\n\n  function googleColorIdToClasses(colorId: string | null | undefined): string {\n  switch (colorId) {\n    case '1':  return 'bg-blue-500 text-white'\n    case '2':  return 'bg-green-500 text-white'\n    case '3':  return 'bg-purple-500 text-white'\n    case '4':  return 'bg-red-500 text-white'\n    case '5':  return 'bg-yellow-400 text-black'\n    case '6':  return 'bg-orange-500 text-white'\n    case '7':  return 'bg-teal-500 text-white'\n    case '8':  return 'bg-gray-500 text-white'\n    case '9':  return 'bg-indigo-500 text-white'\n    case '10': return 'bg-lime-500 text-black'\n    case '11': return 'bg-rose-500 text-white'\n    default:   return 'bg-sky-500 text-white'\n  }\n}\n\n\n  const selectedEventData =\n    selectedEvent.eventUid.length > 0\n      ? events.find(e => e.id === selectedEvent.eventUid)\n      : undefined\n\n  return (\n    <div className=\"flex flex-col w-full max-w-[1500px] mx-auto\">\n      <div className=\"flex gap-4\">\n        <PanelLeft\n          targetDate={targetDate}\n          setTargetDate={setTargetDate}\n          onClickNewEvent={handleOpenCreateModal}\n        />\n        <div className=\"w-full flex flex-col\">\n          <Timeline\n            calendarViewType={calendarViewType}\n            targetDate={targetDate}\n            events={events}\n            onChangeTargetDate={setTargetDate}\n            onSelectEvent={setSelectedEvent}\n            onClickNewEvent={handleOpenCreateModal}\n          />\n        </div>\n      </div>\n\n      <CreateEventModal\n        isOpen={isCreateEventModalOpen}\n        onClose={() => setIsCreateEventModalOpen(false)}\n        onSave={handleSaveEvent}\n      />\n\n      {selectedEventData && (\n        <>\n          <div className=\"absolute top-0 left-0 w-full h-full z-1\" />\n          <EventDetailModal\n  selectedEvent={{\n    ...selectedEvent,\n    event: {\n      id: selectedEventData.id,\n      title: selectedEventData.title,\n      startDate: selectedEventData.startDate,\n      endDate: selectedEventData.endDate,\n      colorClass: googleColorIdToClasses(selectedEventData.colorId),\n      description: selectedEventData.description,\n      colorId: selectedEventData.colorId ?? null,\n    },\n    eventCreator: {\n      displayName:\n        selectedEventData.google?.creatorName ?? 'Créé via GoogleAgenda',\n    },\n  }}\n  onCloseModal={handleCloseEventDetailModal}\n  onEditEvent={handleEditEvent}      // à définir dans le parent\n   // optionnel\n/>\n\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2964, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport RollingSlider from \"./components/Slider/RollingSlider\";\r\nimport { useData } from \"@/app/contexts/data\";\r\nimport { useUser, SignedOut, SignInButton } from \"@clerk/nextjs\";\r\nimport GoogleAgenda from \"./components/GoogleAgenda/GoogleAgenda\";\r\n\r\nexport default function Home() {\r\n  const { isLoaded, user } = useUser();\r\n  const data = useData();\r\n  if (!isLoaded) {\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen w-full\">\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent\"></div>\r\n        <p className=\"mt-4 text-lg font-medium text-gray-600\">Chargement en cours…</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  function normalizeRoles(role: unknown): string[] {\r\n    if (Array.isArray(role)) return role as string[];\r\n    if (typeof role === \"string\") return [role];\r\n    return [];\r\n  }\r\n  const roles = normalizeRoles(user?.publicMetadata?.role);\r\n  const filteredCategories = data.categories.filter(category => (category.allowedRoles ?? []).some(r => roles.includes(r)));\r\n  const uniqueCategories = Array.from( new Map(filteredCategories.map(cat => [cat.id ?? cat.name, cat])).values());\r\n  return (\r\n    <main className=\"flex flex-col w-full text-xl sm:pt-[5vh]\">\r\n      <GoogleAgenda/>\r\n      {uniqueCategories.length > 0 && (\r\n        <RollingSlider categories={uniqueCategories} />\r\n      )}\r\n      <SignedOut>\r\n        <SignInButton>\r\n          <button className=\"absolute top-[48%] left-[38%] p-4\">Se connecter</button>\r\n        </SignInButton>\r\n      </SignedOut>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAA,uKAAO;IAClC,MAAM,OAAO,IAAA,mIAAO;IACpB,IAAI,CAAC,UAAU;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;IAI9D;IACE,SAAS,eAAe,IAAa;QACnC,IAAI,MAAM,OAAO,CAAC,OAAO,OAAO;QAChC,IAAI,OAAO,SAAS,UAAU,OAAO;YAAC;SAAK;QAC3C,OAAO,EAAE;IACX;IACA,MAAM,QAAQ,eAAe,MAAM,gBAAgB;IACnD,MAAM,qBAAqB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAA,WAAY,CAAC,SAAS,YAAY,IAAI,EAAE,EAAE,IAAI,CAAC,CAAA,IAAK,MAAM,QAAQ,CAAC;IACrH,MAAM,mBAAmB,MAAM,IAAI,CAAE,IAAI,IAAI,mBAAmB,GAAG,CAAC,CAAA,MAAO;YAAC,IAAI,EAAE,IAAI,IAAI,IAAI;YAAE;SAAI,GAAG,MAAM;IAC7G,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,6JAAY;;;;;YACZ,iBAAiB,MAAM,GAAG,mBACzB,8OAAC,wJAAa;gBAAC,YAAY;;;;;;0BAE7B,8OAAC,sLAAS;0BACR,cAAA,8OAAC,2LAAY;8BACX,cAAA,8OAAC;wBAAO,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAKhE","debugId":null}}]
}