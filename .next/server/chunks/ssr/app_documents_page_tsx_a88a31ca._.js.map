{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/documents/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\ntype DocumentNode = {\r\n  type: \"folder\" | \"file\";\r\n  name: string;\r\n  url?: string;\r\n  path: string;\r\n};\r\n\r\nexport default function DocumentsPage() {\r\n  const [currentPrefix, setCurrentPrefix] = useState(\"\");\r\n  const [items, setItems] = useState<DocumentNode[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [history, setHistory] = useState<string[]>([]);\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    fetch(`/api/documents/list?prefix=${currentPrefix}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.error) {\r\n          console.error(\"Erreur API documents:\", data.error);\r\n          setItems([]);\r\n        } else {\r\n          setItems(data);\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Erreur fetch documents:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, [currentPrefix]);\r\n\r\n  const enterFolder = (path: string) => {\r\n    setHistory(prev => [...prev, currentPrefix]);\r\n    setCurrentPrefix(path.replace(/^documents\\/[^/]+\\//, \"\"));\r\n  };\r\n  const goBack = () => {\r\n    const prev = history.pop();\r\n    if (prev !== undefined) {\r\n      setHistory([...history]);\r\n      setCurrentPrefix(prev);\r\n    }\r\n  };\r\n  if (loading) return <div>Chargement...</div>;\r\n  return (\r\n    <main className=\"flex flex-col gap-12 p-6 w-full mx-auto max-w-[1000px] md:pt-[10vh] sm:pt-[10vh]\">\r\n      <section className=\"space-y-4\">\r\n        {history.length > 0 && (\r\n          <button onClick={goBack} className=\"text-blue-500 hover:underline mb-4\">‚Üê Retour</button>\r\n        )}\r\n        {items.length > 0 ? (\r\n          items.map((item, idx) => (\r\n            <div key={idx} className=\"p-4 bg-white rounded-lg shadow-md\">\r\n              {item.type === \"folder\" ? (\r\n                <div\r\n                  className=\"cursor-pointer font-semibold text-yellow-700\"\r\n                  onClick={() => enterFolder(item.path)}\r\n                >\r\n                  üìÅ {item.name}\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <h3 className=\"font-semibold\">{item.name}</h3>\r\n                  <Link className=\"text-blue-500 hover:underline\" href={item.url!}>T√©l√©charger</Link>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p>Aucun document disponible pour ce dossier.</p>\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAYe,SAAS;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,WAAW;QACX,MAAM,CAAC,2BAA2B,EAAE,eAAe,EAChD,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACJ,IAAI,KAAK,KAAK,EAAE;gBACd,QAAQ,KAAK,CAAC,yBAAyB,KAAK,KAAK;gBACjD,SAAS,EAAE;YACb,OAAO;gBACL,SAAS;YACX;YACA,WAAW;QACb,GACC,KAAK,CAAC,CAAA;YACL,QAAQ,KAAK,CAAC,2BAA2B;YACzC,WAAW;QACb;IACJ,GAAG;QAAC;KAAc;IAElB,MAAM,cAAc,CAAC;QACnB,WAAW,CAAA,OAAQ;mBAAI;gBAAM;aAAc;QAC3C,iBAAiB,KAAK,OAAO,CAAC,uBAAuB;IACvD;IACA,MAAM,SAAS;QACb,MAAM,OAAO,QAAQ,GAAG;QACxB,IAAI,SAAS,WAAW;YACtB,WAAW;mBAAI;aAAQ;YACvB,iBAAiB;QACnB;IACF;IACA,IAAI,SAAS,qBAAO,8OAAC;kBAAI;;;;;;IACzB,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAQ,WAAU;;gBAChB,QAAQ,MAAM,GAAG,mBAChB,8OAAC;oBAAO,SAAS;oBAAQ,WAAU;8BAAqC;;;;;;gBAEzE,MAAM,MAAM,GAAG,IACd,MAAM,GAAG,CAAC,CAAC,MAAM,oBACf,8OAAC;wBAAc,WAAU;kCACtB,KAAK,IAAI,KAAK,yBACb,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,YAAY,KAAK,IAAI;;gCACrC;gCACK,KAAK,IAAI;;;;;;iDAGf;;8CACE,8OAAC;oCAAG,WAAU;8CAAiB,KAAK,IAAI;;;;;;8CACxC,8OAAC,4JAAA,CAAA,UAAI;oCAAC,WAAU;oCAAgC,MAAM,KAAK,GAAG;8CAAG;;;;;;;;uBAX7D;;;;8CAiBZ,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAKb","debugId":null}}]
}