{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slide.tsx"],"sourcesContent":["import Image from 'next/image';\r\nimport Link from 'next/link';\r\n\r\ntype SliderProps = {\r\n  name: string;\r\n  img: string;\r\n  link: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport default function Slide({ name, img, link, external }: SliderProps) {\r\n  if (external) {\r\n    return (\r\n      <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" className='bg-white select-none flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n        {name && \r\n          <>\r\n            <div className='flex flex-col gap-1'>\r\n              <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n            </div>      \r\n            {img && \r\n              <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n            }\r\n          </>    \r\n        }  \r\n      </a>\r\n    );\r\n  }\r\n  return (\r\n    <Link href={link} className='select-none bg-white flex items-end xl:hover:scale-105 lg:hover:scale-105 h-[400px] md:h-[300px] md:min-w-[120px] min-w-[250px] sm:h-[500px] sm:min-w-[280px] rounded-3xl m-3 p-4 sm:cursor-grab sm:active:cursor-grabbing relative overflow-hidden transition ease-in-out duration-300'>\r\n      {name && \r\n        <>\r\n          <div className='flex flex-col gap-1'>\r\n            <p className='md:text-2xl text-4xl font-bold z-[2]'>{name}</p>\r\n          </div>      \r\n          {img && \r\n            <Image src={img} fill alt={name} style={{objectFit:\"contain\"}} priority className='rounded-3xl select-none pointer-events-none' sizes='35vw'/>\r\n          }\r\n        </>    \r\n      }  \r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AASe,SAAS,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAe;IACtE,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAE,MAAM;YAAM,QAAO;YAAS,KAAI;YAAsB,WAAU;sBAChE,sBACC;;kCACE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAwC;;;;;;;;;;;oBAEtD,qBACC,8OAAC,wIAAK;wBAAC,KAAK;wBAAK,IAAI;wBAAC,KAAK;wBAAM,OAAO;4BAAC,WAAU;wBAAS;wBAAG,QAAQ;wBAAC,WAAU;wBAA8C,OAAM;;;;;;;;;;;;;IAMlJ;IACA,qBACE,8OAAC,uKAAI;QAAC,MAAM;QAAM,WAAU;kBACzB,sBACC;;8BACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;gBAEtD,qBACC,8OAAC,wIAAK;oBAAC,KAAK;oBAAK,IAAI;oBAAC,KAAK;oBAAM,OAAO;wBAAC,WAAU;oBAAS;oBAAG,QAAQ;oBAAC,WAAU;oBAA8C,OAAM;;;;;;;;;;;;;AAMlJ","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport Slide from \"./Slide\";\r\n\r\nexport type Category = {\r\n  id: number;\r\n  name: string;\r\n  link: string;\r\n  img: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport type SliderProps = {\r\n  items: Category[];\r\n};\r\n\r\nexport default function Slider({ items }: SliderProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startX, setStartX] = useState(0);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (containerRef.current) {\r\n      setIsDragging(true);\r\n      setStartX(e.pageX);\r\n      setScrollLeft(containerRef.current.scrollLeft);\r\n    }\r\n  };\r\n  const handleMouseUp = () => { setIsDragging(false); };\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !containerRef.current) return;\r\n    const x = e.pageX;\r\n    const diffX = x - startX;\r\n    const newScrollLeft = scrollLeft - diffX;\r\n    containerRef.current.scrollLeft = newScrollLeft;\r\n  };\r\n  return (\r\n    <div ref={containerRef} className=\"xl:grid-cols-4 lg:grid-cols-3 grid md:grid-cols-3 sm:flex sm:items-center sm:overflow-x-scroll sm:snap-x sm:snap-mandatory sm:cursor-grab select-none sm:h-[550px]\" onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove}>\r\n      {items.map((category) => (\r\n        <Slide name={category.name} key={category.id} link={category.link} img={category.img} external={category.external}/>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBe,SAAS,OAAO,EAAE,KAAK,EAAe;IACnD,MAAM,eAAe,IAAA,+MAAM,EAAwB;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,kBAAkB,CAAC;QACvB,IAAI,aAAa,OAAO,EAAE;YACxB,cAAc;YACd,UAAU,EAAE,KAAK;YACjB,cAAc,aAAa,OAAO,CAAC,UAAU;QAC/C;IACF;IACA,MAAM,gBAAgB;QAAQ,cAAc;IAAQ;IACpD,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,cAAc,CAAC,aAAa,OAAO,EAAE;QAC1C,MAAM,IAAI,EAAE,KAAK;QACjB,MAAM,QAAQ,IAAI;QAClB,MAAM,gBAAgB,aAAa;QACnC,aAAa,OAAO,CAAC,UAAU,GAAG;IACpC;IACA,qBACE,8OAAC;QAAI,KAAK;QAAc,WAAU;QAAqK,aAAa;QAAiB,WAAW;QAAe,cAAc;QAAe,aAAa;kBACtS,MAAM,GAAG,CAAC,CAAC,yBACV,8OAAC,gJAAK;gBAAC,MAAM,SAAS,IAAI;gBAAoB,MAAM,SAAS,IAAI;gBAAE,KAAK,SAAS,GAAG;gBAAE,UAAU,SAAS,QAAQ;eAAhF,SAAS,EAAE;;;;;;;;;;AAIpD","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/RollingSlider.tsx"],"sourcesContent":["import Slider, { Category } from \"./Slider\";\r\ntype RollingSliderProps = {\r\n  categories: Category[];\r\n};\r\nexport default function RollingSlider({ categories }: RollingSliderProps) {\r\n  if (!categories || categories.length === 0) {\r\n    return <div className=\"text-center py-4\">Aucune cat√©gorie disponible pour votre r√¥le</div>;\r\n  }\r\n  return (\r\n    <section id=\"slideshow\" className=\"w-full self-center mx-auto max-w-[1500px]\">\r\n      <Slider items={categories} />\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAIe,SAAS,cAAc,EAAE,UAAU,EAAsB;IACtE,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QAC1C,qBAAO,8OAAC;YAAI,WAAU;sBAAmB;;;;;;IAC3C;IACA,qBACE,8OAAC;QAAQ,IAAG;QAAY,WAAU;kBAChC,cAAA,8OAAC,iJAAM;YAAC,OAAO;;;;;;;;;;;AAGrB","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/GoogleAgenda.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\n\r\ninterface GoogleEvent {\r\n  id: string;\r\n  summary: string;\r\n  start: { dateTime?: string; date?: string };\r\n  end: { dateTime?: string; date?: string };\r\n}\r\n\r\ninterface GoogleCalendar {\r\n  id: string;\r\n  summary: string;\r\n  accessRole: string;\r\n}\r\n\r\nconst ALLOWED_ROLES = [\"administratif\", \"direction √©cole\", \"direction coll√®ge\", \"direction lyc√©e\"];\r\n\r\nfunction getWeekDates(baseDate: Date) {\r\n  const startOfWeek = new Date(baseDate);\r\n  startOfWeek.setDate(baseDate.getDate() - baseDate.getDay());\r\n  return Array.from({ length: 7 }, (_, i) => {\r\n    const d = new Date(startOfWeek);\r\n    d.setDate(startOfWeek.getDate() + i);\r\n    return d;\r\n  });\r\n}\r\n\r\nfunction formatTime(dateStr: string) {\r\n  const date = new Date(dateStr);\r\n  return date.toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" });\r\n}\r\n\r\nexport default function GoogleAgenda() {\r\n  const { isLoaded, user } = useUser();\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const [tokens, setTokens] = useState<any>(null);\r\n  const [calendars, setCalendars] = useState<GoogleCalendar[]>([]);\r\n  const [selectedCalendar, setSelectedCalendar] = useState<string>(\"\");\r\n  const [events, setEvents] = useState<GoogleEvent[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [weekStart, setWeekStart] = useState(new Date());\r\n  const [modalEvent, setModalEvent] = useState<GoogleEvent | null>(null);\r\n  const [draggingEvent, setDraggingEvent] = useState<{id: string, offsetY: number} | null>(null);\r\n  const calendarRef = useRef<HTMLDivElement>(null);\r\n  function hasAccess() {\r\n    if (!isLoaded || !user) return false;\r\n    const rolesRaw = user.publicMetadata?.role;\r\n    let roles: string[] = [];\r\n    if (Array.isArray(rolesRaw)) roles = rolesRaw;\r\n    else if (typeof rolesRaw === \"string\") roles = [rolesRaw];\r\n    return roles.some(r => ALLOWED_ROLES.includes(r));\r\n  }\r\n  useEffect(() => {\r\n    if (!hasAccess()) return;\r\n    async function fetchTokens() {\r\n      try {\r\n        const res = await fetch(\"/api/google/gettokens\");\r\n        if (!res.ok) return;\r\n        const data = await res.json();\r\n        const email = Object.keys(data)[0];\r\n        if (email) setTokens(data[email]);\r\n      } catch (err) { console.error(err); }\r\n    }\r\n    fetchTokens();\r\n  }, [isLoaded, user]);\r\n  useEffect(() => {\r\n    if (!tokens || !hasAccess()) return;\r\n    async function fetchCalendars() {\r\n      try {\r\n        const res = await fetch(\"https://www.googleapis.com/calendar/v3/users/me/calendarList\", {\r\n          headers: { Authorization: `Bearer ${tokens.accessToken}` }\r\n        });\r\n        const data = await res.json();\r\n        setCalendars(data.items || []);\r\n        if (data.items?.length) setSelectedCalendar(data.items[0].id);\r\n      } catch (err) { console.error(err); }\r\n    }\r\n    fetchCalendars();\r\n  }, [tokens]);\r\n  useEffect(() => {\r\n    if (!tokens || !selectedCalendar || !hasAccess()) return;\r\n    setLoading(true);\r\n    async function fetchEvents() {\r\n      try {\r\n        const startISO = new Date(weekStart).toISOString();\r\n        const endDate = new Date(weekStart);\r\n        endDate.setDate(endDate.getDate() + 7);\r\n        const endISO = endDate.toISOString();\r\n        const res = await fetch(\r\n          `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(selectedCalendar)}/events?timeMin=${startISO}&timeMax=${endISO}&singleEvents=true&orderBy=startTime`,\r\n          { headers: { Authorization: `Bearer ${tokens.accessToken}` } }\r\n        );\r\n        const data = await res.json();\r\n        setEvents(data.items || []);\r\n      } catch (err) { console.error(err); }\r\n      finally { setLoading(false); }\r\n    }\r\n    fetchEvents();\r\n  }, [tokens, selectedCalendar, weekStart]);\r\n  async function saveEvent(evt: GoogleEvent) {\r\n    if (!tokens || !selectedCalendar) return;\r\n    const method = evt.id ? \"PUT\" : \"POST\";\r\n    const url = evt.id  ? `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(selectedCalendar)}/events/${evt.id}` : `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(selectedCalendar)}/events`;\r\n    try {\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { Authorization: `Bearer ${tokens.accessToken}`, \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          summary: evt.summary,\r\n          start: { dateTime: evt.start.dateTime },\r\n          end: { dateTime: evt.end.dateTime }\r\n        }),\r\n      });\r\n      const newEvent = await res.json();\r\n      setEvents(prev => method === \"POST\" ? [...prev, newEvent] : prev.map(e => e.id === newEvent.id ? newEvent : e));\r\n      setModalEvent(null);\r\n    } catch (err) { console.error(err); }\r\n  }\r\n  async function deleteEvent(evtId: string) {\r\n    if (!tokens || !selectedCalendar) return;\r\n    try {\r\n      await fetch(\r\n        `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(selectedCalendar)}/events/${evtId}`,\r\n        { method: \"DELETE\", headers: { Authorization: `Bearer ${tokens.accessToken}` } }\r\n      );\r\n      setEvents(prev => prev.filter(e => e.id !== evtId));\r\n    } catch (err) { console.error(err); }\r\n  }\r\n  function onMouseDown(evt: React.MouseEvent, eventId: string) {\r\n    const rect = (evt.target as HTMLElement).getBoundingClientRect();\r\n    setDraggingEvent({ id: eventId, offsetY: evt.clientY - rect.top });\r\n  }\r\n  function onMouseMove(evt: React.MouseEvent) {\r\n    if (!draggingEvent || !calendarRef.current) return;\r\n    const calendarRect = calendarRef.current.getBoundingClientRect();\r\n    const dayHeight = calendarRect.height;\r\n    const minutesPerPixel = 24*60 / dayHeight;\r\n    const newMinutes = (evt.clientY - calendarRect.top - draggingEvent.offsetY) * minutesPerPixel;\r\n    const dayIndex = Math.floor((evt.clientX - calendarRect.left) / (calendarRect.width / 7));\r\n    const newDate = new Date(weekStart);\r\n    newDate.setDate(newDate.getDate() + dayIndex);\r\n    newDate.setHours(0,0,0,0);\r\n    newDate.setMinutes(newMinutes);\r\n    setEvents(prev => prev.map(ev => ev.id === draggingEvent.id ? { ...ev, start: { dateTime: newDate.toISOString() } } : ev));\r\n  }\r\n  function onMouseUp() {\r\n    if (draggingEvent) {\r\n      const evt = events.find(e => e.id === draggingEvent.id);\r\n      if (evt) saveEvent(evt);\r\n    }\r\n    setDraggingEvent(null);\r\n  }\r\n  function prevWeek() {\r\n    const d = new Date(weekStart);\r\n    d.setDate(d.getDate() - 7);\r\n    setWeekStart(d);\r\n  }\r\n  function nextWeek() {\r\n    const d = new Date(weekStart);\r\n    d.setDate(d.getDate() + 7);\r\n    setWeekStart(d);\r\n  }\r\n  function today() { setWeekStart(new Date()); }\r\n  if (!hasAccess()) return null;\r\n  if (!tokens) return <a href=\"/api/google\" className=\"btn\">Connecter mon agenda Google</a>;\r\n  const days = getWeekDates(weekStart);\r\n  return (\r\n    <div onMouseMove={onMouseMove} onMouseUp={onMouseUp} className=\"hidden\">\r\n      <h2>Google Agenda</h2>\r\n      <div style={{ display: \"flex\", gap: \"1rem\", marginBottom: \"1rem\" }}>\r\n        <button onClick={prevWeek}>{\"<\"}</button>\r\n        <button onClick={today}>Aujourd&apos;hui</button>\r\n        <button onClick={nextWeek}>{\">\"}</button>\r\n\r\n        <select value={selectedCalendar} onChange={e => setSelectedCalendar(e.target.value)}>\r\n          {calendars.map(cal => (\r\n            <option key={cal.id} value={cal.id}>{cal.summary} ({cal.accessRole})</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {loading && <p>Chargement...</p>}\r\n\r\n      <div ref={calendarRef} style={{ display: \"flex\", border: \"1px solid #ccc\", height: \"600px\", position: \"relative\" }}>\r\n        <div style={{ flex: 1 }}>\r\n          {days.map(day => (\r\n            <div key={day.toDateString()} style={{ textAlign: \"center\", borderBottom: \"1px solid #ccc\" }}>\r\n              {day.toLocaleDateString(undefined, { weekday: \"short\", day: \"numeric\", month: \"short\" })}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {days.map((day) => (\r\n          <div key={day.toDateString()} style={{ flex: 1, borderLeft: \"1px solid #ccc\", position: \"relative\" }}>\r\n            {events.filter(ev => {\r\n              const evDate = ev.start.dateTime ? new Date(ev.start.dateTime) : null;\r\n              return evDate && evDate.toDateString() === day.toDateString();\r\n            }).map(ev => {\r\n              const start = new Date(ev.start.dateTime!);\r\n              const end = new Date(ev.end.dateTime!);\r\n              const top = (start.getHours()*60 + start.getMinutes())/ (24*60) * 600;\r\n              const height = (end.getTime() - start.getTime()) / (1000*60) / (24*60) * 600;\r\n              return (\r\n                <div key={ev.id} \r\n                  style={{\r\n                    position: \"absolute\", top, height, left: 2, right: 2, background: \"#90cdf4\", padding: \"2px\", borderRadius: \"4px\", cursor: \"move\"\r\n                  }}\r\n                  onMouseDown={(e) => onMouseDown(e, ev.id)}\r\n                  onDoubleClick={() => setModalEvent(ev)}\r\n                >\r\n                  {ev.summary}<br/>\r\n                  {formatTime(ev.start.dateTime!)} - {formatTime(ev.end.dateTime!)}\r\n                  <button onClick={() => deleteEvent(ev.id)} style={{ marginLeft: \"4px\" }}>üóëÔ∏è</button>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {modalEvent && (\r\n        <div style={{\r\n          position: \"fixed\", top:0, left:0, right:0, bottom:0, background:\"rgba(0,0,0,0.5)\", display:\"flex\", justifyContent:\"center\", alignItems:\"center\"\r\n        }}>\r\n          <form style={{ background:\"#fff\", padding:\"1rem\", borderRadius:\"8px\" }} onSubmit={e => {\r\n            e.preventDefault();\r\n            saveEvent(modalEvent);\r\n          }}>\r\n            <input type=\"text\" value={modalEvent.summary} onChange={e => setModalEvent({...modalEvent, summary:e.target.value})} required />\r\n            <input type=\"datetime-local\" value={modalEvent.start.dateTime?.slice(0,16)} onChange={e => setModalEvent({...modalEvent, start:{dateTime:e.target.value}})} required />\r\n            <input type=\"datetime-local\" value={modalEvent.end.dateTime?.slice(0,16)} onChange={e => setModalEvent({...modalEvent, end:{dateTime:e.target.value}})} required />\r\n            <button type=\"submit\">Enregistrer</button>\r\n            <button type=\"button\" onClick={()=>setModalEvent(null)}>Annuler</button>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 713, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport RollingSlider from \"./components/Slider/RollingSlider\";\r\nimport { useData } from \"@/app/contexts/data\";\r\nimport { useUser, SignedOut, SignInButton } from \"@clerk/nextjs\";\r\nimport GoogleAgenda from \"./components/GoogleAgenda/GoogleAgenda\";\r\n\r\nexport default function Home() {\r\n  const { isLoaded, user } = useUser();\r\n  const data = useData();\r\n  if (!isLoaded) {\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen w-full\">\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent\"></div>\r\n        <p className=\"mt-4 text-lg font-medium text-gray-600\">Chargement en cours‚Ä¶</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  function normalizeRoles(role: unknown): string[] {\r\n    if (Array.isArray(role)) return role as string[];\r\n    if (typeof role === \"string\") return [role];\r\n    return [];\r\n  }\r\n  const roles = normalizeRoles(user?.publicMetadata?.role);\r\n  const filteredCategories = data.categories.filter(category =>\r\n    (category.allowedRoles ?? []).some(r => roles.includes(r))\r\n  );\r\n  const uniqueCategories = Array.from( new Map(filteredCategories.map(cat => [cat.id ?? cat.name, cat])).values());\r\n  return (\r\n    <main className=\"flex flex-col w-full text-xl sm:pt-[5vh]\">\r\n      <GoogleAgenda/>\r\n      {uniqueCategories.length > 0 && (\r\n        <RollingSlider categories={uniqueCategories} />\r\n      )}\r\n      <SignedOut>\r\n        <SignInButton>\r\n          <button className=\"absolute top-[48%] left-[38%] p-4\">Se connecter</button>\r\n        </SignInButton>\r\n      </SignedOut>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAA,uKAAO;IAClC,MAAM,OAAO,IAAA,mIAAO;IACpB,IAAI,CAAC,UAAU;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;IAI9D;IACE,SAAS,eAAe,IAAa;QACnC,IAAI,MAAM,OAAO,CAAC,OAAO,OAAO;QAChC,IAAI,OAAO,SAAS,UAAU,OAAO;YAAC;SAAK;QAC3C,OAAO,EAAE;IACX;IACA,MAAM,QAAQ,eAAe,MAAM,gBAAgB;IACnD,MAAM,qBAAqB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAA,WAChD,CAAC,SAAS,YAAY,IAAI,EAAE,EAAE,IAAI,CAAC,CAAA,IAAK,MAAM,QAAQ,CAAC;IAEzD,MAAM,mBAAmB,MAAM,IAAI,CAAE,IAAI,IAAI,mBAAmB,GAAG,CAAC,CAAA,MAAO;YAAC,IAAI,EAAE,IAAI,IAAI,IAAI;YAAE;SAAI,GAAG,MAAM;IAC7G,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,6JAAY;;;;;YACZ,iBAAiB,MAAM,GAAG,mBACzB,8OAAC,wJAAa;gBAAC,YAAY;;;;;;0BAE7B,8OAAC,sLAAS;0BACR,cAAA,8OAAC,2LAAY;8BACX,cAAA,8OAAC;wBAAO,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAKhE","debugId":null}}]
}