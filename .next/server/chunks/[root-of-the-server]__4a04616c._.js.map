{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/api/reservation-rooms/reservations/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { S3Client, GetObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { Readable } from \"stream\";\r\n\r\nconst s3 = new S3Client({ region: process.env.REGION });\r\n\r\nasync function streamToString(stream: Readable | undefined): Promise<string> {\r\n  if (!stream) return \"\";\r\n  return new Promise((resolve, reject) => {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const chunks: any[] = [];\r\n    stream.on(\"data\", (chunk) => chunks.push(chunk));\r\n    stream.on(\"error\", reject);\r\n    stream.on(\"end\", () => resolve(Buffer.concat(chunks).toString(\"utf-8\")));\r\n  });\r\n}\r\n\r\nexport async function GET() {\r\n  try {\r\n    const cmd = new GetObjectCommand({\r\n      Bucket: process.env.BUCKET_NAME,\r\n      Key: \"reservation-rooms/reservations.json\",\r\n    });\r\n\r\n    const data = await s3.send(cmd);\r\n    const bodyStr = await streamToString(data.Body as Readable | undefined);\r\n    const reservations = JSON.parse(bodyStr || \"[]\");\r\n\r\n    return NextResponse.json({ reservations });\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  } catch (err: any) {\r\n    console.error(err);\r\n    return NextResponse.json({ error: err.message || \"Erreur serveur\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGA,MAAM,KAAK,IAAI,6JAAQ,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,MAAM;AAAC;AAErD,eAAe,eAAe,MAA4B;IACxD,IAAI,CAAC,QAAQ,OAAO;IACpB,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,8DAA8D;QAC9D,MAAM,SAAgB,EAAE;QACxB,OAAO,EAAE,CAAC,QAAQ,CAAC,QAAU,OAAO,IAAI,CAAC;QACzC,OAAO,EAAE,CAAC,SAAS;QACnB,OAAO,EAAE,CAAC,OAAO,IAAM,QAAQ,OAAO,MAAM,CAAC,QAAQ,QAAQ,CAAC;IAChE;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,IAAI,qKAAgB,CAAC;YAC/B,QAAQ,QAAQ,GAAG,CAAC,WAAW;YAC/B,KAAK;QACP;QAEA,MAAM,OAAO,MAAM,GAAG,IAAI,CAAC;QAC3B,MAAM,UAAU,MAAM,eAAe,KAAK,IAAI;QAC9C,MAAM,eAAe,KAAK,KAAK,CAAC,WAAW;QAE3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAa;IACxC,8DAA8D;IAChE,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO,IAAI;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACrF;AACF","debugId":null}}]
}