{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/api/ecoledirecte/route.ts"],"sourcesContent":["// /pages/api/ecoledirecte.ts\r\nimport type { NextApiRequest, NextApiResponse } from \"next\";\r\n// @ts-ignore\r\n\r\nimport { Session } from \"api-ecoledirecte\";\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  if (req.method !== \"POST\") {\r\n    return res.status(405).json({ error: \"Méthode non autorisée\" });\r\n  }\r\n\r\n  const { identifiant, motdepasse } = req.body;\r\n\r\n  if (!identifiant || !motdepasse) {\r\n    return res.status(400).json({ error: \"Identifiant et mot de passe requis\" });\r\n  }\r\n\r\n  const session = new Session();\r\n\r\n  try {\r\n    await session.login(identifiant, motdepasse);\r\n\r\n    // Exemple : récupérer les notes du premier compte\r\n    const notes = await session.accounts[0]?.fetchNotes();\r\n\r\n    res.status(200).json({ success: true, notes });\r\n  } catch (err: any) {\r\n    console.error(err);\r\n    res.status(500).json({ error: err?.message || \"Impossible de se connecter à EcoleDirecte\" });\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAE7B,aAAa;AAEb;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,IAAI,IAAI,MAAM,KAAK,QAAQ;QACzB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IAC/D;IAEA,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,IAAI,IAAI;IAE5C,IAAI,CAAC,eAAe,CAAC,YAAY;QAC/B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqC;IAC5E;IAEA,MAAM,UAAU,IAAI,yJAAO;IAE3B,IAAI;QACF,MAAM,QAAQ,KAAK,CAAC,aAAa;QAEjC,kDAAkD;QAClD,MAAM,QAAQ,MAAM,QAAQ,QAAQ,CAAC,EAAE,EAAE;QAEzC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;YAAM;QAAM;IAC9C,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC;QACd,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,KAAK,WAAW;QAA4C;IAC5F;AACF","debugId":null}}]
}