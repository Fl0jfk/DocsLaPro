{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slide.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\ntype SliderProps = {\r\n  name: string;\r\n  img: string;\r\n  link: string;\r\n  external?: boolean;\r\n  priority?: boolean;\r\n};\r\n\r\nexport default function Slide({\r\n  name,\r\n  img,\r\n  link,\r\n  external,\r\n  priority = false,\r\n}: SliderProps) {\r\n\r\n  const ImageBlock = (\r\n    img && (\r\n      <Image\r\n        src={img}\r\n        fill\r\n        alt={name}\r\n        sizes=\"35vw\"\r\n        priority={priority}\r\n        fetchPriority={priority ? \"high\" : \"auto\"}\r\n        className=\"rounded-3xl select-none pointer-events-none object-contain\"\r\n      />\r\n    )\r\n  );\r\n\r\n  const content = (\r\n    <>\r\n      <div className=\"flex flex-col gap-1 z-[2]\">\r\n        <p className=\"md:text-2xl text-4xl font-bold\">{name}</p>\r\n      </div>\r\n      {ImageBlock}\r\n    </>\r\n  );\r\n\r\n  const baseClass =\r\n    \"bg-white select-none flex items-end h-[400px] md:h-[300px] min-w-[250px] rounded-3xl m-3 p-4 relative overflow-hidden transition-transform duration-300 ease-in-out xl:hover:scale-105\";\r\n\r\n  return external ? (\r\n    <a href={link} target=\"_blank\" rel=\"noopener noreferrer\" className={baseClass}>\r\n      {content}\r\n    </a>\r\n  ) : (\r\n    <Link href={link} className={baseClass}>\r\n      {content}\r\n    </Link>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAUe,SAAS,MAAM,KAMhB;QANgB,EAC5B,IAAI,EACJ,GAAG,EACH,IAAI,EACJ,QAAQ,EACR,WAAW,KAAK,EACJ,GANgB;IAQ5B,MAAM,aACJ,qBACE,6LAAC,2IAAK;QACJ,KAAK;QACL,IAAI;QACJ,KAAK;QACL,OAAM;QACN,UAAU;QACV,eAAe,WAAW,SAAS;QACnC,WAAU;;;;;;IAKhB,MAAM,wBACJ;;0BACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAkC;;;;;;;;;;;YAEhD;;;IAIL,MAAM,YACJ;IAEF,OAAO,yBACL,6LAAC;QAAE,MAAM;QAAM,QAAO;QAAS,KAAI;QAAsB,WAAW;kBACjE;;;;;6BAGH,6LAAC,0KAAI;QAAC,MAAM;QAAM,WAAW;kBAC1B;;;;;;AAGP;KA3CwB","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/Slider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useRef } from \"react\";\r\nimport Slide from \"./Slide\";\r\n\r\nexport type Category = {\r\n  id: number;\r\n  name: string;\r\n  link: string;\r\n  img: string;\r\n  external?: boolean;\r\n};\r\n\r\nexport type SliderProps = { items: Category[]};\r\n\r\nexport default function Slider({ items }: SliderProps) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startX, setStartX] = useState(0);\r\n  const [scrollLeft, setScrollLeft] = useState(0);\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (containerRef.current) {\r\n      setIsDragging(true);\r\n      setStartX(e.pageX);\r\n      setScrollLeft(containerRef.current.scrollLeft);\r\n    }\r\n  };\r\n  const handleMouseUp = () => { setIsDragging(false); };\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (!isDragging || !containerRef.current) return;\r\n    const x = e.pageX;\r\n    const diffX = x - startX;\r\n    const newScrollLeft = scrollLeft - diffX;\r\n    containerRef.current.scrollLeft = newScrollLeft;\r\n  };\r\n  return (\r\n    <div ref={containerRef} className=\"xl:grid-cols-4 lg:grid-cols-3 grid md:grid-cols-3 sm:flex sm:items-center sm:overflow-x-scroll sm:snap-x sm:snap-mandatory sm:cursor-grab select-none sm:h-[550px]\" onMouseDown={handleMouseDown} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove}>\r\n      {items.map((category) => (\r\n        <Slide name={category.name} key={category.id} link={category.link} img={category.img} external={category.external}/>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAee,SAAS,OAAO,KAAsB;QAAtB,EAAE,KAAK,EAAe,GAAtB;;IAC7B,MAAM,eAAe,IAAA,uKAAM,EAAwB;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,kBAAkB,CAAC;QACvB,IAAI,aAAa,OAAO,EAAE;YACxB,cAAc;YACd,UAAU,EAAE,KAAK;YACjB,cAAc,aAAa,OAAO,CAAC,UAAU;QAC/C;IACF;IACA,MAAM,gBAAgB;QAAQ,cAAc;IAAQ;IACpD,MAAM,kBAAkB,CAAC;QACvB,IAAI,CAAC,cAAc,CAAC,aAAa,OAAO,EAAE;QAC1C,MAAM,IAAI,EAAE,KAAK;QACjB,MAAM,QAAQ,IAAI;QAClB,MAAM,gBAAgB,aAAa;QACnC,aAAa,OAAO,CAAC,UAAU,GAAG;IACpC;IACA,qBACE,6LAAC;QAAI,KAAK;QAAc,WAAU;QAAqK,aAAa;QAAiB,WAAW;QAAe,cAAc;QAAe,aAAa;kBACtS,MAAM,GAAG,CAAC,CAAC,yBACV,6LAAC,mJAAK;gBAAC,MAAM,SAAS,IAAI;gBAAoB,MAAM,SAAS,IAAI;gBAAE,KAAK,SAAS,GAAG;gBAAE,UAAU,SAAS,QAAQ;eAAhF,SAAS,EAAE;;;;;;;;;;AAIpD;GA3BwB;KAAA","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Slider/RollingSlider.tsx"],"sourcesContent":["import Slider, { Category } from \"./Slider\";\r\n\r\ntype RollingSliderProps = { categories: Category[]};\r\n\r\nexport default function RollingSlider({ categories }: RollingSliderProps) {\r\n  if (!categories || categories.length === 0) {\r\n    return <div className=\"text-center py-4\">Aucune catégorie disponible pour votre rôle</div>;\r\n  }\r\n  return (\r\n    <section id=\"slideshow\" className=\"w-full self-center mx-auto max-w-[1500px]\">\r\n      <Slider items={categories} />\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;;AAIe,SAAS,cAAc,KAAkC;QAAlC,EAAE,UAAU,EAAsB,GAAlC;IACpC,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QAC1C,qBAAO,6LAAC;YAAI,WAAU;sBAAmB;;;;;;IAC3C;IACA,qBACE,6LAAC;QAAQ,IAAG;QAAY,WAAU;kBAChC,cAAA,6LAAC,oJAAM;YAAC,OAAO;;;;;;;;;;;AAGrB;KATwB","debugId":null}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Button/IconButton.tsx"],"sourcesContent":["import { ReactNode, MouseEventHandler } from 'react'\n\ntype IconButtonSize = 'xs' | 'small' | 'medium'\ntype IconButtonInk = 'default' | 'black'\ntype TooltipLocation = 'left' | 'bottom' | 'top' | 'none'\n\nconst wrapperSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-9', width: 'w-9' },\n  medium: { height: 'h-10', width: 'w-10' },\n}\n\nconst inkSizeLookup: Record<IconButtonSize, { height: string; width: string }> = {\n  xs: { height: 'h-6', width: 'w-6' },\n  small: { height: 'h-10', width: 'w-10' },\n  medium: { height: 'h-11', width: 'w-11' },\n}\n\nconst inkHoverColorLookup: Record<IconButtonInk, string> = {\n  default: 'hover:bg-gray-400 group-hover:bg-opacity-10',\n  black: 'hover:bg-black group-hover:bg-opacity-10',\n}\n\ninterface IconButtonProps {\n  size: IconButtonSize\n  ink?: IconButtonInk\n  label: string\n  tooltipLocation: TooltipLocation\n  imgComponent: ReactNode\n  onClickHandler: MouseEventHandler<HTMLDivElement>\n}\n\nexport default function IconButton({\n  size,\n  ink = 'default',\n  label,\n  tooltipLocation,\n  imgComponent,\n  onClickHandler,\n}: IconButtonProps) {\n  return (\n    <div\n      className={`\n        relative\n        cursor-pointer\n        flex\n        justify-center\n        items-center\n        bg-transparent\n        group\n        ${wrapperSizeLookup[size].height}\n        ${wrapperSizeLookup[size].width}\n      `}\n      onClick={onClickHandler}\n    >\n      {imgComponent}\n      <div\n        className={`\n          absolute\n          rounded-full\n          top-1/2\n          left-1/2\n          transform\n          -translate-x-1/2\n          -translate-y-1/2\n          transition-all\n          ease-in-out\n          duration-300\n          ${inkHoverColorLookup[ink]}\n          z-10\n          ${inkSizeLookup[size].height}\n          ${inkSizeLookup[size].width}\n        `}\n      >\n        {tooltipLocation === 'left' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              top-1/2\n              right-14\n              transform\n              -translate-y-1/2\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'bottom' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              -bottom-8\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n        {tooltipLocation === 'top' && (\n          <div\n            className={`\n              absolute\n              w-max\n              p-2\n              bg-black\n              rounded-md\n              transform\n              left-1/2\n              -translate-x-1/2\n              bottom-full\n              bg-opacity-60\n              hidden\n              group-hover:block\n            `}\n          >\n            <p className=\"text-xs text-white m-0 p-0\">\n              {label}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAMA,MAAM,oBAA+E;IACnF,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAO,OAAO;IAAM;IACrC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,gBAA2E;IAC/E,IAAI;QAAE,QAAQ;QAAO,OAAO;IAAM;IAClC,OAAO;QAAE,QAAQ;QAAQ,OAAO;IAAO;IACvC,QAAQ;QAAE,QAAQ;QAAQ,OAAO;IAAO;AAC1C;AAEA,MAAM,sBAAqD;IACzD,SAAS;IACT,OAAO;AACT;AAWe,SAAS,WAAW,KAOjB;QAPiB,EACjC,IAAI,EACJ,MAAM,SAAS,EACf,KAAK,EACL,eAAe,EACf,YAAY,EACZ,cAAc,EACE,GAPiB;IAQjC,qBACE,6LAAC;QACC,WAAW,AAAC,0JASR,OADA,iBAAiB,CAAC,KAAK,CAAC,MAAM,EAAC,cACD,OAA9B,iBAAiB,CAAC,KAAK,CAAC,KAAK,EAAC;QAElC,SAAS;;YAER;0BACD,6LAAC;gBACC,WAAW,AAAC,wPAaR,OAFA,mBAAmB,CAAC,IAAI,EAAC,gCAGzB,OADA,aAAa,CAAC,KAAK,CAAC,MAAM,EAAC,gBACD,OAA1B,aAAa,CAAC,KAAK,CAAC,KAAK,EAAC;;oBAG7B,oBAAoB,wBACnB,6LAAC;wBACC,WAAY;kCAeZ,cAAA,6LAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,0BACnB,6LAAC;wBACC,WAAY;kCAeZ,cAAA,6LAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;oBAIN,oBAAoB,uBACnB,6LAAC;wBACC,WAAY;kCAeZ,cAAA,6LAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOf;KA/GwB","debugId":null}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Calendar/Calendar.tsx"],"sourcesContent":["'use client'\n\nimport {\n  addMonths,\n  eachDayOfInterval,\n  endOfMonth,\n  endOfWeek,\n  format,\n  getDate,\n  getMonth,\n  getYear,\n  isSameDay,\n  isSameWeek,\n  setMonth,\n  startOfMonth,\n  startOfWeek,\n  subMonths,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useEffect, useRef, useState } from 'react'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\nimport IconButton from '../Button/IconButton'\n\ninterface CalendarProps {\n  targetDate: string | Date\n  onClickDate: (date: Date) => void\n  isModal?: boolean\n  onClose?: () => void\n}\n\nexport default function Calendar({\n  targetDate,\n  onClickDate,\n  isModal = false,\n  onClose = () => {},\n}: CalendarProps) {\n  const today = new Date()\n  const calendarRef = useRef<HTMLDivElement | null>(null)\n  const [calendarDate, setCalendarDate] = useState<Date>(new Date())\n\n  useEffect(() => {\n    const target = new Date(targetDate)\n    const diffMonths =\n      getMonth(target) - getMonth(calendarDate) +\n      12 * (target.getFullYear() - calendarDate.getFullYear())\n    if (diffMonths !== 0) {\n      setCalendarDate(current =>\n        diffMonths > 0\n          ? addMonths(current, diffMonths)\n          : subMonths(current, Math.abs(diffMonths)),\n      )\n    }\n  }, [targetDate])\n\n  useEffect(() => {\n    if (!isModal) return\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (calendarRef.current) {\n        const outsideClick = !calendarRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onClose()\n        }\n      }\n    }\n    document.addEventListener('click', checkOutsideClick)\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [isModal, onClose])\n\n  const onClickMoveMonth = (dir: 'prev' | 'next') => {\n    const newDate = new Date(calendarDate)\n    if (dir === 'prev') {\n      setCalendarDate(subMonths(newDate, 1))\n    } else {\n      setCalendarDate(addMonths(newDate, 1))\n    }\n  }\n\n  const isEqualDate = (a: Date | string, b: Date | string): boolean => {\n    const dateA = new Date(a)\n    const dateB = new Date(b)\n    return isSameDay(dateA, dateB)\n  }\n\n  const gridHeader = ['L', 'M', 'M', 'J', 'V', 'S', 'D'].map((d, i) => (\n    <div\n      key={i}\n      className=\"flex items-center justify-center h-6 text-gray-500 bg-white\"\n    >\n      {d}\n    </div>\n  ))\n\n  const gridDates = (startDate: Date | string = Date()) => {\n    const target = new Date(startDate)\n    const targetMonth = getMonth(target)\n    const targetYear = getYear(target)\n\n    const month = setMonth(\n      new Date(targetYear, 0, 1),\n      targetMonth,\n    )\n\n    const monthRangeStart = startOfWeek(startOfMonth(month), {\n      weekStartsOn: 1,\n    })\n    const monthRangeEndRaw = endOfWeek(endOfMonth(month), {\n      weekStartsOn: 1,\n    })\n\n    // on génère les jours pour couvrir le mois (classique)\n    const allDays = eachDayOfInterval({\n      start: monthRangeStart,\n      end: monthRangeEndRaw,\n    })\n\n    // on regroupe par semaines (7 jours)\n    const weeks: Date[][] = []\n    for (let i = 0; i < allDays.length; i += 7) {\n      weeks.push(allDays.slice(i, i + 7))\n    }\n\n    // filtrage pour supprimer une éventuelle 7e ligne complètement \"mois suivant\"\n    const filteredWeeks = weeks.filter((week) => {\n      const hasCurrentMonthDay = week.some(\n        d => getMonth(d) === targetMonth && getYear(d) === targetYear,\n      )\n      if (hasCurrentMonthDay) return true\n\n      // garder la semaine qui contient la targetDate (si tu veux voir une semaine entamée)\n      const hasTargetWeek = week.some(d =>\n        isSameWeek(d, target, { weekStartsOn: 1 }),\n      )\n      return hasTargetWeek\n    })\n\n    const flatDays = filteredWeeks.flat()\n\n    const dynamicDateColor = (\n      today: Date,\n      date: Date,\n      targetDate: Date | string,\n      curDateMonth: number,\n      targetMonth: number,\n    ): string => {\n      const base ='flex items-center justify-center w-6 h-6 transition rounded-full'\n      if (\n        (isEqualDate(today, date) && isEqualDate(targetDate, date)) ||\n        isEqualDate(today, date)\n      ) {\n        // aujourd'hui (et sélectionné)\n        return base + 'bg-blue-500 hover:bg-blue-600 text-white '\n      }\n      if (isEqualDate(targetDate, date)) {\n        // date sélectionnée\n        return base + 'bg-blue-300 text-blue-800 hover:bg-blue-400'\n      }\n      if (curDateMonth !== targetMonth) {\n        // jours du mois précédent / suivant\n        return base + 'text-gray-400 hover:bg-gray-100'\n      }\n      // jours normaux du mois courant\n      return base + 'text-gray-900 hover:bg-gray-200'\n    }\n\n    const days = flatDays.map((date, i) => {\n      const curDateMonth = getMonth(date)\n      return (\n        <div\n          key={i}\n          className=\"flex items-center justify-center bg-white cursor-pointer\"\n          onClick={() => onClickDate(date)}\n        >\n          <p\n            className={dynamicDateColor(\n              today,\n              date,\n              targetDate,\n              curDateMonth,\n              targetMonth,\n            )}\n          >\n            {getDate(date)}\n          </p>\n        </div>\n      )\n    })\n\n    return days\n  }\n\n  return (\n    <div\n      ref={calendarRef}\n      className=\"px-4 pt-2 pb-6 bg-white\"\n    >\n      <div className=\"flex items-center justify-between pl-2.5 pr-1\">\n        <p>\n          {format(new Date(calendarDate), 'MMMM yyyy', {\n            locale: fr,\n          })}\n        </p>\n        <div className=\"flex\">\n          <IconButton\n            size=\"xs\"\n            label=\"Previous Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowLeft\n                size=\"20px\"\n                color=\"rgba(95, 105, 119)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('prev')}\n          />\n          <IconButton\n            size=\"xs\"\n            label=\"Next Month\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdKeyboardArrowRight\n                size=\"20px\"\n                color=\"rgba(80, 80, 60)\"\n              />\n            }\n            onClickHandler={() => onClickMoveMonth('next')}\n          />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-7 mt-2 gap-y-1\">\n        {gridHeader}\n        {gridDates(calendarDate)}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeftCalendar.tsx"],"sourcesContent":["'use client'\n\nimport Calendar from '../../Common/Calendar/Calendar'\n\ninterface PanelLeftCalendarProps {\n  targetDate: string\n  setTargetDate: (value: string) => void\n}\n\nexport default function PanelLeftCalendar({\n  targetDate,\n  setTargetDate,\n}: PanelLeftCalendarProps) {\n  const onClickDate = (date: Date) => {\n    setTargetDate(date.toString())\n  }\n\n  return (\n    <Calendar\n      targetDate={targetDate}\n      onClickDate={onClickDate}\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,kBAAkB,KAGjB;QAHiB,EACxC,UAAU,EACV,aAAa,EACU,GAHiB;IAIxC,MAAM,cAAc,CAAC;QACnB,cAAc,KAAK,QAAQ;IAC7B;IAEA,qBACE,6LAAC,kKAAQ;QACP,YAAY;QACZ,aAAa;;;;;;AAGnB;KAdwB","debugId":null}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/Panel/PanelLeft.tsx"],"sourcesContent":["'use client'\n\nimport { getHours, getMinutes, set } from 'date-fns'\nimport Image from 'next/image'\nimport PanelLeftCalendar from './PanelLeftCalendar'\n\ninterface PanelLeftProps {\n  targetDate: string\n  setTargetDate: (value: string) => void\n  onClickNewEvent: (basis?: { startDate: string; endDate: string }) => void\n}\n\nexport default function PanelLeft({\n  targetDate,\n  setTargetDate,\n  onClickNewEvent,\n}: PanelLeftProps) {\n  const onClickCreate = () => {\n    const now = new Date()\n    const newEventBaseDate = set(new Date(targetDate), {\n      hours: getHours(now),\n      minutes: getMinutes(now),\n    }).toString()\n\n    onClickNewEvent({\n      startDate: newEventBaseDate,\n      endDate: newEventBaseDate,\n    })\n  }\n\n  return (\n    <div>\n      <div className=\"pl-2 my-4\">\n        <button\n          className=\"flex items-center justify-center h-12 p-3.5 text-sm transition bg-white border rounded-full shadow-md border-opacity-30 min-w-56 hover:shadow-xl hover:bg-blue-50\"\n          onClick={onClickCreate}\n        >\n          <Image\n            src=\"/createIcon.png\"\n            height={32}\n            width={32}\n            alt=\"create-icon\"\n          />\n          <span className=\"pr-3 ml-3 font-normal tracking-wide text-gray-500\">\n            Créer\n          </span>\n        </button>\n      </div>\n      <PanelLeftCalendar targetDate={targetDate} setTargetDate={setTargetDate} />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAYe,SAAS,UAAU,KAIjB;QAJiB,EAChC,UAAU,EACV,aAAa,EACb,eAAe,EACA,GAJiB;IAKhC,MAAM,gBAAgB;QACpB,MAAM,MAAM,IAAI;QAChB,MAAM,mBAAmB,IAAA,4IAAG,EAAC,IAAI,KAAK,aAAa;YACjD,OAAO,IAAA,sJAAQ,EAAC;YAChB,SAAS,IAAA,0JAAU,EAAC;QACtB,GAAG,QAAQ;QAEX,gBAAgB;YACd,WAAW;YACX,SAAS;QACX;IACF;IAEA,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,WAAU;oBACV,SAAS;;sCAET,6LAAC,2IAAK;4BACJ,KAAI;4BACJ,QAAQ;4BACR,OAAO;4BACP,KAAI;;;;;;sCAEN,6LAAC;4BAAK,WAAU;sCAAoD;;;;;;;;;;;;;;;;;0BAKxE,6LAAC,8KAAiB;gBAAC,YAAY;gBAAY,eAAe;;;;;;;;;;;;AAGhE;KAvCwB","debugId":null}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/types.ts"],"sourcesContent":["export const EventRepeatTypes = { DAILY: 0, WEEKLY: 1, MONTHLY: 2,} as const\n\nexport type EventRepeatType =\n  (typeof EventRepeatTypes)[keyof typeof EventRepeatTypes]\n\nexport const EventInviteStatusTypes = {\n  PENDING: 0,\n  ACCEPTED: 1,\n  DECLINED: 2,\n} as const\n\nexport type EventInviteStatusType =\n  (typeof EventInviteStatusTypes)[keyof typeof EventInviteStatusTypes]\n\nexport const CalendarViewTypes = {\n  WEEK_VIEW: 1,\n} as const\n\nexport type CalendarViewType =\n  (typeof CalendarViewTypes)[keyof typeof CalendarViewTypes]\n\nexport const RepeatChangesTypes = {\n  CHANGE: 'change',\n  DELETE: 'delete',\n} as const\n\nexport type RepeatChangesType =\n  (typeof RepeatChangesTypes)[keyof typeof RepeatChangesTypes]\n\nexport const MINUTE_SEGMENT_INDEX = {\n  0: 0,\n  15: 1,\n  30: 2,\n  45: 3,\n} as const\n\n// \"0\" | \"15\" | \"30\" | \"45\"\nexport type MinuteSegmentKey = keyof typeof MINUTE_SEGMENT_INDEX\n\n// 0 | 1 | 2 | 3\nexport type MinuteIndex = (typeof MINUTE_SEGMENT_INDEX)[MinuteSegmentKey]\n\n// On cast d'abord vers unknown, puis vers MinuteSegmentKey[]\nexport const MINUTE_SEGMENT_KEYS =\n  Object.keys(MINUTE_SEGMENT_INDEX) as unknown as MinuteSegmentKey[]\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,mBAAmB;IAAE,OAAO;IAAG,QAAQ;IAAG,SAAS;AAAE;AAK3D,MAAM,yBAAyB;IACpC,SAAS;IACT,UAAU;IACV,UAAU;AACZ;AAKO,MAAM,oBAAoB;IAC/B,WAAW;AACb;AAKO,MAAM,qBAAqB;IAChC,QAAQ;IACR,QAAQ;AACV;AAKO,MAAM,uBAAuB;IAClC,GAAG;IACH,IAAI;IACJ,IAAI;IACJ,IAAI;AACN;AASO,MAAM,sBACX,OAAO,IAAI,CAAC","debugId":null}},
    {"offset": {"line": 754, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/utils/helpers.ts"],"sourcesContent":["import {\n  closestTo,\n  eachHourOfInterval,\n  endOfDay,\n  endOfWeek,\n  getHours,\n  getMinutes,\n  set as setDate,\n  startOfDay,\n  startOfWeek,\n} from 'date-fns'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n  EventRepeatTypes,\n  EventRepeatType,\n  MINUTE_SEGMENT_INDEX,\n  MINUTE_SEGMENT_KEYS,\n  MinuteSegmentKey,\n  MinuteIndex,\n\n} from './types'\n\nexport const repeatTypeStringLookup: Record<EventRepeatType | -1, string> = {\n  [-1]: 'Ne pas répéter',\n  [EventRepeatTypes.DAILY]: 'Journalier',\n  [EventRepeatTypes.WEEKLY]: 'Hebdomadaire',\n  [EventRepeatTypes.MONTHLY]: 'Mensuel',\n}\n\nexport const isValidTime = (strValue: string): [boolean, number, number] => {\n  const trimmed = strValue.trim()\n  const split = trimmed.split(':')\n\n  if (split.length !== 2) return [false, 0, 0]\n\n  const hour = Number(split[0])\n  const minutes = Number(split[1])\n\n  if (isNaN(hour) || isNaN(minutes)) return [false, 0, 0]\n  if (hour < 0 || hour > 23) return [false, 0, 0]\n  if (minutes < 0 || minutes > 59) return [false, 0, 0]\n\n  return [true, hour, minutes]\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const sortEventBlocks = <T extends Record<string, any>>(\n  events: T[],\n  key: keyof T,\n  isAscending = true,\n): T[] => {\n  const compFunc = (a: number | Date, b: number | Date, asc: boolean) =>\n    asc ? (a < b ? -1 : a > b ? 1 : 0) : (a < b ? 1 : a > b ? -1 : 0)\n\n  return events\n    .slice()\n    .sort((a, b) => {\n      if (key === 'startDate' || key === 'endDate' || key === 'createdAt') {\n        return compFunc(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          new Date(a[key] as any),\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          new Date(b[key] as any),\n          isAscending,\n        )\n      }\n\n      if (a[key] === b[key]) {\n        return compFunc(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          new Date(a['startDate'] as any),\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          new Date(b['startDate'] as any),\n          isAscending,\n        )\n      }\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      return compFunc(a[key] as any, b[key] as any, isAscending)\n    })\n}\n\nexport interface DayViewHourSegment {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  events: any[]\n  startColIndex: number\n  colCount: number\n  baseZIndex: number\n}\n\nexport type DayViewHours = Record<\n  number,\n  Record<MinuteSegmentKey, DayViewHourSegment>\n>\n\nexport const getBaseDayViewEvents = () => {\n  const hours: DayViewHours = Array(24)\n    .fill(null)\n    .map((_, i) => i)\n    .reduce<DayViewHours>((acc, cur) => {\n      const segment: Record<MinuteSegmentKey, DayViewHourSegment> = {\n        0: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        15: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        30: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n        45: {\n          events: [],\n          startColIndex: 0,\n          colCount: 1,\n          baseZIndex: 1,\n        },\n      }\n      acc[cur] = segment\n      return acc\n    }, {} as DayViewHours)\n\n  return {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    wholeDayEvents: [] as any[],\n    hours,\n  }\n}\n\nexport interface WeekDayEvents {\n  hours: DayViewHours\n}\n\nexport const getBaseWeekViewEvents = () => {\n  const weekArray = Array(7)\n    .fill(null)\n    .map((_, i) => i)\n\n  const days = weekArray.reduce<Record<number, DayViewHours>>((acc, cur) => {\n    const { hours } = getBaseDayViewEvents()\n    acc[cur] = { ...hours }\n    return acc\n  }, {})\n\n  const wholeDayEvents = weekArray.reduce<\n    Record<\n      number,\n      {\n        incomingRowsMatrix: Record<number, number>\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        events: any[]\n      }\n    >\n  >((acc, cur) => {\n    acc[cur] = {\n      incomingRowsMatrix: {},\n      events: [],\n    }\n    return acc\n  }, {})\n\n  return {\n    wholeDayEvents,\n    days,\n  }\n}\n\nexport const getUpdatedEventBlocksWithPlacement = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  events: any[],\n  incomingRowsMatrix: Record<number, number>,\n) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const list: any[] = []\n  let eventIndex = 0\n  let matrixIndex = 0\n\n  while (eventIndex < events.length) {\n    if (matrixIndex in incomingRowsMatrix) {\n      list.push({ isEmpty: true })\n    } else {\n      list.push({\n        ...events[eventIndex],\n        isEmpty: false,\n      })\n      eventIndex++\n    }\n    matrixIndex++\n  }\n\n  return list\n}\n\nexport const calculateIncomingRowMatrix = (\n  eventsByDay: Record<\n    number,\n    {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      events: any[]\n      incomingRowsMatrix: Record<number, number>\n    }\n  >,\n  isWeek = false,\n) => {\n  const container: typeof eventsByDay = { ...eventsByDay }\n  let baseIncomingRowsMatrix: Record<number, number> = {}\n  let count = 0\n  let rowIndex = 0\n  let keys = Object.keys(container).map(Number)\n  if (isWeek) {\n    const updated = keys.slice()\n    const temp = updated.shift()\n    if (temp !== undefined) updated.push(temp)\n    keys = updated\n  }\n\n  keys.forEach(day => {\n    if (count === 7) {\n      count = 0\n      baseIncomingRowsMatrix = {}\n    }\n\n    container[day] = {\n      ...container[day],\n      events: sortEventBlocks(container[day].events, 'duration', false),\n    }\n    const deletedKeys: number[] = []\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      if (baseIncomingRowsMatrix[keyNum] === 0) {\n        deletedKeys.push(keyNum)\n        delete baseIncomingRowsMatrix[keyNum]\n      }\n    })\n\n    if (deletedKeys.length > 0) {\n      rowIndex = Math.min(...deletedKeys)\n    }\n\n    container[day] = {\n      ...container[day],\n      incomingRowsMatrix: { ...baseIncomingRowsMatrix },\n    }\n\n    Object.keys(baseIncomingRowsMatrix).forEach(v => {\n      const keyNum = Number(v)\n      baseIncomingRowsMatrix[keyNum] = baseIncomingRowsMatrix[keyNum] - 1\n    })\n\n    container[day].events.forEach(e => {\n      if (e.duration > 0) {\n        baseIncomingRowsMatrix[rowIndex] = e.duration\n        rowIndex += 1\n        while (rowIndex in baseIncomingRowsMatrix) {\n          rowIndex += 1\n        }\n      }\n    })\n\n    count += 1\n  })\n\n  return container\n}\n\nexport const getDateRange = (\n  calendarViewType: CalendarViewType,\n  targetDate: string | Date,\n): [Date, Date] => {\n  const target = new Date(targetDate)\n\n  switch (calendarViewType) {\n    case CalendarViewTypes.WEEK_VIEW: {\n      const weekStart = startOfWeek(target, { weekStartsOn: 1 })\n      const weekEnd = endOfWeek(target, { weekStartsOn: 1 })\n      return [weekStart, endOfDay(weekEnd)]\n    }\n    default:\n      return [startOfDay(target), endOfDay(target)]\n  }\n}\n\nexport const getClosestIndexForDayViewEvents = (\n  date: Date,\n): [number, MinuteSegmentKey] => {\n  const ZERO = setDate(date, { minutes: 0 })\n  const FIFTEEN = setDate(date, { minutes: 15 })\n  const THIRTY = setDate(date, { minutes: 30 })\n  const FOURTYFIVE = setDate(date, { minutes: 45 })\n\n  const closest = closestTo(date, [ZERO, FIFTEEN, THIRTY, FOURTYFIVE])\n  if (!closest) {\n    return [getHours(date), 0]\n  }\n  const m = getMinutes(closest) as 0 | 15 | 30 | 45\n  const minuteKey = ((): MinuteSegmentKey => {\n    switch (m) {\n      case 0:\n        return 0\n      case 15:\n        return 15\n      case 30:\n        return 30\n      case 45:\n        return 45\n      default:\n        return 0\n    }\n  })()\n\n  return [getHours(date), minuteKey]\n}\n\nexport const findEventCoverage = (event: {\n  startDate: string\n  endDate: string\n}) => {\n  const coveredHours = eachHourOfInterval({\n    start: new Date(event.startDate),\n    end: new Date(event.endDate),\n  })\n\n  const startDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.startDate),\n  )[1]\n  const endDateMinuteKey = getClosestIndexForDayViewEvents(\n    new Date(event.endDate),\n  )[1]\n\n  if (coveredHours.length === 1) {\n    const startSeg = MINUTE_SEGMENT_INDEX[startDateMinuteKey]\n    const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n    const endSeg =\n      startSeg === endSegRaw ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n    return {\n      [coveredHours[0].toString()]: MINUTE_SEGMENT_KEYS.slice(\n        startSeg,\n        endSeg,\n      ) as MinuteSegmentKey[],\n    } as Record<string, MinuteSegmentKey[]>\n  }\n\n  // > 1h\n  const result = coveredHours\n    .map((hour, index) => {\n      if (index === 0) {\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            MINUTE_SEGMENT_INDEX[startDateMinuteKey],\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      if (index === coveredHours.length - 1) {\n        const endSegRaw = MINUTE_SEGMENT_INDEX[endDateMinuteKey]\n        const endSeg =\n          endSegRaw === 0 ? ((endSegRaw as MinuteIndex) + 1) : endSegRaw\n\n        return {\n          hour: hour.toString(),\n          minuteSegments: MINUTE_SEGMENT_KEYS.slice(\n            0,\n            endSeg,\n          ) as MinuteSegmentKey[],\n        }\n      }\n\n      return {\n        hour: hour.toString(),\n        minuteSegments: [...MINUTE_SEGMENT_KEYS] as MinuteSegmentKey[],\n      }\n    })\n    .reduce<Record<string, MinuteSegmentKey[]>>((acc, cur) => {\n      acc[cur.hour] = cur.minuteSegments\n      return acc\n    }, {})\n\n  return result\n}\n\nexport const reduceCoverages = (\n  coveragesArray: Record<string, MinuteSegmentKey[]>[],\n) => {\n  const reducedCoverage: Record<number, Record<MinuteSegmentKey, number>> = {}\n\n  coveragesArray.forEach(coverage => {\n    const hourKeys = Object.keys(coverage)\n\n    for (let i = 0; i < hourKeys.length; i++) {\n      const hourNum = getHours(new Date(hourKeys[i]))\n\n      if (!(hourNum in reducedCoverage)) {\n        reducedCoverage[hourNum] = {\n          0: 0,\n          15: 0,\n          30: 0,\n          45: 0,\n        }\n      }\n\n      const minuteSegments = coverage[hourKeys[i]] as MinuteSegmentKey[]\n\n      minuteSegments.forEach(segmentKey => {\n        reducedCoverage[hourNum][segmentKey] =\n          reducedCoverage[hourNum][segmentKey] + 1\n      })\n    }\n  })\n\n  return reducedCoverage\n}\n\nexport const calculateOverlap = (\n  reduceCoverage: Record<number, Record<MinuteSegmentKey, number>>,\n  hoursObject: DayViewHours,\n) => {\n  const coverageHours = Object.keys(reduceCoverage).map(Number)\n\n  coverageHours.forEach(hour => {\n    const coverageMinuteSegments =\n      Object.keys(reduceCoverage[hour]) as unknown as MinuteSegmentKey[]\n\n    coverageMinuteSegments.forEach(minute => {\n      const coverageCount = reduceCoverage[hour][minute]\n      const { events } = hoursObject[hour][minute]\n\n      if (events.length < coverageCount) {\n        const diff = coverageCount - events.length\n        hoursObject[hour][minute].colCount = diff + 1\n        hoursObject[hour][minute].startColIndex = diff\n        hoursObject[hour][minute].baseZIndex = diff\n      }\n    })\n  })\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Common/Dropdown/Dropdown.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\n\ninterface DropdownItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\ninterface DropdownProps {\n  data?: DropdownItem[]\n  onCloseDropdown: () => void\n}\n\nexport default function Dropdown({ data = [], onCloseDropdown,}: DropdownProps) {\n  const dropdownRef = useRef<HTMLDivElement | null>(null)\n  useEffect(() => {\n    const checkOutsideClick = (e: MouseEvent) => {\n      if (dropdownRef.current) {\n        const outsideClick = !dropdownRef.current.contains(e.target as Node)\n        if (outsideClick) {\n          onCloseDropdown()\n        }\n      }\n    }\n    document.addEventListener('click', checkOutsideClick)\n    return () => {\n      document.removeEventListener('click', checkOutsideClick)\n    }\n  }, [onCloseDropdown])\n  const handleOnClick = (handler: () => void) => {\n    handler()\n    onCloseDropdown()\n  }\n  return (\n    <div ref={dropdownRef} className=\"absolute left-0 z-50 py-2 bg-white rounded-md dropdownBoxShadow min-w-168 top-full\">\n      {data.map((d, i) => (\n        <div key={i} onClick={() => handleOnClick(d.onClickHandler)} className=\"flex items-center justify-between px-4 py-2 transition cursor-pointer hover:bg-gray-100\">\n          <div className=\"text-sm\">{d.leftLabel}</div>\n          <div className=\"text-sm text-gray-400\">{d.rightLabel}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;;AAae,SAAS,SAAS,KAA6C;QAA7C,EAAE,OAAO,EAAE,EAAE,eAAe,EAAiB,GAA7C;;IAC/B,MAAM,cAAc,IAAA,uKAAM,EAAwB;IAClD,IAAA,0KAAS;8BAAC;YACR,MAAM;wDAAoB,CAAC;oBACzB,IAAI,YAAY,OAAO,EAAE;wBACvB,MAAM,eAAe,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM;wBAC3D,IAAI,cAAc;4BAChB;wBACF;oBACF;gBACF;;YACA,SAAS,gBAAgB,CAAC,SAAS;YACnC;sCAAO;oBACL,SAAS,mBAAmB,CAAC,SAAS;gBACxC;;QACF;6BAAG;QAAC;KAAgB;IACpB,MAAM,gBAAgB,CAAC;QACrB;QACA;IACF;IACA,qBACE,6LAAC;QAAI,KAAK;QAAa,WAAU;kBAC9B,KAAK,GAAG,CAAC,CAAC,GAAG,kBACZ,6LAAC;gBAAY,SAAS,IAAM,cAAc,EAAE,cAAc;gBAAG,WAAU;;kCACrE,6LAAC;wBAAI,WAAU;kCAAW,EAAE,SAAS;;;;;;kCACrC,6LAAC;wBAAI,WAAU;kCAAyB,EAAE,UAAU;;;;;;;eAF5C;;;;;;;;;;AAOlB;GA9BwB;KAAA","debugId":null}},
    {"offset": {"line": 1226, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/CreateEventModal.tsx"],"sourcesContent":["'use client'\n\nimport {\n  endOfDay,\n  format,\n  getDate,\n  getHours,\n  getMinutes,\n  getMonth,\n  getYear,\n  isAfter,\n  isBefore,\n  set as setDate,\n  startOfDay,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useEffect, useRef, useState } from 'react'\nimport {\n  MdAccessTime,\n  MdArrowDropDown,\n  MdCheckBox,\n  MdCheckBoxOutlineBlank,\n  MdClose,\n  MdColorLens,\n  MdLocationOn,\n  MdSubject,\n} from 'react-icons/md'\nimport { v4 as uuid } from 'uuid'\nimport { isValidTime, repeatTypeStringLookup } from '../../utils/helpers'\nimport {\n  EventRepeatTypes,\n  EventRepeatType,\n} from '../../utils/types'\nimport IconButton from '../Common/Button/IconButton'\nimport Calendar from '../Common/Calendar/Calendar'\nimport Dropdown from '../Common/Dropdown/Dropdown'\n\ninterface RepeatTypeItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n\nexport interface CreateEventPayload {\n  id?: string\n  title: string\n  description: string\n  location: string\n  startDate: string\n  endDate: string\n  isAllDay: boolean\n  repeatType: -1 | EventRepeatType\n  colorId?: string | null\n}\n\ninterface CreateEventModalProps {\n  isOpen: boolean\n  onClose: () => void\n  onSave: (event: CreateEventPayload) => void\n  initialStartDate?: string\n  initialEndDate?: string\n  defaultColorId?: string | null    // ex: '1' pour bleu Google\n  isEdit?: boolean\n}\n\n// Liste des 11 couleurs Google (colorId 1–11) + classes Tailwind approximatives\nconst GOOGLE_COLORS: { id: string; label: string; className: string }[] = [\n  { id: '1',  label: 'Bleu',        className: 'bg-blue-500 text-white' },\n  { id: '2',  label: 'Vert clair',  className: 'bg-emerald-400 text-white' },\n  { id: '3',  label: 'Violet',      className: 'bg-purple-500 text-white' },\n  { id: '4',  label: 'Rouge',       className: 'bg-red-500 text-white' },\n  { id: '5',  label: 'Jaune',       className: 'bg-yellow-400 text-black' },\n  { id: '6',  label: 'Orange',      className: 'bg-orange-500 text-white' },\n  { id: '7',  label: 'Turquoise',   className: 'bg-teal-500 text-white' },\n  { id: '8',  label: 'Gris',        className: 'bg-gray-500 text-white' },\n  { id: '9',  label: 'Indigo',      className: 'bg-indigo-500 text-white' },\n  { id: '10', label: 'Vert',        className: 'bg-lime-500 text-black' },\n  { id: '11', label: 'Rose',        className: 'bg-rose-500 text-white' },\n]\n\nfunction getColorClass(colorId: string | null | undefined): string {\n  const found = GOOGLE_COLORS.find(c => c.id === colorId)\n  return found?.className ?? 'bg-sky-500 text-white'\n}\n\nexport default function CreateEventModal({\n  isOpen,\n  onClose,\n  onSave,\n  initialStartDate,\n  initialEndDate,\n  defaultColorId = '1',\n}: CreateEventModalProps) {\n  const startDateInputRef = useRef<HTMLInputElement | null>(null)\n  const endDateInputRef = useRef<HTMLInputElement | null>(null)\n\n  const [title, setTitle] = useState('')\n  const [location, setLocation] = useState('')\n  const [description, setDescription] = useState('')\n\n  const [startDate, setStartDate] = useState<string>(\n    initialStartDate ?? new Date().toISOString(),\n  )\n  const [startDateInputValue, setStartDateInputValue] = useState('')\n  const [showStartDateInput, setShowStartDateInput] = useState(false)\n  const [endDate, setEndDate] = useState<string>(\n    initialEndDate ?? new Date().toISOString(),\n  )\n  const [endDateInputValue, setEndDateInputValue] = useState('')\n  const [showEndDateInput, setShowEndDateInput] = useState(false)\n  const [isAllDay, setIsAllDay] = useState(false)\n  const [repeatType, setRepeatType] = useState<-1 | EventRepeatType>(-1)\n  const [colorId, setColorId] = useState<string | null>(defaultColorId)\n  const [isRepeatTypeDropdownOpen, setIsRepeatTypeDropdownOpen] =\n    useState(false)\n  const [isStartDateCalendarOpen, setIsStartDateCalendarOpen] = useState(false)\n  const [isEndDateCalendarOpen, setIsEndDateCalendarOpen] = useState(false)\n\n  const repeatTypeDropdownData: RepeatTypeItem[] = [\n    {\n      leftLabel: 'Ne se répète pas',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(-1)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Quotidien',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.DAILY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Hebdomadaire',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.WEEKLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Mensuel',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.MONTHLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n  ]\n\n  const onToggleAllDay = (newVal: boolean) => {\n    if (newVal) {\n      const updatedStartDate = startOfDay(new Date(startDate))\n      const updatedEndDate = endOfDay(new Date(endDate))\n      setStartDate(updatedStartDate.toISOString())\n      setEndDate(updatedEndDate.toISOString())\n    } else {\n      const now = new Date()\n      const curHour = getHours(now)\n      const curMin = getMinutes(now)\n      setStartDate(\n        setDate(new Date(startDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n      setEndDate(\n        setDate(new Date(endDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n    }\n\n    setIsAllDay(newVal)\n  }\n\n  const onChangeDate = (target: 'start' | 'end', newDateVal: Date) => {\n    const base = new Date(newDateVal)\n    const year = getYear(base)\n    const month = getMonth(base)\n    const date = getDate(base)\n    if (target === 'start') {\n      const updated = setDate(new Date(startDate), { year, month, date })\n      setStartDate(updated.toISOString())\n      if (isBefore(new Date(endDate), updated)) {\n        setEndDate(updated.toISOString())\n      }\n      setIsStartDateCalendarOpen(false)\n    } else {\n      const updated = setDate(new Date(endDate), { year, month, date })\n      setEndDate(updated.toISOString())\n      if (isBefore(updated, new Date(startDate))) {\n        setStartDate(updated.toISOString())\n      }\n      setIsEndDateCalendarOpen(false)\n    }\n  }\n\n  const onBlurInput = (target: 'start' | 'end', value: string) => {\n    const [valid, hours, minutes] = isValidTime(value)\n    if (target === 'start') {\n      if (valid) {\n        const newStartDate = setDate(new Date(startDate), {\n          hours,\n          minutes,\n        })\n        if (isAfter(newStartDate, new Date(endDate))) {\n          const newEndDate = setDate(new Date(endDate), {\n            hours,\n            minutes,\n          })\n          setEndDate(newEndDate.toISOString())\n        }\n\n        setStartDate(newStartDate.toISOString())\n      }\n\n      setShowStartDateInput(false)\n    } else {\n      if (valid) {\n        const newEndDate = setDate(new Date(endDate), { hours, minutes })\n        if (isBefore(newEndDate, new Date(startDate))) {\n          const newStartDate = setDate(new Date(startDate), {\n            hours,\n            minutes,\n          })\n          setStartDate(newStartDate.toISOString())\n        }\n        setEndDate(newEndDate.toISOString())\n      }\n      setShowEndDateInput(false)\n    }\n  }\n\n  const handleSaveClick = () => {\n    const payload: CreateEventPayload = {\n      id: uuid(),\n      title: title.length > 0 ? title : '(Sans titre)',\n      description,\n      location,\n      startDate,\n      endDate,\n      isAllDay,\n      repeatType,\n      colorId: colorId ?? undefined,\n    }\n     console.log('CreateEventModal payload =>', payload) \n    onSave(payload)\n    onClose()\n  }\n\n  useEffect(() => {\n    setStartDateInputValue(\n      format(new Date(startDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [startDate])\n\n  useEffect(() => {\n    setEndDateInputValue(\n      format(new Date(endDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [endDate])\n\n  useEffect(() => {\n    if (showStartDateInput && startDateInputRef.current) {\n      startDateInputRef.current.focus()\n    }\n    if (showEndDateInput && endDateInputRef.current) {\n      endDateInputRef.current.focus()\n    }\n  }, [showStartDateInput, showEndDateInput])\n\n  if (!isOpen) return null\n\n  const headerColorClass = getColorClass(colorId)\n\n  return (\n    <div className=\"fixed inset-0 z-40 flex items-center justify-center\">\n      <div\n        className=\"absolute inset-0 bg-black bg-opacity-20\"\n        onClick={onClose}\n      />\n\n      <div\n        className=\"\n          relative flex flex-col bg-white rounded-md h-580px min-w-448\n          createEventModalBoxShadow\n        \"\n      >\n        <div\n          className={`\n            flex items-center justify-between px-3 py-1 rounded-t-md bg-opacity-20 transition\n            ${headerColorClass}\n          `}\n        >\n          <IconButton\n            label=\"Fermer\"\n            size=\"small\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdClose size=\"24px\" color=\"rgba(75, 85, 99)\" />\n            }\n            onClickHandler={onClose}\n          />\n        </div>\n\n        <div className=\"pt-2\">\n          {/* Titre */}\n          <div className=\"flex py-4 pl-16 pr-5\">\n            <input\n              type=\"text\"\n              value={title}\n              placeholder=\"Ajouter un titre\"\n              onChange={e => setTitle(e.target.value)}\n              className=\"w-full text-2xl antialiased font-normal border-b outline-none\"\n            />\n          </div>\n\n          {/* Bloc date / heure */}\n          <div className=\"flex px-5 py-4\">\n            <div className=\"flex items-start justify-center\">\n              <MdAccessTime size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-col flex-auto pl-6 text-sm text-gray-500\">\n              <div className=\"flex items-center justify-start\">\n                {/* Start date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsStartDateCalendarOpen(true)}\n                  >\n                    {format(new Date(startDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isStartDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={startDate}\n                        onClickDate={newDate =>\n                          onChangeDate('start', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsStartDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Start time */}\n                {!isAllDay && (\n                  <div>\n                    {showStartDateInput ? (\n                      <input\n                        ref={startDateInputRef}\n                        type=\"text\"\n                        value={startDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setStartDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('start', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowStartDateInput(true)}\n                      >\n                        {format(new Date(startDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <span className=\"px-1\">-</span>\n\n                {/* End time */}\n                {!isAllDay && (\n                  <div>\n                    {showEndDateInput ? (\n                      <input\n                        ref={endDateInputRef}\n                        type=\"text\"\n                        value={endDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setEndDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('end', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowEndDateInput(true)}\n                      >\n                        {format(new Date(endDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* End date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsEndDateCalendarOpen(true)}\n                  >\n                    {format(new Date(endDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isEndDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={endDate}\n                        onClickDate={newDate =>\n                          onChangeDate('end', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsEndDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* All day */}\n              <div className=\"flex items-center mt-2 -ml-1\">\n                <div className=\"mr-1.5\">\n                  <IconButton\n                    label=\"Toute la journée\"\n                    size=\"small\"\n                    tooltipLocation=\"bottom\"\n                    imgComponent={\n                      isAllDay ? (\n                        <MdCheckBox size=\"24px\" color=\"gray\" />\n                      ) : (\n                        <MdCheckBoxOutlineBlank\n                          size=\"24px\"\n                          color=\"gray\"\n                        />\n                      )\n                    }\n                    onClickHandler={() => onToggleAllDay(!isAllDay)}\n                  />\n                </div>\n                <div>Toute la journée</div>\n              </div>\n\n              {/* Répétition */}\n              <div className=\"relative mt-2\">\n                <button\n                  className=\"flex px-2 py-1 -ml-1 transition rounded-md hover:bg-gray-100\"\n                  onClick={() => setIsRepeatTypeDropdownOpen(true)}\n                >\n                  <span className=\"mr-0.5\">\n                    {repeatTypeStringLookup[\n                      repeatType as -1 | EventRepeatType\n                    ]}\n                  </span>\n                  <MdArrowDropDown\n                    size=\"18px\"\n                    color=\"rgba(75, 85, 99)\"\n                  />\n                </button>\n                {isRepeatTypeDropdownOpen && (\n                  <Dropdown\n                    data={repeatTypeDropdownData}\n                    onCloseDropdown={() =>\n                      setIsRepeatTypeDropdownOpen(false)\n                    }\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Location */}\n          <div className=\"flex items-center px-5 py-4 border-t\">\n            <div>\n              <MdLocationOn size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <input\n                type=\"text\"\n                value={location}\n                placeholder=\"Lieu\"\n                onChange={e => setLocation(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none\"\n              />\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"flex px-5 py-4 border-t\">\n            <div>\n              <MdSubject size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <textarea\n                value={description}\n                placeholder=\"Description\"\n                onChange={e => setDescription(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none resize-none\"\n              />\n            </div>\n          </div>\n\n          {/* Couleur Google */}\n          <div className=\"flex px-5 py-4 border-t border-b\">\n            <div>\n              <MdColorLens size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-auto pl-6 flex-wrap gap-3 text-xs -mt-1.5\">\n              {GOOGLE_COLORS.map(c => (\n                <button\n                  key={c.id}\n                  type=\"button\"\n                  className={`\n                    flex flex-col items-center px-1 py-1.5 transition rounded-md cursor-pointer\n                    border border-transparent\n                    ${colorId === c.id ? 'border-gray-600' : ''}\n                  `}\n                  onClick={() => setColorId(c.id)}\n                >\n                  <span className=\"mb-1 tracking-wide text-gray-500 text-xxs\">\n                    {c.label}\n                  </span>\n                  <div\n                    className={`\n                      w-4 h-4 rounded-full\n                      ${c.className}\n                    `}\n                  />\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Boutons action */}\n        <div className=\"flex items-center justify-end px-4 py-3\">\n          <button\n            className={`\n              px-6 py-2 text-sm text-white bg-opacity-80 transition rounded-md\n              ${getColorClass(colorId)}\n            `}\n            onClick={handleSaveClick}\n          >\n            Enregistrer\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAUA;AACA;AACA;AAIA;AACA;AACA;;;AAnCA;;;;;;;;;;;AAiEA,gFAAgF;AAChF,MAAM,gBAAoE;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA4B;IACzE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAwB;IACrE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;CACvE;AAED,SAAS,cAAc,OAAkC;IACvD,MAAM,QAAQ,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACxC;IAAP,OAAO,CAAA,mBAAA,kBAAA,4BAAA,MAAO,SAAS,cAAhB,8BAAA,mBAAoB;AAC7B;AAEe,SAAS,iBAAiB,KAOjB;QAPiB,EACvC,MAAM,EACN,OAAO,EACP,MAAM,EACN,gBAAgB,EAChB,cAAc,EACd,iBAAiB,GAAG,EACE,GAPiB;;IAQvC,MAAM,oBAAoB,IAAA,uKAAM,EAA0B;IAC1D,MAAM,kBAAkB,IAAA,uKAAM,EAA0B;IAExD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EACxC,6BAAA,8BAAA,mBAAoB,IAAI,OAAO,WAAW;IAE5C,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EACpC,2BAAA,4BAAA,iBAAkB,IAAI,OAAO,WAAW;IAE1C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAuB,CAAC;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IACtD,MAAM,CAAC,0BAA0B,4BAA4B,GAC3D,IAAA,yKAAQ,EAAC;IACX,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,yKAAQ,EAAC;IACvE,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAC;IAEnE,MAAM,yBAA2C;QAC/C;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,CAAC;gBACf,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,KAAK;gBACpC,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,MAAM;gBACrC,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,OAAO;gBACtC,4BAA4B;YAC9B;QACF;KACD;IAED,MAAM,iBAAiB,CAAC;QACtB,IAAI,QAAQ;YACV,MAAM,mBAAmB,IAAA,0JAAU,EAAC,IAAI,KAAK;YAC7C,MAAM,iBAAiB,IAAA,sJAAQ,EAAC,IAAI,KAAK;YACzC,aAAa,iBAAiB,WAAW;YACzC,WAAW,eAAe,WAAW;QACvC,OAAO;YACL,MAAM,MAAM,IAAI;YAChB,MAAM,UAAU,IAAA,sJAAQ,EAAC;YACzB,MAAM,SAAS,IAAA,0JAAU,EAAC;YAC1B,aACE,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;gBAC3B,OAAO;gBACP,SAAS;YACX,GAAG,WAAW;YAEhB,WACE,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;gBACzB,OAAO;gBACP,SAAS;YACX,GAAG,WAAW;QAElB;QAEA,YAAY;IACd;IAEA,MAAM,eAAe,CAAC,QAAyB;QAC7C,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,OAAO,IAAA,oJAAO,EAAC;QACrB,MAAM,QAAQ,IAAA,sJAAQ,EAAC;QACvB,MAAM,OAAO,IAAA,oJAAO,EAAC;QACrB,IAAI,WAAW,SAAS;YACtB,MAAM,UAAU,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;gBAAE;gBAAM;gBAAO;YAAK;YACjE,aAAa,QAAQ,WAAW;YAChC,IAAI,IAAA,sJAAQ,EAAC,IAAI,KAAK,UAAU,UAAU;gBACxC,WAAW,QAAQ,WAAW;YAChC;YACA,2BAA2B;QAC7B,OAAO;YACL,MAAM,UAAU,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;gBAAE;gBAAM;gBAAO;YAAK;YAC/D,WAAW,QAAQ,WAAW;YAC9B,IAAI,IAAA,sJAAQ,EAAC,SAAS,IAAI,KAAK,aAAa;gBAC1C,aAAa,QAAQ,WAAW;YAClC;YACA,yBAAyB;QAC3B;IACF;IAEA,MAAM,cAAc,CAAC,QAAyB;QAC5C,MAAM,CAAC,OAAO,OAAO,QAAQ,GAAG,IAAA,yIAAW,EAAC;QAC5C,IAAI,WAAW,SAAS;YACtB,IAAI,OAAO;gBACT,MAAM,eAAe,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;oBAChD;oBACA;gBACF;gBACA,IAAI,IAAA,oJAAO,EAAC,cAAc,IAAI,KAAK,WAAW;oBAC5C,MAAM,aAAa,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;wBAC5C;wBACA;oBACF;oBACA,WAAW,WAAW,WAAW;gBACnC;gBAEA,aAAa,aAAa,WAAW;YACvC;YAEA,sBAAsB;QACxB,OAAO;YACL,IAAI,OAAO;gBACT,MAAM,aAAa,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;oBAAE;oBAAO;gBAAQ;gBAC/D,IAAI,IAAA,sJAAQ,EAAC,YAAY,IAAI,KAAK,aAAa;oBAC7C,MAAM,eAAe,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;wBAChD;wBACA;oBACF;oBACA,aAAa,aAAa,WAAW;gBACvC;gBACA,WAAW,WAAW,WAAW;YACnC;YACA,oBAAoB;QACtB;IACF;IAEA,MAAM,kBAAkB;QACtB,MAAM,UAA8B;YAClC,IAAI,IAAA,8LAAI;YACR,OAAO,MAAM,MAAM,GAAG,IAAI,QAAQ;YAClC;YACA;YACA;YACA;YACA;YACA;YACA,SAAS,oBAAA,qBAAA,UAAW;QACtB;QACC,QAAQ,GAAG,CAAC,+BAA+B;QAC5C,OAAO;QACP;IACF;IAEA,IAAA,0KAAS;sCAAC;YACR,uBACE,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,SAAS;gBACnC,QAAQ,oJAAE;YACZ;QAEJ;qCAAG;QAAC;KAAU;IAEd,IAAA,0KAAS;sCAAC;YACR,qBACE,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,SAAS;gBACjC,QAAQ,oJAAE;YACZ;QAEJ;qCAAG;QAAC;KAAQ;IAEZ,IAAA,0KAAS;sCAAC;YACR,IAAI,sBAAsB,kBAAkB,OAAO,EAAE;gBACnD,kBAAkB,OAAO,CAAC,KAAK;YACjC;YACA,IAAI,oBAAoB,gBAAgB,OAAO,EAAE;gBAC/C,gBAAgB,OAAO,CAAC,KAAK;YAC/B;QACF;qCAAG;QAAC;QAAoB;KAAiB;IAEzC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,mBAAmB,cAAc;IAEvC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAGX,6LAAC;gBACC,WAAU;;kCAKV,6LAAC;wBACC,WAAW,AAAC,gHAES,OAAjB,kBAAiB;kCAGrB,cAAA,6LAAC,kKAAU;4BACT,OAAM;4BACN,MAAK;4BACL,iBAAgB;4BAChB,4BACE,6LAAC,4JAAO;gCAAC,MAAK;gCAAO,OAAM;;;;;;4BAE7B,gBAAgB;;;;;;;;;;;kCAIpB,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,aAAY;oCACZ,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;oCACtC,WAAU;;;;;;;;;;;0CAKd,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,iKAAY;4CAAC,MAAK;4CAAO,OAAM;;;;;;;;;;;kDAElC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEAEb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEACC,WAAU;gEACV,SAAS,IAAM,2BAA2B;0EAEzC,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,eAAe;oEAC1C,QAAQ,oJAAE;gEACZ;;;;;;4DAED,yCACC,6LAAC;gEAAI,WAAU;0EACb,cAAA,6LAAC,kKAAQ;oEACP,YAAY;oEACZ,aAAa,CAAA,UACX,aAAa,SAAS;oEAExB,OAAO;oEACP,SAAS,IAAM,2BAA2B;;;;;;;;;;;;;;;;;oDAOjD,CAAC,0BACA,6LAAC;kEACE,mCACC,6LAAC;4DACC,KAAK;4DACL,MAAK;4DACL,OAAO;4DACP,WAAU;4DACV,UAAU,CAAA,IACR,uBAAuB,EAAE,MAAM,CAAC,KAAK;4DAEvC,QAAQ,CAAA,IACN,YAAY,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;iFAIvC,6LAAC;4DACC,WAAU;4DACV,SAAS,IAAM,sBAAsB;sEAEpC,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,SAAS;gEACpC,QAAQ,oJAAE;4DACZ;;;;;;;;;;;kEAMR,6LAAC;wDAAK,WAAU;kEAAO;;;;;;oDAGtB,CAAC,0BACA,6LAAC;kEACE,iCACC,6LAAC;4DACC,KAAK;4DACL,MAAK;4DACL,OAAO;4DACP,WAAU;4DACV,UAAU,CAAA,IACR,qBAAqB,EAAE,MAAM,CAAC,KAAK;4DAErC,QAAQ,CAAA,IACN,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;iFAIrC,6LAAC;4DACC,WAAU;4DACV,SAAS,IAAM,oBAAoB;sEAElC,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,SAAS;gEAClC,QAAQ,oJAAE;4DACZ;;;;;;;;;;;kEAOR,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEACC,WAAU;gEACV,SAAS,IAAM,yBAAyB;0EAEvC,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,eAAe;oEACxC,QAAQ,oJAAE;gEACZ;;;;;;4DAED,uCACC,6LAAC;gEAAI,WAAU;0EACb,cAAA,6LAAC,kKAAQ;oEACP,YAAY;oEACZ,aAAa,CAAA,UACX,aAAa,OAAO;oEAEtB,OAAO;oEACP,SAAS,IAAM,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;0DAQlD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEACb,cAAA,6LAAC,kKAAU;4DACT,OAAM;4DACN,MAAK;4DACL,iBAAgB;4DAChB,cACE,yBACE,6LAAC,+JAAU;gEAAC,MAAK;gEAAO,OAAM;;;;;uFAE9B,6LAAC,2KAAsB;gEACrB,MAAK;gEACL,OAAM;;;;;;4DAIZ,gBAAgB,IAAM,eAAe,CAAC;;;;;;;;;;;kEAG1C,6LAAC;kEAAI;;;;;;;;;;;;0DAIP,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,WAAU;wDACV,SAAS,IAAM,4BAA4B;;0EAE3C,6LAAC;gEAAK,WAAU;0EACb,oJAAsB,CACrB,WACD;;;;;;0EAEH,6LAAC,oKAAe;gEACd,MAAK;gEACL,OAAM;;;;;;;;;;;;oDAGT,0CACC,6LAAC,kKAAQ;wDACP,MAAM;wDACN,iBAAiB,IACf,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;0CASxC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;kDACC,cAAA,6LAAC,iKAAY;4CAAC,MAAK;4CAAO,OAAM;;;;;;;;;;;kDAElC,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,MAAK;4CACL,OAAO;4CACP,aAAY;4CACZ,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;4CACzC,WAAU;;;;;;;;;;;;;;;;;0CAMhB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;kDACC,cAAA,6LAAC,8JAAS;4CAAC,MAAK;4CAAO,OAAM;;;;;;;;;;;kDAE/B,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,OAAO;4CACP,aAAY;4CACZ,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;4CAC5C,WAAU;;;;;;;;;;;;;;;;;0CAMhB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;kDACC,cAAA,6LAAC,gKAAW;4CAAC,MAAK;4CAAO,OAAM;;;;;;;;;;;kDAEjC,6LAAC;wCAAI,WAAU;kDACZ,cAAc,GAAG,CAAC,CAAA,kBACjB,6LAAC;gDAEC,MAAK;gDACL,WAAW,AAAC,yKAGkC,OAA1C,YAAY,EAAE,EAAE,GAAG,oBAAoB,IAAG;gDAE9C,SAAS,IAAM,WAAW,EAAE,EAAE;;kEAE9B,6LAAC;wDAAK,WAAU;kEACb,EAAE,KAAK;;;;;;kEAEV,6LAAC;wDACC,WAAW,AAAC,uEAEI,OAAZ,EAAE,SAAS,EAAC;;;;;;;+CAfb,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;kCAyBnB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,WAAW,AAAC,mGAEe,OAAvB,cAAc,UAAS;4BAE3B,SAAS;sCACV;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAtewB;KAAA","debugId":null}},
    {"offset": {"line": 2030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Timeline/Timeline.tsx"],"sourcesContent":["'use client'\n\nimport {\n  eachDayOfInterval,\n  format,\n  set as setDate,\n  setHours,\n  setMinutes,\n  differenceInMinutes,\n  isBefore,\n  isAfter,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport {\n  Dispatch,\n  SetStateAction,\n  useEffect,\n  useRef,\n  useState,\n} from 'react'\nimport {\n  getDateRange,\n  getClosestIndexForDayViewEvents,\n} from '../../utils/helpers'\nimport {\n  CalendarViewTypes,\n  CalendarViewType,\n} from '../../utils/types'\nimport { UiEvent, SelectedEventState } from '../GoogleAgenda/GoogleAgenda'\n\n\nexport interface TimelineBlockEvent {\n  eventUid: string\n  title: string\n  startDate: string\n  endDate: string\n  colorId: string | null\n  colIndex: number\n  colCount: number\n}\n\ninterface TimelineBlockProps {\n  index: number\n  event: TimelineBlockEvent\n  onClickTimelineBlock: (payload: {\n    eventUid: string\n    top: number\n    left: number\n    height: number\n    width: number\n  }) => void\n}\n\ntype DayEventsByHour = Record<\n  number,\n  Record<number, TimelineBlockEvent[]>\n>\n\nfunction googleColorIdToClasses(colorId: string | null | undefined): string {\n  switch (colorId) {\n    case '1':  return 'bg-blue-500 text-white'\n    case '2':  return 'bg-green-500 text-white'\n    case '3':  return 'bg-purple-500 text-white'\n    case '4':  return 'bg-red-500 text-white'\n    case '5':  return 'bg-yellow-400 text-black'\n    case '6':  return 'bg-orange-500 text-white'\n    case '7':  return 'bg-teal-500 text-white'\n    case '8':  return 'bg-gray-500 text-white'\n    case '9':  return 'bg-indigo-500 text-white'\n    case '10': return 'bg-lime-500 text-black'\n    case '11': return 'bg-rose-500 text-white'\n    default:   return 'bg-sky-500 text-white'\n  }\n}\n\nfunction TimelineBlock({\n  index,\n  event,\n  onClickTimelineBlock,\n}: TimelineBlockProps) {\n  const timelineBlockRef = useRef<HTMLDivElement | null>(null)\n\n  const getBlockHeight = (evt: TimelineBlockEvent): number => {\n    const basePixel = 11\n    const [startHour, startMinuteSeg] = getClosestIndexForDayViewEvents(\n      new Date(evt.startDate),\n    )\n    const [endHour, endMinuteSeg] = getClosestIndexForDayViewEvents(\n      new Date(evt.endDate),\n    )\n\n    if (startHour === endHour && startMinuteSeg === endMinuteSeg) {\n      return 22\n    }\n\n    const start = setDate(new Date(evt.startDate), {\n      hours: startHour,\n      minutes: startMinuteSeg,\n    })\n    const end = setDate(new Date(evt.endDate), {\n      hours: endHour,\n      minutes: endMinuteSeg,\n    })\n    const diffSlots = Math.floor(differenceInMinutes(end, start) / 15)\n    return diffSlots * basePixel + (diffSlots - 1)\n  }\n\n  const blockSubtitle = (blockHeight: number) => {\n    if (blockHeight > 22) {\n      const startTime = format(new Date(event.startDate), 'HH:mm', {\n        locale: fr,\n      })\n      const endTime = format(new Date(event.endDate), 'HH:mm', {\n        locale: fr,\n      })\n      return (\n        <div className=\"pt-0.5\">\n          {`${startTime} - ${endTime}`}\n        </div>\n      )\n    }\n    return `, ${format(new Date(event.startDate), 'HH', {\n      locale: fr,\n    })}h`\n  }\n\n  const handleOnClickBlock = () => {\n    if (!timelineBlockRef.current) return\n    const { top, left, height, width } =\n      timelineBlockRef.current.getBoundingClientRect()\n\n    onClickTimelineBlock({\n      eventUid: event.eventUid,\n      top: top - 65,\n      left: left - 248,\n      height,\n      width,\n    })\n  }\n\n  const heightPx = getBlockHeight(event)\n\n  const widthPercent = 100 / event.colCount\n  const leftPercent = widthPercent * event.colIndex\n\n  const dStart = new Date(event.startDate)\n  const minutes = dStart.getMinutes()\n  const slotPx = 11\n  const offsetSlots = minutes / 15\n  const topPx = offsetSlots * slotPx\n\n  const colorClass = googleColorIdToClasses(event.colorId)\n\n  return (\n    <div\n      ref={timelineBlockRef}\n      style={{\n        position: 'absolute',\n        top: `${topPx}px`,\n        height: `${heightPx}px`,\n        width: `${widthPercent}%`,\n        left: `${leftPercent}%`,\n        zIndex: 30 + index,\n      }}\n      className={`rounded-md overflow-x-hidden px-2.5 pt-0.5 cursor-pointer text-xs ${colorClass}`}\n      onClick={handleOnClickBlock}\n    >\n      <div className=\"min-w-0 font-normal truncate\">\n        {event.title}\n        {blockSubtitle(heightPx)}\n      </div>\n    </div>\n  )\n}\n\n/* ---------- Algo colonne “façon Google” ---------- */\n\nfunction overlap(a: UiEvent, b: UiEvent): boolean {\n  const aStart = new Date(a.startDate)\n  const aEnd = new Date(a.endDate)\n  const bStart = new Date(b.startDate)\n  const bEnd = new Date(b.endDate)\n\n  return isBefore(aStart, bEnd) && isBefore(bStart, aEnd)\n}\n\nfunction getMaxOverlap(group: UiEvent[]): number {\n  const points: { time: Date; type: 'start' | 'end' }[] = []\n  group.forEach(e => {\n    points.push({ time: new Date(e.startDate), type: 'start' })\n    points.push({ time: new Date(e.endDate), type: 'end' })\n  })\n  points.sort((a, b) => a.time.getTime() - b.time.getTime())\n\n  let cur = 0\n  let max = 0\n  points.forEach(p => {\n    if (p.type === 'start') {\n      cur += 1\n      if (cur > max) max = cur\n    } else {\n      cur -= 1\n    }\n  })\n  return Math.max(max, 1)\n}\n\nfunction layoutDayEvents(events: UiEvent[]): DayEventsByHour {\n  const normalEvents = events.filter(e => !e.isAllDay)\n\n  const sorted = normalEvents.slice().sort((a, b) =>\n    isBefore(new Date(a.startDate), new Date(b.startDate)) ? -1 : 1,\n  )\n\n  type LaidOutEvent = TimelineBlockEvent\n  const laidOut: LaidOutEvent[] = []\n\n  let group: UiEvent[] = []\n\n  const flushGroup = () => {\n    if (group.length === 0) return\n\n    const maxCols = getMaxOverlap(group)\n\n    const cols: UiEvent[][] = []\n    group.forEach(ev => {\n      let placed = false\n      for (let c = 0; c < cols.length; c++) {\n        const last = cols[c][cols[c].length - 1]\n        if (!overlap(last, ev)) {\n          cols[c].push(ev)\n          placed = true\n          break\n        }\n      }\n      if (!placed) cols.push([ev])\n    })\n\n    group.forEach(ev => {\n      const start = new Date(ev.startDate)\n      const firstStart = new Date(group[0].startDate)\n\n      const evOverlapsFirst =\n        overlap(ev, group[0]) && start.getTime() > firstStart.getTime()\n\n      let colIndex = 0\n      let colCount = 1\n\n      if (ev === group[0] && !evOverlapsFirst) {\n        colIndex = 0\n        colCount = 1\n      } else {\n        for (let c = 0; c < cols.length; c++) {\n          if (cols[c].includes(ev)) {\n            colIndex = c\n            break\n          }\n        }\n        colCount = maxCols\n      }\n\n      laidOut.push({\n        eventUid: ev.id,\n        title: ev.title,\n        startDate: ev.startDate,\n        endDate: ev.endDate,\n        colorId: ev.colorId ?? null,\n        colIndex,\n        colCount,\n      })\n    })\n\n    group = []\n  }\n\n  sorted.forEach(ev => {\n    if (group.length === 0) {\n      group.push(ev)\n      return\n    }\n\n    const lastInGroup = group[group.length - 1]\n    const lastEnd = new Date(lastInGroup.endDate)\n    const curStart = new Date(ev.startDate)\n\n    if (isAfter(curStart, lastEnd)) {\n      flushGroup()\n      group.push(ev)\n    } else {\n      group.push(ev)\n    }\n  })\n  flushGroup()\n\n  const byHour: DayEventsByHour = {}\n  laidOut.forEach(e => {\n    const d = new Date(e.startDate)\n    const hour = d.getHours()\n    const minutes = d.getMinutes()\n\n    const minuteKey =\n      minutes < 15 ? 0 :\n      minutes < 30 ? 15 :\n      minutes < 45 ? 30 : 45\n\n    if (!byHour[hour]) byHour[hour] = {}\n    if (!byHour[hour][minuteKey]) byHour[hour][minuteKey] = []\n    byHour[hour][minuteKey].push(e)\n  })\n\n  return byHour\n}\n\n/* ---------- Composant principal semaine ---------- */\n\ninterface TimelineFullProps {\n  calendarViewType: CalendarViewType\n  targetDate: string\n  events: UiEvent[]\n  onChangeTargetDate: Dispatch<SetStateAction<string>>\n  onSelectEvent: Dispatch<SetStateAction<SelectedEventState>>\n  onClickNewEvent: (basis?: { startDate: string; endDate: string }) => void\n}\n\nexport default function TimelineFull({\n  calendarViewType,\n  targetDate,\n  events,\n  onSelectEvent,\n}: TimelineFullProps) {\n  const timelineHeaderRef = useRef<HTMLDivElement | null>(null)\n  const timelineRef = useRef<HTMLDivElement | null>(null)\n  const [targetDateRange, setTargetDateRange] = useState<Date[]>([])\n  const [timelineMaxHeight, setTimelineMaxHeight] = useState(\n    'calc(100vh - (65px + 43px))',\n  )\n  const [weekEventsByDay, setWeekEventsByDay] = useState<\n    Record<number, DayEventsByHour>\n  >({})\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const onClickTimelineBlock = (payload: any) => {\n    onSelectEvent(payload)\n  }\n\n  const START_HOUR = 6\n  const END_HOUR = 19\n\n  useEffect(() => {\n    const getDayList = (\n      target: string,\n      viewType: CalendarViewType,\n    ): Date[] => {\n      switch (viewType) {\n        case CalendarViewTypes.WEEK_VIEW: {\n          const [start, end] = getDateRange(viewType, target)\n          return eachDayOfInterval({ start, end })\n        }\n        default:\n          return []\n      }\n    }\n\n    if (targetDate) {\n      setTargetDateRange(getDayList(targetDate, calendarViewType))\n    }\n  }, [targetDate, calendarViewType])\n\n  useEffect(() => {\n    if (calendarViewType !== CalendarViewTypes.WEEK_VIEW) return\n    if (!targetDate) return\n    if (targetDateRange.length === 0) return\n\n    const [rangeStart, rangeEnd] = getDateRange(\n      CalendarViewTypes.WEEK_VIEW,\n      targetDate,\n    )\n\n    const result: Record<number, DayEventsByHour> = {}\n\n    targetDateRange.forEach((colDate, dayIndex) => {\n      const dayStart = new Date(\n        colDate.getFullYear(),\n        colDate.getMonth(),\n        colDate.getDate(),\n        0,\n        0,\n        0,\n        0,\n      )\n      const dayEnd = new Date(\n        colDate.getFullYear(),\n        colDate.getMonth(),\n        colDate.getDate(),\n        23,\n        59,\n        59,\n        999,\n      )\n\n      const eventsForDay = events.filter(e => {\n        const start = new Date(e.startDate)\n\n        if (start < rangeStart || start > rangeEnd) return false\n\n        return start >= dayStart && start <= dayEnd\n      })\n\n      result[dayIndex] = layoutDayEvents(eventsForDay)\n    })\n\n    setWeekEventsByDay(result)\n  }, [events, targetDate, calendarViewType, targetDateRange])\n\n  useEffect(() => {\n    if (!timelineHeaderRef.current) return\n    const height =\n      timelineHeaderRef.current.getBoundingClientRect().height\n    setTimelineMaxHeight(`calc(100vh - (65px + ${height}px))`)\n  }, [targetDate, weekEventsByDay])\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      {/* Header jours */}\n      <div ref={timelineHeaderRef} className=\"flex flex-col\">\n        <div className=\"flex justify-between w-full pl-14\">\n          {targetDateRange.map((date, i) => (\n            <div\n              key={i}\n              className={`\n                flex flex-col items-center justify-start\n                ${targetDateRange.length > 1 ? 'flex-1' : ''}\n                ${targetDateRange.length === 1 ? 'pl-3' : ''}\n              `}\n            >\n              <span className=\"flex items-center justify-center h-8 mt-2 font-medium text-gray-600\">\n                {format(new Date(date), 'EEE', { locale: fr }).toUpperCase()}\n              </span>\n              <span className=\"flex items-center justify-center text-2xl transition text-gray-700 w-10 h-10\">\n                {format(new Date(date), 'd', { locale: fr })}\n              </span>\n            </div>\n          ))}\n        </div>\n        <div className=\"w-full border-b border-l\" />\n      </div>\n\n      {/* Grille */}\n      <div\n        ref={timelineRef}\n        style={{ maxHeight: timelineMaxHeight }}\n        className=\"flex flex-auto overflow-y-auto\"\n      >\n        {/* colonne heures */}\n        <div>\n          {Array.from({ length: END_HOUR - START_HOUR + 1 }).map((_, idx) => {\n            const hour = START_HOUR + idx\n            const date = setMinutes(setHours(new Date(), hour), 0)\n            return (\n              <div\n                key={hour}\n                className=\"flex h-12 text-gray-500\"\n              >\n                <span className=\"text-right pt-3\">\n                  {format(date, 'HH:mm', { locale: fr })}\n                </span>\n                <div className=\"w-2 h-12\" />\n              </div>\n            )\n          })}\n        </div>\n\n        {/* colonnes jours */}\n        <div className=\"flex flex-auto border-l divide-x\">\n          {Array.from({ length: 7 }).map((_, dayIndex) => {\n            const byHour = weekEventsByDay[dayIndex] || {}\n            return (\n              <div\n                key={dayIndex}\n                className=\"flex-1\"\n              >\n                {Array.from({\n                  length: END_HOUR - START_HOUR + 1,\n                }).map((_, idx) => {\n                  const hour = START_HOUR + idx\n                  const segments = byHour[hour] || {}\n                  return (\n                    <div\n                      key={hour}\n                      className=\"relative w-full h-12 border-b\"\n                    >\n                      {Object.keys(segments).map(segKey => {\n                        const segEvents = segments[Number(segKey)] || []\n                        return segEvents.map((e, idx2) => (\n                          <TimelineBlock\n                            key={`${hour}-${segKey}-${idx2}`}\n                            index={idx2}\n                            event={e}\n                            onClickTimelineBlock={onClickTimelineBlock}\n                          />\n                        ))\n                      })}\n                    </div>\n                  )\n                })}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/EventDetailModal.tsx"],"sourcesContent":["'use client'\n\nimport { format, isSameDay } from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useRef } from 'react'\nimport { MdClose, MdDelete, MdEdit, MdToday } from 'react-icons/md'\nimport IconButton from '../Common/Button/IconButton'\n\ninterface Event {\n  id?: string              // pour Google eventId si dispo\n  title: string\n  startDate: string\n  endDate: string\n  colorClass?: string\n  description: string\n  colorId?: string | null\n  location?:string  // optionnel: colorId Google\n}\n\ninterface EventCreator {\n  displayName: string\n}\n\ninterface SelectedEvent {\n  event: Event\n  eventCreator: EventCreator\n  top: number\n  left: number\n}\n\ninterface EventDetailModalProps {\n  selectedEvent: SelectedEvent\n  onCloseModal: () => void\n  onEditEvent: (event: Event) => void\n  onDeleteEvent?: (event: Event) => void\n}\n\nexport default function EventDetailModal({\n  selectedEvent,\n  onCloseModal,\n  onEditEvent,\n  onDeleteEvent,\n}: EventDetailModalProps) {\n  const eventDetailModalRef = useRef<HTMLDivElement | null>(null)\n\n  const parseEventDate = (startDate: string, endDate: string): string => {\n    const start = new Date(startDate)\n    const end = new Date(endDate)\n\n    if (isSameDay(start, end)) {\n      return `${format(start, 'EEEE d MMMM', { locale: fr })} · ${format(\n        start,\n        'HH:mm',\n        { locale: fr },\n      )} – ${format(end, 'HH:mm', { locale: fr })}`\n    } else {\n      return `${format(start, 'd MMM yyyy HH:mm', {\n        locale: fr,\n      })} – ${format(end, 'd MMM yyyy HH:mm', { locale: fr })}`\n    }\n  }\n\n  const { event, eventCreator } = selectedEvent\n  const colorClass = event.colorClass\n\n  const handleEditClick = () => {\n    onEditEvent(event)\n  }\n\n  const handleDeleteClick = () => {\n    if (onDeleteEvent) {\n      onDeleteEvent(event)\n    }\n  }\n\n  return (\n    <div\n      ref={eventDetailModalRef}\n      style={{\n        top: selectedEvent.top,\n        left: selectedEvent.left,\n      }}\n      className=\"absolute z-50 py-2 transition bg-white rounded-md min-w-448 eventDetailModalBoxShadow\"\n    >\n      <div className=\"flex items-center justify-end px-1.5\">\n        <IconButton\n          size=\"small\"\n          label=\"Modifier\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdEdit size=\"20px\" color=\"gray\" />}\n          onClickHandler={handleEditClick}\n        />\n        <IconButton\n          size=\"small\"\n          label=\"Supprimer\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdDelete size=\"20px\" color=\"gray\" />}\n          onClickHandler={handleDeleteClick}\n        />\n        <IconButton\n          size=\"small\"\n          label=\"Fermer\"\n          tooltipLocation=\"top\"\n          imgComponent={<MdClose size=\"20px\" color=\"gray\" />}\n          onClickHandler={onCloseModal}\n        />\n      </div>\n\n      <div>\n        <div className=\"flex px-5\">\n          <div className=\"flex items-start justify-center\">\n            <div\n              className={`mt-0.5 h-3.5 w-3.5 rounded-sm ${colorClass}`}\n            />\n          </div>\n          <div className=\"flex flex-col items-start justify-start flex-auto pl-6\">\n            <span className=\"text-xl leading-none\">\n              {event.title}\n            </span>\n            <span className=\"pt-2 text-xs font-normal text-gray-500\">\n              {parseEventDate(event.startDate, event.endDate)}\n            </span>\n            {event.description && (\n              <span className=\"pt-2 text-xs font-normal text-gray-700 whitespace-pre-wrap\">\n                {event.description}\n              </span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"flex px-4 pb-2 mt-4\">\n          <div className=\"pl-0.5 flex items-center justify-center\">\n            <MdToday size=\"20px\" color=\"gray\" />\n          </div>\n          <div className=\"flex items-start justify-start flex-auto pl-5 text-xs text-gray-500\">\n            {eventCreator.displayName}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAqCe,SAAS,iBAAiB,KAKjB;QALiB,EACvC,aAAa,EACb,YAAY,EACZ,WAAW,EACX,aAAa,EACS,GALiB;;IAMvC,MAAM,sBAAsB,IAAA,uKAAM,EAAwB;IAE1D,MAAM,iBAAiB,CAAC,WAAmB;QACzC,MAAM,QAAQ,IAAI,KAAK;QACvB,MAAM,MAAM,IAAI,KAAK;QAErB,IAAI,IAAA,wJAAS,EAAC,OAAO,MAAM;YACzB,OAAO,AAAC,GAAoD,OAAlD,IAAA,kKAAM,EAAC,OAAO,eAAe;gBAAE,QAAQ,oJAAE;YAAC,IAAG,OAIhD,OAJqD,IAAA,kKAAM,EAChE,OACA,SACA;gBAAE,QAAQ,oJAAE;YAAC,IACb,OAA0C,OAArC,IAAA,kKAAM,EAAC,KAAK,SAAS;gBAAE,QAAQ,oJAAE;YAAC;QAC3C,OAAO;YACL,OAAO,AAAC,GAEA,OAFE,IAAA,kKAAM,EAAC,OAAO,oBAAoB;gBAC1C,QAAQ,oJAAE;YACZ,IAAG,OAAqD,OAAhD,IAAA,kKAAM,EAAC,KAAK,oBAAoB;gBAAE,QAAQ,oJAAE;YAAC;QACvD;IACF;IAEA,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG;IAChC,MAAM,aAAa,MAAM,UAAU;IAEnC,MAAM,kBAAkB;QACtB,YAAY;IACd;IAEA,MAAM,oBAAoB;QACxB,IAAI,eAAe;YACjB,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,OAAO;YACL,KAAK,cAAc,GAAG;YACtB,MAAM,cAAc,IAAI;QAC1B;QACA,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,kKAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,6LAAC,2JAAM;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACxC,gBAAgB;;;;;;kCAElB,6LAAC,kKAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,6LAAC,6JAAQ;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBAC1C,gBAAgB;;;;;;kCAElB,6LAAC,kKAAU;wBACT,MAAK;wBACL,OAAM;wBACN,iBAAgB;wBAChB,4BAAc,6LAAC,4JAAO;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBACzC,gBAAgB;;;;;;;;;;;;0BAIpB,6LAAC;;kCACC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,WAAW,AAAC,iCAA2C,OAAX;;;;;;;;;;;0CAGhD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDACb,MAAM,KAAK;;;;;;kDAEd,6LAAC;wCAAK,WAAU;kDACb,eAAe,MAAM,SAAS,EAAE,MAAM,OAAO;;;;;;oCAE/C,MAAM,WAAW,kBAChB,6LAAC;wCAAK,WAAU;kDACb,MAAM,WAAW;;;;;;;;;;;;;;;;;;kCAM1B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,4JAAO;oCAAC,MAAK;oCAAO,OAAM;;;;;;;;;;;0CAE7B,6LAAC;gCAAI,WAAU;0CACZ,aAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAMrC;GAxGwB;KAAA","debugId":null}},
    {"offset": {"line": 2777, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/Modal/EditEventModal.tsx"],"sourcesContent":["'use client'\n\nimport {\n  endOfDay,\n  format,\n  getDate,\n  getHours,\n  getMinutes,\n  getMonth,\n  getYear,\n  isAfter,\n  isBefore,\n  set as setDate,\n  startOfDay,\n} from 'date-fns'\nimport { fr } from 'date-fns/locale'\nimport { useEffect, useRef, useState } from 'react'\nimport {\n  MdAccessTime,\n  MdArrowDropDown,\n  MdCheckBox,\n  MdCheckBoxOutlineBlank,\n  MdClose,\n  MdColorLens,\n  MdLocationOn,\n  MdSubject,\n} from 'react-icons/md'\nimport { isValidTime, repeatTypeStringLookup } from '../../utils/helpers'\nimport {\n  EventRepeatTypes,\n  EventRepeatType,\n} from '../../utils/types'\nimport IconButton from '../Common/Button/IconButton'\nimport Calendar from '../Common/Calendar/Calendar'\nimport Dropdown from '../Common/Dropdown/Dropdown'\nimport type { UiEvent } from '../GoogleAgenda/GoogleAgenda'\n\n// mêmes couleurs Google que pour la création\nconst GOOGLE_COLORS: { id: string; label: string; className: string }[] = [\n  { id: '1',  label: 'Bleu',        className: 'bg-blue-500 text-white' },\n  { id: '2',  label: 'Vert clair',  className: 'bg-emerald-400 text-white' },\n  { id: '3',  label: 'Violet',      className: 'bg-purple-500 text-white' },\n  { id: '4',  label: 'Rouge',       className: 'bg-red-500 text-white' },\n  { id: '5',  label: 'Jaune',       className: 'bg-yellow-400 text-black' },\n  { id: '6',  label: 'Orange',      className: 'bg-orange-500 text-white' },\n  { id: '7',  label: 'Turquoise',   className: 'bg-teal-500 text-white' },\n  { id: '8',  label: 'Gris',        className: 'bg-gray-500 text-white' },\n  { id: '9',  label: 'Indigo',      className: 'bg-indigo-500 text-white' },\n  { id: '10', label: 'Vert',        className: 'bg-lime-500 text-black' },\n  { id: '11', label: 'Rose',        className: 'bg-rose-500 text-white' },\n]\n\nfunction getColorClass(colorId: string | null | undefined): string {\n  const found = GOOGLE_COLORS.find(c => c.id === colorId)\n  return found?.className ?? 'bg-sky-500 text-white'\n}\n\ninterface EditEventModalProps {\n  isOpen: boolean\n  onClose: () => void\n  event: UiEvent | null\n  onUpdated: (updated: UiEvent) => void\n}\n\nexport default function EditEventModal({\n  isOpen,\n  onClose,\n  event,\n  onUpdated,\n}: EditEventModalProps) {\n  const startDateInputRef = useRef<HTMLInputElement | null>(null)\n  const endDateInputRef = useRef<HTMLInputElement | null>(null)\n\n  const [title, setTitle] = useState('')\n  const [location, setLocation] = useState('')\n  const [description, setDescription] = useState('')\n\n  const [startDate, setStartDate] = useState<string>(new Date().toISOString())\n  const [startDateInputValue, setStartDateInputValue] = useState('')\n  const [showStartDateInput, setShowStartDateInput] = useState(false)\n\n  const [endDate, setEndDate] = useState<string>(new Date().toISOString())\n  const [endDateInputValue, setEndDateInputValue] = useState('')\n  const [showEndDateInput, setShowEndDateInput] = useState(false)\n\n  const [isAllDay, setIsAllDay] = useState(false)\n  const [repeatType, setRepeatType] = useState<-1 | EventRepeatType>(-1)\n\n  const [colorId, setColorId] = useState<string | null>('1')\n\n  const [isRepeatTypeDropdownOpen, setIsRepeatTypeDropdownOpen] =\n    useState(false)\n  const [isStartDateCalendarOpen, setIsStartDateCalendarOpen] = useState(false)\n  const [isEndDateCalendarOpen, setIsEndDateCalendarOpen] = useState(false)\n  useEffect(() => {\n    if (!event) return\n    setTitle(event.title ?? '')\n    setLocation(event.location ?? '')\n    setDescription(event.description ?? '')\n    setStartDate(event.startDate)\n    setEndDate(event.endDate)\n    setIsAllDay(event.isAllDay)\n    setColorId(event.colorId ?? null)\n  }, [event])\n\n  const repeatTypeDropdownData: RepeatTypeItem[] = [\n    {\n      leftLabel: 'Ne se répète pas',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(-1)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Quotidien',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.DAILY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Hebdomadaire',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.WEEKLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n    {\n      leftLabel: 'Mensuel',\n      rightLabel: '',\n      onClickHandler: () => {\n        setRepeatType(EventRepeatTypes.MONTHLY)\n        setIsRepeatTypeDropdownOpen(false)\n      },\n    },\n  ]\n\n  const onToggleAllDay = (newVal: boolean) => {\n    if (newVal) {\n      const updatedStartDate = startOfDay(new Date(startDate))\n      const updatedEndDate = endOfDay(new Date(endDate))\n      setStartDate(updatedStartDate.toISOString())\n      setEndDate(updatedEndDate.toISOString())\n    } else {\n      const now = new Date()\n      const curHour = getHours(now)\n      const curMin = getMinutes(now)\n      setStartDate(\n        setDate(new Date(startDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n      setEndDate(\n        setDate(new Date(endDate), {\n          hours: curHour,\n          minutes: curMin,\n        }).toISOString(),\n      )\n    }\n\n    setIsAllDay(newVal)\n  }\n\n  const onChangeDate = (target: 'start' | 'end', newDateVal: Date) => {\n    const base = new Date(newDateVal)\n    const year = getYear(base)\n    const month = getMonth(base)\n    const date = getDate(base)\n    if (target === 'start') {\n      const updated = setDate(new Date(startDate), { year, month, date })\n      setStartDate(updated.toISOString())\n      if (isBefore(new Date(endDate), updated)) {\n        setEndDate(updated.toISOString())\n      }\n      setIsStartDateCalendarOpen(false)\n    } else {\n      const updated = setDate(new Date(endDate), { year, month, date })\n      setEndDate(updated.toISOString())\n      if (isBefore(updated, new Date(startDate))) {\n        setStartDate(updated.toISOString())\n      }\n      setIsEndDateCalendarOpen(false)\n    }\n  }\n\n  const onBlurInput = (target: 'start' | 'end', value: string) => {\n    const [valid, hours, minutes] = isValidTime(value)\n    if (target === 'start') {\n      if (valid) {\n        const newStartDate = setDate(new Date(startDate), {\n          hours,\n          minutes,\n        })\n        if (isAfter(newStartDate, new Date(endDate))) {\n          const newEndDate = setDate(new Date(endDate), {\n            hours,\n            minutes,\n          })\n          setEndDate(newEndDate.toISOString())\n        }\n        setStartDate(newStartDate.toISOString())\n      }\n      setShowStartDateInput(false)\n    } else {\n      if (valid) {\n        const newEndDate = setDate(new Date(endDate), { hours, minutes })\n        if (isBefore(newEndDate, new Date(startDate))) {\n          const newStartDate = setDate(new Date(startDate), {\n            hours,\n            minutes,\n          })\n          setStartDate(newStartDate.toISOString())\n        }\n        setEndDate(newEndDate.toISOString())\n      }\n      setShowEndDateInput(false)\n    }\n  }\n\n  const handleSaveClick = async () => {\n    if (!event) return\n    const payload = {\n      title,\n      description,\n      location,\n      startDate,\n      endDate,\n      isAllDay,\n      colorId,\n    }\n\n    const res = await fetch(`/api/google/events/${event.id}`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(payload),\n    })\n\n    if (!res.ok) {\n      console.error('Failed to update event')\n      return\n    }\n\n    const updated: UiEvent = await res.json()\n    onUpdated(updated)\n    onClose()\n  }\n\n  useEffect(() => {\n    setStartDateInputValue(\n      format(new Date(startDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [startDate])\n\n  useEffect(() => {\n    setEndDateInputValue(\n      format(new Date(endDate), 'HH:mm', {\n        locale: fr,\n      }),\n    )\n  }, [endDate])\n\n  useEffect(() => {\n    if (showStartDateInput && startDateInputRef.current) {\n      startDateInputRef.current.focus()\n    }\n    if (showEndDateInput && endDateInputRef.current) {\n      endDateInputRef.current.focus()\n    }\n  }, [showStartDateInput, showEndDateInput])\n\n  if (!isOpen || !event) return null\n\n  const headerColorClass = getColorClass(colorId)\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\n      <div className=\"bg-white w-full max-w-xl rounded-md shadow-lg\">\n        <div\n          className={`flex items-center justify-between px-3 py-1 rounded-t-md bg-opacity-20 ${headerColorClass}`}\n        >\n          <IconButton\n            label=\"Fermer\"\n            size=\"small\"\n            tooltipLocation=\"bottom\"\n            imgComponent={\n              <MdClose size=\"24px\" color=\"rgba(75, 85, 99)\" />\n            }\n            onClickHandler={onClose}\n          />\n        </div>\n\n        <div className=\"pt-2 px-4 pb-4\">\n          {/* Titre */}\n          <div className=\"flex py-2\">\n            <input\n              type=\"text\"\n              value={title}\n              placeholder=\"Titre\"\n              onChange={e => setTitle(e.target.value)}\n              className=\"w-full text-2xl font-normal border-b outline-none\"\n            />\n          </div>\n\n          {/* Bloc date / heure */}\n          <div className=\"flex py-2\">\n            <div className=\"flex items-start justify-center\">\n              <MdAccessTime size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-col flex-auto pl-6 text-sm text-gray-500\">\n              <div className=\"flex items-center justify-start\">\n                {/* Start date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsStartDateCalendarOpen(true)}\n                  >\n                    {format(new Date(startDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isStartDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={startDate}\n                        onClickDate={newDate =>\n                          onChangeDate('start', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsStartDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Start time */}\n                {!isAllDay && (\n                  <div>\n                    {showStartDateInput ? (\n                      <input\n                        ref={startDateInputRef}\n                        type=\"text\"\n                        value={startDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setStartDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('start', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowStartDateInput(true)}\n                      >\n                        {format(new Date(startDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                <span className=\"px-1\">-</span>\n\n                {/* End time */}\n                {!isAllDay && (\n                  <div>\n                    {showEndDateInput ? (\n                      <input\n                        ref={endDateInputRef}\n                        type=\"text\"\n                        value={endDateInputValue}\n                        className=\"w-20 text-center border rounded-md outline-none\"\n                        onChange={e =>\n                          setEndDateInputValue(e.target.value)\n                        }\n                        onBlur={e =>\n                          onBlurInput('end', e.target.value)\n                        }\n                      />\n                    ) : (\n                      <div\n                        className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                        onClick={() => setShowEndDateInput(true)}\n                      >\n                        {format(new Date(endDate), 'HH:mm', {\n                          locale: fr,\n                        })}\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {/* End date */}\n                <div className=\"relative\">\n                  <div\n                    className=\"px-1 transition rounded-sm cursor-pointer hover:bg-gray-100\"\n                    onClick={() => setIsEndDateCalendarOpen(true)}\n                  >\n                    {format(new Date(endDate), 'EEEE d MMMM', {\n                      locale: fr,\n                    })}\n                  </div>\n                  {isEndDateCalendarOpen && (\n                    <div className=\"absolute z-50 w-64 bg-white h-min top-full dropdownBoxShadow\">\n                      <Calendar\n                        targetDate={endDate}\n                        onClickDate={newDate =>\n                          onChangeDate('end', newDate)\n                        }\n                        isModal\n                        onClose={() => setIsEndDateCalendarOpen(false)}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* All day */}\n              <div className=\"flex items-center mt-2 -ml-1\">\n                <div className=\"mr-1.5\">\n                  <IconButton\n                    label=\"Toute la journée\"\n                    size=\"small\"\n                    tooltipLocation=\"bottom\"\n                    imgComponent={\n                      isAllDay ? (\n                        <MdCheckBox size=\"24px\" color=\"gray\" />\n                      ) : (\n                        <MdCheckBoxOutlineBlank\n                          size=\"24px\"\n                          color=\"gray\"\n                        />\n                      )\n                    }\n                    onClickHandler={() => onToggleAllDay(!isAllDay)}\n                  />\n                </div>\n                <div>Toute la journée</div>\n              </div>\n\n              {/* Répétition UI only */}\n              <div className=\"relative mt-2\">\n                <button\n                  className=\"flex px-2 py-1 -ml-1 transition rounded-md hover:bg-gray-100\"\n                  onClick={() => setIsRepeatTypeDropdownOpen(true)}\n                >\n                  <span className=\"mr-0.5\">\n                    {repeatTypeStringLookup[\n                      repeatType as -1 | EventRepeatType\n                    ]}\n                  </span>\n                  <MdArrowDropDown\n                    size=\"18px\"\n                    color=\"rgba(75, 85, 99)\"\n                  />\n                </button>\n                {isRepeatTypeDropdownOpen && (\n                  <Dropdown\n                    data={repeatTypeDropdownData}\n                    onCloseDropdown={() =>\n                      setIsRepeatTypeDropdownOpen(false)\n                    }\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Location */}\n          <div className=\"flex items-center py-2 border-t\">\n            <div>\n              <MdLocationOn size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <input\n                type=\"text\"\n                value={location}\n                placeholder=\"Lieu\"\n                onChange={e => setLocation(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none\"\n              />\n            </div>\n          </div>\n\n          {/* Description */}\n          <div className=\"flex py-2 border-t\">\n            <div>\n              <MdSubject size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex-auto pl-6\">\n              <textarea\n                value={description}\n                placeholder=\"Description\"\n                onChange={e => setDescription(e.target.value)}\n                className=\"w-full px-2 py-1 text-sm bg-gray-100 border-b outline-none resize-none\"\n              />\n            </div>\n          </div>\n\n          {/* Couleur Google */}\n          <div className=\"flex py-2 border-t border-b\">\n            <div>\n              <MdColorLens size=\"20px\" color=\"rgba(75, 85, 99)\" />\n            </div>\n            <div className=\"flex flex-auto pl-6 flex-wrap gap-3 text-xs -mt-1.5\">\n              {GOOGLE_COLORS.map(c => (\n                <button\n                  key={c.id}\n                  type=\"button\"\n                  className={`\n                    flex flex-col items-center px-1 py-1.5 transition rounded-md cursor-pointer\n                    border border-transparent\n                    ${colorId === c.id ? 'border-gray-600' : ''}\n                  `}\n                  onClick={() => setColorId(c.id)}\n                >\n                  <span className=\"mb-1 tracking-wide text-gray-500 text-xxs\">\n                    {c.label}\n                  </span>\n                  <div\n                    className={`\n                      w-4 h-4 rounded-full\n                      ${c.className}\n                    `}\n                  />\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-end pt-3\">\n            <button\n              className=\"px-4 py-2 mr-2 text-sm text-gray-700 border rounded-md\"\n              onClick={onClose}\n            >\n              Annuler\n            </button>\n            <button\n              className={`px-4 py-2 text-sm text-white rounded-md ${getColorClass(\n                colorId,\n              )}`}\n              onClick={handleSaveClick}\n            >\n              Enregistrer\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\ninterface RepeatTypeItem {\n  leftLabel: string\n  rightLabel: string\n  onClickHandler: () => void\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAUA;AACA;AAIA;AACA;AACA;;;AAlCA;;;;;;;;;;AAqCA,6CAA6C;AAC7C,MAAM,gBAAoE;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA4B;IACzE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAwB;IACrE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAA2B;IACxE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;IACtE;QAAE,IAAI;QAAM,OAAO;QAAe,WAAW;IAAyB;CACvE;AAED,SAAS,cAAc,OAAkC;IACvD,MAAM,QAAQ,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACxC;IAAP,OAAO,CAAA,mBAAA,kBAAA,4BAAA,MAAO,SAAS,cAAhB,8BAAA,mBAAoB;AAC7B;AASe,SAAS,eAAe,KAKjB;QALiB,EACrC,MAAM,EACN,OAAO,EACP,KAAK,EACL,SAAS,EACW,GALiB;;IAMrC,MAAM,oBAAoB,IAAA,uKAAM,EAA0B;IAC1D,MAAM,kBAAkB,IAAA,uKAAM,EAA0B;IAExD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAS,IAAI,OAAO,WAAW;IACzE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC;IAE7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAS,IAAI,OAAO,WAAW;IACrE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IAEzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAuB,CAAC;IAEpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,MAAM,CAAC,0BAA0B,4BAA4B,GAC3D,IAAA,yKAAQ,EAAC;IACX,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,yKAAQ,EAAC;IACvE,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAC;IACnE,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,OAAO;gBACH;YAAT,SAAS,CAAA,eAAA,MAAM,KAAK,cAAX,0BAAA,eAAe;gBACZ;YAAZ,YAAY,CAAA,kBAAA,MAAM,QAAQ,cAAd,6BAAA,kBAAkB;gBACf;YAAf,eAAe,CAAA,qBAAA,MAAM,WAAW,cAAjB,gCAAA,qBAAqB;YACpC,aAAa,MAAM,SAAS;YAC5B,WAAW,MAAM,OAAO;YACxB,YAAY,MAAM,QAAQ;gBACf;YAAX,WAAW,CAAA,iBAAA,MAAM,OAAO,cAAb,4BAAA,iBAAiB;QAC9B;mCAAG;QAAC;KAAM;IAEV,MAAM,yBAA2C;QAC/C;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,CAAC;gBACf,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,KAAK;gBACpC,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,MAAM;gBACrC,4BAA4B;YAC9B;QACF;QACA;YACE,WAAW;YACX,YAAY;YACZ,gBAAgB;gBACd,cAAc,4IAAgB,CAAC,OAAO;gBACtC,4BAA4B;YAC9B;QACF;KACD;IAED,MAAM,iBAAiB,CAAC;QACtB,IAAI,QAAQ;YACV,MAAM,mBAAmB,IAAA,0JAAU,EAAC,IAAI,KAAK;YAC7C,MAAM,iBAAiB,IAAA,sJAAQ,EAAC,IAAI,KAAK;YACzC,aAAa,iBAAiB,WAAW;YACzC,WAAW,eAAe,WAAW;QACvC,OAAO;YACL,MAAM,MAAM,IAAI;YAChB,MAAM,UAAU,IAAA,sJAAQ,EAAC;YACzB,MAAM,SAAS,IAAA,0JAAU,EAAC;YAC1B,aACE,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;gBAC3B,OAAO;gBACP,SAAS;YACX,GAAG,WAAW;YAEhB,WACE,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;gBACzB,OAAO;gBACP,SAAS;YACX,GAAG,WAAW;QAElB;QAEA,YAAY;IACd;IAEA,MAAM,eAAe,CAAC,QAAyB;QAC7C,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,OAAO,IAAA,oJAAO,EAAC;QACrB,MAAM,QAAQ,IAAA,sJAAQ,EAAC;QACvB,MAAM,OAAO,IAAA,oJAAO,EAAC;QACrB,IAAI,WAAW,SAAS;YACtB,MAAM,UAAU,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;gBAAE;gBAAM;gBAAO;YAAK;YACjE,aAAa,QAAQ,WAAW;YAChC,IAAI,IAAA,sJAAQ,EAAC,IAAI,KAAK,UAAU,UAAU;gBACxC,WAAW,QAAQ,WAAW;YAChC;YACA,2BAA2B;QAC7B,OAAO;YACL,MAAM,UAAU,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;gBAAE;gBAAM;gBAAO;YAAK;YAC/D,WAAW,QAAQ,WAAW;YAC9B,IAAI,IAAA,sJAAQ,EAAC,SAAS,IAAI,KAAK,aAAa;gBAC1C,aAAa,QAAQ,WAAW;YAClC;YACA,yBAAyB;QAC3B;IACF;IAEA,MAAM,cAAc,CAAC,QAAyB;QAC5C,MAAM,CAAC,OAAO,OAAO,QAAQ,GAAG,IAAA,yIAAW,EAAC;QAC5C,IAAI,WAAW,SAAS;YACtB,IAAI,OAAO;gBACT,MAAM,eAAe,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;oBAChD;oBACA;gBACF;gBACA,IAAI,IAAA,oJAAO,EAAC,cAAc,IAAI,KAAK,WAAW;oBAC5C,MAAM,aAAa,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;wBAC5C;wBACA;oBACF;oBACA,WAAW,WAAW,WAAW;gBACnC;gBACA,aAAa,aAAa,WAAW;YACvC;YACA,sBAAsB;QACxB,OAAO;YACL,IAAI,OAAO;gBACT,MAAM,aAAa,IAAA,4IAAO,EAAC,IAAI,KAAK,UAAU;oBAAE;oBAAO;gBAAQ;gBAC/D,IAAI,IAAA,sJAAQ,EAAC,YAAY,IAAI,KAAK,aAAa;oBAC7C,MAAM,eAAe,IAAA,4IAAO,EAAC,IAAI,KAAK,YAAY;wBAChD;wBACA;oBACF;oBACA,aAAa,aAAa,WAAW;gBACvC;gBACA,WAAW,WAAW,WAAW;YACnC;YACA,oBAAoB;QACtB;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,OAAO;QACZ,MAAM,UAAU;YACd;YACA;YACA;YACA;YACA;YACA;YACA;QACF;QAEA,MAAM,MAAM,MAAM,MAAM,AAAC,sBAA8B,OAAT,MAAM,EAAE,GAAI;YACxD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,MAAM,UAAmB,MAAM,IAAI,IAAI;QACvC,UAAU;QACV;IACF;IAEA,IAAA,0KAAS;oCAAC;YACR,uBACE,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,SAAS;gBACnC,QAAQ,oJAAE;YACZ;QAEJ;mCAAG;QAAC;KAAU;IAEd,IAAA,0KAAS;oCAAC;YACR,qBACE,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,SAAS;gBACjC,QAAQ,oJAAE;YACZ;QAEJ;mCAAG;QAAC;KAAQ;IAEZ,IAAA,0KAAS;oCAAC;YACR,IAAI,sBAAsB,kBAAkB,OAAO,EAAE;gBACnD,kBAAkB,OAAO,CAAC,KAAK;YACjC;YACA,IAAI,oBAAoB,gBAAgB,OAAO,EAAE;gBAC/C,gBAAgB,OAAO,CAAC,KAAK;YAC/B;QACF;mCAAG;QAAC;QAAoB;KAAiB;IAEzC,IAAI,CAAC,UAAU,CAAC,OAAO,OAAO;IAE9B,MAAM,mBAAmB,cAAc;IAEvC,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAW,AAAC,0EAA0F,OAAjB;8BAErF,cAAA,6LAAC,kKAAU;wBACT,OAAM;wBACN,MAAK;wBACL,iBAAgB;wBAChB,4BACE,6LAAC,4JAAO;4BAAC,MAAK;4BAAO,OAAM;;;;;;wBAE7B,gBAAgB;;;;;;;;;;;8BAIpB,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,MAAK;gCACL,OAAO;gCACP,aAAY;gCACZ,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;gCACtC,WAAU;;;;;;;;;;;sCAKd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,iKAAY;wCAAC,MAAK;wCAAO,OAAM;;;;;;;;;;;8CAElC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DAEb,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DACC,WAAU;4DACV,SAAS,IAAM,2BAA2B;sEAEzC,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,eAAe;gEAC1C,QAAQ,oJAAE;4DACZ;;;;;;wDAED,yCACC,6LAAC;4DAAI,WAAU;sEACb,cAAA,6LAAC,kKAAQ;gEACP,YAAY;gEACZ,aAAa,CAAA,UACX,aAAa,SAAS;gEAExB,OAAO;gEACP,SAAS,IAAM,2BAA2B;;;;;;;;;;;;;;;;;gDAOjD,CAAC,0BACA,6LAAC;8DACE,mCACC,6LAAC;wDACC,KAAK;wDACL,MAAK;wDACL,OAAO;wDACP,WAAU;wDACV,UAAU,CAAA,IACR,uBAAuB,EAAE,MAAM,CAAC,KAAK;wDAEvC,QAAQ,CAAA,IACN,YAAY,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;6EAIvC,6LAAC;wDACC,WAAU;wDACV,SAAS,IAAM,sBAAsB;kEAEpC,IAAA,kKAAM,EAAC,IAAI,KAAK,YAAY,SAAS;4DACpC,QAAQ,oJAAE;wDACZ;;;;;;;;;;;8DAMR,6LAAC;oDAAK,WAAU;8DAAO;;;;;;gDAGtB,CAAC,0BACA,6LAAC;8DACE,iCACC,6LAAC;wDACC,KAAK;wDACL,MAAK;wDACL,OAAO;wDACP,WAAU;wDACV,UAAU,CAAA,IACR,qBAAqB,EAAE,MAAM,CAAC,KAAK;wDAErC,QAAQ,CAAA,IACN,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;6EAIrC,6LAAC;wDACC,WAAU;wDACV,SAAS,IAAM,oBAAoB;kEAElC,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,SAAS;4DAClC,QAAQ,oJAAE;wDACZ;;;;;;;;;;;8DAOR,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DACC,WAAU;4DACV,SAAS,IAAM,yBAAyB;sEAEvC,IAAA,kKAAM,EAAC,IAAI,KAAK,UAAU,eAAe;gEACxC,QAAQ,oJAAE;4DACZ;;;;;;wDAED,uCACC,6LAAC;4DAAI,WAAU;sEACb,cAAA,6LAAC,kKAAQ;gEACP,YAAY;gEACZ,aAAa,CAAA,UACX,aAAa,OAAO;gEAEtB,OAAO;gEACP,SAAS,IAAM,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;sDAQlD,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;8DACb,cAAA,6LAAC,kKAAU;wDACT,OAAM;wDACN,MAAK;wDACL,iBAAgB;wDAChB,cACE,yBACE,6LAAC,+JAAU;4DAAC,MAAK;4DAAO,OAAM;;;;;mFAE9B,6LAAC,2KAAsB;4DACrB,MAAK;4DACL,OAAM;;;;;;wDAIZ,gBAAgB,IAAM,eAAe,CAAC;;;;;;;;;;;8DAG1C,6LAAC;8DAAI;;;;;;;;;;;;sDAIP,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDACC,WAAU;oDACV,SAAS,IAAM,4BAA4B;;sEAE3C,6LAAC;4DAAK,WAAU;sEACb,oJAAsB,CACrB,WACD;;;;;;sEAEH,6LAAC,oKAAe;4DACd,MAAK;4DACL,OAAM;;;;;;;;;;;;gDAGT,0CACC,6LAAC,kKAAQ;oDACP,MAAM;oDACN,iBAAiB,IACf,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;sCASxC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;8CACC,cAAA,6LAAC,iKAAY;wCAAC,MAAK;wCAAO,OAAM;;;;;;;;;;;8CAElC,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCACC,MAAK;wCACL,OAAO;wCACP,aAAY;wCACZ,UAAU,CAAA,IAAK,YAAY,EAAE,MAAM,CAAC,KAAK;wCACzC,WAAU;;;;;;;;;;;;;;;;;sCAMhB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;8CACC,cAAA,6LAAC,8JAAS;wCAAC,MAAK;wCAAO,OAAM;;;;;;;;;;;8CAE/B,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCACC,OAAO;wCACP,aAAY;wCACZ,UAAU,CAAA,IAAK,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC5C,WAAU;;;;;;;;;;;;;;;;;sCAMhB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;8CACC,cAAA,6LAAC,gKAAW;wCAAC,MAAK;wCAAO,OAAM;;;;;;;;;;;8CAEjC,6LAAC;oCAAI,WAAU;8CACZ,cAAc,GAAG,CAAC,CAAA,kBACjB,6LAAC;4CAEC,MAAK;4CACL,WAAW,AAAC,yKAGkC,OAA1C,YAAY,EAAE,EAAE,GAAG,oBAAoB,IAAG;4CAE9C,SAAS,IAAM,WAAW,EAAE,EAAE;;8DAE9B,6LAAC;oDAAK,WAAU;8DACb,EAAE,KAAK;;;;;;8DAEV,6LAAC;oDACC,WAAW,AAAC,uEAEI,OAAZ,EAAE,SAAS,EAAC;;;;;;;2CAfb,EAAE,EAAE;;;;;;;;;;;;;;;;sCAwBjB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,WAAU;oCACV,SAAS;8CACV;;;;;;8CAGD,6LAAC;oCACC,WAAW,AAAC,2CAEV,OAFoD,cACpD;oCAEF,SAAS;8CACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;GA/ewB;KAAA","debugId":null}},
    {"offset": {"line": 3608, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/components/GoogleAgenda/GoogleAgenda.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { startOfWeek, endOfWeek } from 'date-fns'\nimport PanelLeft from './Panel/PanelLeft'\nimport CreateEventModal, {\n  CreateEventPayload,\n} from '../Modal/CreateEventModal'\nimport Timeline from '../Timeline/Timeline'\nimport EventDetailModal from '../Modal/EventDetailModal'\nimport EditEventModal from '../Modal/EditEventModal'\nimport { CalendarViewTypes } from '../../utils/types'\n\nexport interface UiEvent {\n  id: string\n  title: string\n  description: string\n  location: string\n  startDate: string\n  endDate: string\n  isAllDay: boolean\n  colorId: string | null\n\n  google?: {\n    colorId: string | null\n    htmlLink: string | null\n    creatorName: string\n    attendees: {\n      email: string\n      displayName: string | null\n      responseStatus: string | null\n    }[]\n  }\n}\n\nexport interface SelectedEventState {\n  eventUid: string\n  top: number\n  left: number\n  height: number\n  width: number\n}\n\nexport default function GoogleAgenda() {\n  const [targetDate, setTargetDate] = useState<string>(\n    new Date().toString(),\n  )\n  const [calendarViewType] = useState(CalendarViewTypes.WEEK_VIEW)\n  const [events, setEvents] = useState<UiEvent[]>([])\n  const [isCreateEventModalOpen, setIsCreateEventModalOpen] = useState(false)\n  const [selectedEvent, setSelectedEvent] = useState<SelectedEventState>({\n    eventUid: '',\n    top: 0,\n    left: 0,\n    height: 0,\n    width: 0,\n  })\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\n  const [editingEvent, setEditingEvent] = useState<UiEvent | null>(null)\n  const [hasToken, setHasToken] = useState<boolean | null>(null)\n  const [loadingEvents, setLoadingEvents] = useState(false)\n  useEffect(() => {\n    const checkStatus = async () => {\n      try {\n        const res = await fetch('/api/google/status')\n        const data = await res.json()\n        setHasToken(data.hasToken)\n      } catch (e) {\n        console.error('Erreur /api/google/status', e)\n        setHasToken(false)\n      }\n    }\n    checkStatus()\n  }, [])\n\n  useEffect(() => {\n    if (hasToken !== true) return\n    const loadEvents = async () => {\n      try {\n        setLoadingEvents(true)\n        const date = new Date(targetDate)\n        const weekStart = startOfWeek(date, { weekStartsOn: 1 })\n        const weekEnd = endOfWeek(date, { weekStartsOn: 1 })\n        const timeMin = weekStart.toISOString()\n        const timeMax = weekEnd.toISOString()\n        const res = await fetch(`/api/google/events?timeMin=${encodeURIComponent( timeMin,)}&timeMax=${encodeURIComponent(timeMax)}`,\n        )\n\n        if (!res.ok) {\n          console.error('Erreur fetch /api/google/events', await res.text())\n          return\n        }\n\n        const data: UiEvent[] = await res.json()\n        setEvents(data)\n      } catch (e) {\n        console.error('Erreur loadEvents', e)\n      } finally {\n        setLoadingEvents(false)\n      }\n    }\n\n    loadEvents()\n  }, [targetDate, hasToken])\n\n  const handleOpenCreateModal = (basis?: {\n    startDate: string\n    endDate: string\n  }) => {\n    console.log(basis)\n    setIsCreateEventModalOpen(true)\n  }\n\n  const handleSaveEvent = async (payload: CreateEventPayload) => {\n    try {\n      const res = await fetch('/api/google/events', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      })\n\n      if (!res.ok) {\n        console.error('Erreur POST /api/google/events', await res.text())\n        return\n      }\n\n      const created: UiEvent = await res.json()\n      setEvents(prev => [...prev, created])\n    } catch (e) {\n      console.error('Erreur handleSaveEvent', e)\n    } finally {\n      setIsCreateEventModalOpen(false)\n    }\n  }\n\n  const handleCloseEventDetailModal = () => {\n    setSelectedEvent(prev => ({\n      ...prev,\n      eventUid: '',\n    }))\n    setIsEditModalOpen(false)\n  }\n\n  function googleColorIdToClasses(colorId: string | null | undefined): string {\n    switch (colorId) {\n      case '1':  return 'bg-blue-500 text-white'\n      case '2':  return 'bg-green-500 text-white'\n      case '3':  return 'bg-purple-500 text-white'\n      case '4':  return 'bg-red-500 text-white'\n      case '5':  return 'bg-yellow-400 text-black'\n      case '6':  return 'bg-orange-500 text-white'\n      case '7':  return 'bg-teal-500 text-white'\n      case '8':  return 'bg-gray-500 text-white'\n      case '9':  return 'bg-indigo-500 text-white'\n      case '10': return 'bg-lime-500 text-black'\n      case '11': return 'bg-rose-500 text-white'\n      default:   return 'bg-sky-500 text-white'\n    }\n  }\n\n  const selectedEventData =\n    selectedEvent.eventUid.length > 0\n      ? events.find(e => e.id === selectedEvent.eventUid)\n      : undefined\n\n  const handleEditEvent = (ev: {\n    id?: string\n    title: string\n    startDate: string\n    endDate: string\n    description: string\n    colorId?: string | null\n    location?: string\n  }) => {\n    if (!ev.id) return\n    const uiEvent = events.find(e => e.id === ev.id)\n    if (!uiEvent) return\n    setEditingEvent(uiEvent)\n    setIsEditModalOpen(true)\n  }\n  const handleEventUpdated = (updated: UiEvent) => {\n    setEvents(prev =>\n      prev.map(e => (e.id === updated.id ? updated : e)),\n    )\n  }\n  if (hasToken === null) {\n    return <p className=\"text-center py-10\">Vérification de la connexion Google…</p>\n  }\n\n  if (hasToken === false) {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-10\">\n        <p className=\"mb-4 text-center\">\n          Connecte ton compte Google pour afficher l’agenda et analyser les mails.\n        </p>\n        <a\n          href=\"/api/google\"\n          className=\"px-4 py-2 rounded bg-blue-600 text-white\"\n        >\n          Se connecter avec Google\n        </a>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex flex-col w-full max-w-[1500px] mx-auto hidden\">\n      <div className=\"flex gap-4\">\n        <PanelLeft\n          targetDate={targetDate}\n          setTargetDate={setTargetDate}\n          onClickNewEvent={handleOpenCreateModal}\n        />\n        <div className=\"w-full flex flex-col\">\n          {loadingEvents && events.length === 0 ? (\n            <p className=\"text-center py-10\">Chargement des événements…</p>\n          ) : (\n            <Timeline\n              calendarViewType={calendarViewType}\n              targetDate={targetDate}\n              events={events}\n              onChangeTargetDate={setTargetDate}\n              onSelectEvent={setSelectedEvent}\n              onClickNewEvent={handleOpenCreateModal}\n            />\n          )}\n        </div>\n      </div>\n\n      <CreateEventModal\n        isOpen={isCreateEventModalOpen}\n        onClose={() => setIsCreateEventModalOpen(false)}\n        onSave={handleSaveEvent}\n      />\n\n      {selectedEventData && (\n        <>\n          <div className=\"absolute top-0 left-0 w-full h-full z-1\" />\n          <EventDetailModal\n            selectedEvent={{\n              ...selectedEvent,\n              event: {\n                id: selectedEventData.id,\n                title: selectedEventData.title,\n                startDate: selectedEventData.startDate,\n                endDate: selectedEventData.endDate,\n                colorClass: googleColorIdToClasses(selectedEventData.colorId),\n                description: selectedEventData.description,\n                colorId: selectedEventData.colorId ?? null,\n                location: selectedEventData.location,\n              },\n              eventCreator: {\n                displayName:\n                  selectedEventData.google?.creatorName ?? 'Créé via GoogleAgenda',\n              },\n            }}\n            onCloseModal={handleCloseEventDetailModal}\n            onEditEvent={handleEditEvent}\n          />\n        </>\n      )}\n\n      {editingEvent && (\n        <EditEventModal\n          isOpen={isEditModalOpen}\n          onClose={() => setIsEditModalOpen(false)}\n          event={editingEvent}\n          onUpdated={handleEventUpdated}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3936, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/f.hacqueville/OneDrive%20-%20LYCEE%20LA%20PROVIDENCE%20NICOLAS%20BARRE/Code/docsLaPro/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport RollingSlider from \"./components/Slider/RollingSlider\";\r\nimport { useData } from \"@/app/contexts/data\";\r\nimport { useUser, SignedOut, SignInButton } from \"@clerk/nextjs\";\r\nimport GoogleAgenda from \"./components/GoogleAgenda/GoogleAgenda\";\r\n\r\nexport default function Home() {\r\n  const { isLoaded, user } = useUser();\r\n  const data = useData();\r\n  if (!isLoaded) {\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen w-full\">\r\n      <div className=\"flex flex-col items-center\">\r\n        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent\"></div>\r\n        <p className=\"mt-4 text-lg font-medium text-gray-600\">Chargement en cours…</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n  function normalizeRoles(role: unknown): string[] {\r\n    if (Array.isArray(role)) return role as string[];\r\n    if (typeof role === \"string\") return [role];\r\n    return [];\r\n  }\r\n  const roles = normalizeRoles(user?.publicMetadata?.role);\r\n  const filteredCategories = data.categories.filter(category => (category.allowedRoles ?? []).some(r => roles.includes(r)));\r\n  const uniqueCategories = Array.from( new Map(filteredCategories.map(cat => [cat.id ?? cat.name, cat])).values());\r\n  return (\r\n    <main className=\"flex flex-col w-full text-xl sm:pt-[5vh]\">\r\n      <GoogleAgenda/>\r\n      {uniqueCategories.length > 0 && (\r\n        <RollingSlider categories={uniqueCategories} />\r\n      )}\r\n      <SignedOut>\r\n        <SignInButton>\r\n          <button className=\"absolute top-[48%] left-[38%] p-4\">Se connecter</button>\r\n        </SignInButton>\r\n      </SignedOut>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;AALA;;;;;AAOe,SAAS;QAkBO;;IAjB7B,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,IAAA,0KAAO;IAClC,MAAM,OAAO,IAAA,sIAAO;IACpB,IAAI,CAAC,UAAU;QACf,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;IAI9D;IACE,SAAS,eAAe,IAAa;QACnC,IAAI,MAAM,OAAO,CAAC,OAAO,OAAO;QAChC,IAAI,OAAO,SAAS,UAAU,OAAO;YAAC;SAAK;QAC3C,OAAO,EAAE;IACX;IACA,MAAM,QAAQ,eAAe,iBAAA,4BAAA,uBAAA,KAAM,cAAc,cAApB,2CAAA,qBAAsB,IAAI;IACvD,MAAM,qBAAqB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAA;YAAa;eAAD,CAAC,CAAA,yBAAA,SAAS,YAAY,cAArB,oCAAA,yBAAyB,EAAE,EAAE,IAAI,CAAC,CAAA,IAAK,MAAM,QAAQ,CAAC;;IACrH,MAAM,mBAAmB,MAAM,IAAI,CAAE,IAAI,IAAI,mBAAmB,GAAG,CAAC,CAAA;YAAQ;eAAD;YAAC,CAAA,UAAA,IAAI,EAAE,cAAN,qBAAA,UAAU,IAAI,IAAI;YAAE;SAAI;QAAG,MAAM;IAC7G,qBACE,6LAAC;QAAK,WAAU;;0BACd,6LAAC,gKAAY;;;;;YACZ,iBAAiB,MAAM,GAAG,mBACzB,6LAAC,2JAAa;gBAAC,YAAY;;;;;;0BAE7B,6LAAC,yLAAS;0BACR,cAAA,6LAAC,8LAAY;8BACX,cAAA,6LAAC;wBAAO,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAKhE;GAlCwB;;QACK,0KAAO;QACrB,sIAAO;;;KAFE","debugId":null}}]
}